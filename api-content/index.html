{"posts":[{"title":"uniapp-template ","content":"ä¸€ä¸ªåŸºäº Vue 3 + TypeScript + Pinia çš„ UniApp è·¨å¹³å°å¼€å‘æ¨¡æ¿é¡¹ç›®ï¼Œé›†æˆäº†å®Œæ•´çš„å¼€å‘å·¥å…·é“¾å’Œç»„ä»¶åº“ã€‚ é¡¹ç›®ç‰¹æ€§ ğŸš€ Vue 3 - ä½¿ç”¨æœ€æ–°çš„ Vue 3 Composition API ğŸ“± è·¨å¹³å° - æ”¯æŒå¾®ä¿¡å°ç¨‹åºã€H5ã€App ç­‰å¤šä¸ªå¹³å° ğŸ”§ TypeScript - å®Œæ•´çš„ TypeScript æ”¯æŒ ğŸ“¦ Pinia - ç°ä»£åŒ–çš„çŠ¶æ€ç®¡ç† ğŸ¨ Sass/SCSS - CSS é¢„å¤„ç†å™¨æ”¯æŒ ğŸ“¡ API ç®¡ç† - é›†æˆ Swagger API æ¨¡æ¿ç”Ÿæˆ ğŸ” ESLint + Prettier - ä»£ç è´¨é‡æ£€æŸ¥å’Œæ ¼å¼åŒ– ğŸ“ Monorepo - ä½¿ç”¨ pnpm workspace ç®¡ç†å¤šåŒ…é¡¹ç›® ğŸ¯ Wot Design Uni - é›†æˆå®Œæ•´çš„UIç»„ä»¶åº“ ğŸ› ï¸ å¼€å‘å·¥å…· - è‡ªåŠ¨è·¯ç”±ç”Ÿæˆã€é¡µé¢ç›‘å¬ç­‰æ’ä»¶ ğŸ” æƒé™ç®¡ç† - å®Œæ•´çš„ç™»å½•æˆæƒå’Œtokenç®¡ç† ğŸ“¤ æ–‡ä»¶ä¸Šä¼  - é›†æˆé˜¿é‡Œäº‘OSSæ–‡ä»¶ä¸Šä¼ åŠŸèƒ½ ğŸ“Š çŠ¶æ€ç®¡ç† - ä¸°å¯Œçš„Vue 3 Hookså’ŒçŠ¶æ€ç®¡ç†å·¥å…· é¡¹ç›®ç»“æ„ uniapp-template/ â”œâ”€â”€ components/ # å…¬å…±ç»„ä»¶å’Œå·¥å…· â”‚ â”œâ”€â”€ eslint-config/ # ESLint é…ç½®åŒ… â”‚ â””â”€â”€ swagger-api-templates/ # API æ¨¡æ¿ç”Ÿæˆå·¥å…· â”œâ”€â”€ packages/ â”‚ â””â”€â”€ uni-template/ # ä¸»è¦çš„ UniApp é¡¹ç›® â”‚ â”œâ”€â”€ src/ â”‚ â”‚ â”œâ”€â”€ pages/ # é¡µé¢æ–‡ä»¶ â”‚ â”‚ â”‚ â”œâ”€â”€ common/ # å…¬å…±é¡µé¢ â”‚ â”‚ â”‚ â”œâ”€â”€ tabbar/ # åº•éƒ¨å¯¼èˆªé¡µé¢ â”‚ â”‚ â”‚ â””â”€â”€ template/ # æ¨¡æ¿é¡µé¢ â”‚ â”‚ â”œâ”€â”€ components/ # ç»„ä»¶ â”‚ â”‚ â”‚ â”œâ”€â”€ common/ # å…¬å…±ç»„ä»¶ â”‚ â”‚ â”‚ â”œâ”€â”€ help/ # å¸®åŠ©ç»„ä»¶ â”‚ â”‚ â”‚ â””â”€â”€ request/ # è¯·æ±‚ç›¸å…³ç»„ä»¶ â”‚ â”‚ â”œâ”€â”€ layout/ # å¸ƒå±€ç»„ä»¶ â”‚ â”‚ â”‚ â”œâ”€â”€ navigation/ # å¯¼èˆªæ ç»„ä»¶ â”‚ â”‚ â”‚ â””â”€â”€ pageContainer/# é¡µé¢å®¹å™¨ç»„ä»¶ â”‚ â”‚ â”œâ”€â”€ store/ # Pinia çŠ¶æ€ç®¡ç† â”‚ â”‚ â”œâ”€â”€ request/ # API è¯·æ±‚å°è£… â”‚ â”‚ â”œâ”€â”€ utils/ # å·¥å…·å‡½æ•° â”‚ â”‚ â”œâ”€â”€ hooks/ # Vue 3 Hooks â”‚ â”‚ â”œâ”€â”€ enums/ # æšä¸¾å®šä¹‰ â”‚ â”‚ â”œâ”€â”€ types/ # ç±»å‹å®šä¹‰ â”‚ â”‚ â”œâ”€â”€ static/ # é™æ€èµ„æº â”‚ â”‚ â””â”€â”€ uni_modules/ # UniApp æ¨¡å— â”‚ â”‚ â””â”€â”€ wot-design-uni/ # Wot Design Uni ç»„ä»¶åº“ â”‚ â”œâ”€â”€ plugins/ # è‡ªå®šä¹‰æ’ä»¶ â”‚ â”œâ”€â”€ scripts/ # æ„å»ºè„šæœ¬ â”‚ â””â”€â”€ dist/ # æ„å»ºè¾“å‡º â”œâ”€â”€ package.json # æ ¹åŒ…é…ç½® â”œâ”€â”€ pnpm-workspace.yaml # pnpm å·¥ä½œåŒºé…ç½® â””â”€â”€ README.md # é¡¹ç›®è¯´æ˜æ–‡æ¡£ å¿«é€Ÿå¼€å§‹ ç¯å¢ƒè¦æ±‚ Node.js &gt;= 18 pnpm &gt;= 8 å®‰è£…ä¾èµ– pnpm install å¼€å‘å‘½ä»¤ # è¿›å…¥é¡¹ç›®ç›®å½• cd packages/uni-template # å¾®ä¿¡å°ç¨‹åºå¼€å‘ pnpm dev # H5 å¼€å‘ pnpm dev:h5 # App å¼€å‘ pnpm dev:app # å…¶ä»–å¹³å° pnpm dev:mp-alipay # æ”¯ä»˜å®å°ç¨‹åº pnpm dev:mp-baidu # ç™¾åº¦å°ç¨‹åº pnpm dev:mp-qq # QQ å°ç¨‹åº pnpm dev:mp-toutiao # å­—èŠ‚è·³åŠ¨å°ç¨‹åº pnpm dev:mp-kuaishou # å¿«æ‰‹å°ç¨‹åº pnpm dev:mp-jd # äº¬ä¸œå°ç¨‹åº pnpm dev:mp-lark # é£ä¹¦å°ç¨‹åº æ„å»ºå‘½ä»¤ # è¿›å…¥é¡¹ç›®ç›®å½• cd packages/uni-template # å¾®ä¿¡å°ç¨‹åºæ„å»º pnpm build # H5 æ„å»º pnpm build:h5 # App æ„å»º pnpm build:app API ç”Ÿæˆ # è¿›å…¥é¡¹ç›®ç›®å½• cd packages/uni-template # æ ¹æ®apifox/swagger æ–‡æ¡£å¯¼å‡ºæ¥å£jsonåœ°å€ï¼Œä¿®æ”¹é¡¹ç›®é…ç½®æ–‡ä»¶ï¼šswaggerApi.config.js projects: [{ name: '', url: 'http://127.0.0.1:4523/export/openapi/2?version=3.0' }] # æ ¹æ® apifox æ–‡æ¡£ç”Ÿæˆ API æ¥å£ pnpm api æ ¸å¿ƒç»„ä»¶ å¸ƒå±€ç»„ä»¶ Navigation - è‡ªå®šä¹‰å¯¼èˆªæ ç»„ä»¶ï¼Œæ”¯æŒçŠ¶æ€æ é«˜åº¦é€‚é… PageContainer - é¡µé¢å®¹å™¨ç»„ä»¶ï¼Œç»Ÿä¸€é¡µé¢å¸ƒå±€ å…¬å…±ç»„ä»¶ ImageUpload - å›¾ç‰‡ä¸Šä¼ ç»„ä»¶ï¼Œæ”¯æŒå¤šå›¾ä¸Šä¼ ã€é¢„è§ˆã€åˆ é™¤ Poster - æµ·æŠ¥ç”Ÿæˆç»„ä»¶ï¼Œæ”¯æŒCanvasç»˜åˆ¶å’Œå›¾ç‰‡åˆæˆ PullToRefresh - ä¸‹æ‹‰åˆ·æ–°ç»„ä»¶ï¼Œæ”¯æŒè‡ªå®šä¹‰åˆ·æ–°é€»è¾‘ RefreshList - åˆ—è¡¨åˆ·æ–°ç»„ä»¶ï¼Œé›†æˆä¸‹æ‹‰åˆ·æ–°å’Œä¸Šæ‹‰åŠ è½½ RichText - å¯Œæ–‡æœ¬ç»„ä»¶ï¼Œæ”¯æŒHTMLå†…å®¹æ¸²æŸ“ Ellipsis - æ–‡æœ¬çœç•¥ç»„ä»¶ï¼Œæ”¯æŒå¤šè¡Œæ–‡æœ¬æˆªæ–­ UI ç»„ä»¶åº“ é¡¹ç›®é›†æˆäº† Wot Design Uni ç»„ä»¶åº“ï¼ŒåŒ…å«ï¼š åŸºç¡€ç»„ä»¶ï¼šButtonã€Cellã€Iconã€Inputã€Gapã€Dividerç­‰ è¡¨å•ç»„ä»¶ï¼šFormã€Checkboxã€Radioã€Switchã€InputNumberç­‰ åé¦ˆç»„ä»¶ï¼šToastã€Dialogã€Loadingã€Notifyã€MessageBoxç­‰ å±•ç¤ºç»„ä»¶ï¼šCardã€Tagã€Badgeã€Progressã€Circleç­‰ å¯¼èˆªç»„ä»¶ï¼šTabsã€Tabbarã€Navbarã€Sidebarã€IndexBarç­‰ æ•°æ®å½•å…¥ï¼šDatetimePickerã€Calendarã€ColPickerã€PasswordInputç­‰ æ ·å¼æ–‡ä»¶ç»„ç»‡ src/ â”œâ”€â”€ assets/ â”‚ â””â”€â”€ index.scss # å…¨å±€æ ·å¼å…¥å£ â”œâ”€â”€ components/ â”‚ â””â”€â”€ */index.scss # ç»„ä»¶æ ·å¼æ–‡ä»¶ â”œâ”€â”€ pages/ â”‚ â””â”€â”€ */index.scss # é¡µé¢æ ·å¼æ–‡ä»¶ â””â”€â”€ layout/ â””â”€â”€ */index.scss # å¸ƒå±€æ ·å¼æ–‡ä»¶ ä¸»é¢˜å˜é‡ ä½¿ç”¨ CSS å˜é‡å®šä¹‰ä¸»é¢˜è‰²å½©å’Œå°ºå¯¸ï¼š :root { --wot-color-theme: #517cf0; --wot-color-success: #34d19d; --wot-color-warning: #f0883a; --wot-color-danger: #fa4350; } å¼€å‘å·¥å…· æ’ä»¶å·¥å…· é¡¹ç›®åŒ…å«ä¸¤ä¸ªè‡ªå®šä¹‰æ’ä»¶ï¼Œç”¨äºè‡ªåŠ¨åŒ–å¼€å‘æµç¨‹ï¼š è·¯ç”±ç”Ÿæˆæ’ä»¶ (getRoute.mjs) # è¿›å…¥é¡¹ç›®ç›®å½• cd packages/uni-template # æ‰‹åŠ¨ç”Ÿæˆè·¯ç”±æ–‡ä»¶ pnpm route åŠŸèƒ½è¯´æ˜ï¼š è‡ªåŠ¨è¯»å– src/pages.json é…ç½® ç”Ÿæˆ src/routes.ts è·¯ç”±æ˜ å°„æ–‡ä»¶ ç”Ÿæˆ src/RouteParams.d.ts è·¯ç”±å‚æ•°ç±»å‹å®šä¹‰ æ”¯æŒä¸»åŒ…é¡µé¢å’Œåˆ†åŒ…é¡µé¢ è‡ªåŠ¨æå–é¡µé¢æ ‡é¢˜å’Œè·¯å¾„ä¿¡æ¯ ç”Ÿæˆ tabbar é¡µé¢é…ç½® ç”Ÿæˆçš„æ–‡ä»¶ï¼š routes.ts - åŒ…å« routeNames å¯¹è±¡å’Œç±»å‹å®šä¹‰ RouteParams.d.ts - è·¯ç”±å‚æ•°çš„ TypeScript ç±»å‹å®šä¹‰ é¡µé¢ç›‘å¬æ’ä»¶ (watch-pages.mjs) # å¼€å‘æ¨¡å¼ä¸‹è‡ªåŠ¨è¿è¡Œï¼ˆåŒ…å«åœ¨ dev å‘½ä»¤ä¸­ï¼‰ pnpm dev åŠŸèƒ½è¯´æ˜ï¼š ç›‘å¬ src/pages.json æ–‡ä»¶å˜åŒ– æ–‡ä»¶å˜æ›´æ—¶è‡ªåŠ¨é‡æ–°ç”Ÿæˆè·¯ç”±æ–‡ä»¶ å¼€å‘æ¨¡å¼ä¸‹æä¾›å®æ—¶è·¯ç”±æ›´æ–° é¿å…æ‰‹åŠ¨ç»´æŠ¤è·¯ç”±æ˜ å°„çš„ç¹çå·¥ä½œ å·¥ä½œæµç¨‹ï¼š å¯åŠ¨æ—¶æ‰§è¡Œä¸€æ¬¡è·¯ç”±ç”Ÿæˆ æŒç»­ç›‘å¬ pages.json æ–‡ä»¶ æ£€æµ‹åˆ°å˜æ›´æ—¶è‡ªåŠ¨é‡æ–°ç”Ÿæˆè·¯ç”±æ–‡ä»¶ æ§åˆ¶å°è¾“å‡ºç”ŸæˆçŠ¶æ€å’Œç»“æœ çŠ¶æ€ç®¡ç† Pinia Store ä½¿ç”¨ Pinia è¿›è¡ŒçŠ¶æ€ç®¡ç†ï¼Œstore æ–‡ä»¶æ”¾åœ¨ src/store/ ç›®å½•ä¸‹ï¼š // src/store/common/useGlobalStore.ts export const useGlobalStore = defineStore('globalStore', () =&gt; { const userInfo = ref&lt;MemberDto&gt;() const getUserInfo = async () =&gt; { const { data, code } = await api.get['/api/member/v1/member/getUserInfo']() data &amp;&amp; setUserInfo(data) return { data, code } } return { userInfo, getUserInfo } }) ä¸»è¦Storeï¼š useGlobalStore - å…¨å±€çŠ¶æ€ç®¡ç†ï¼Œç”¨æˆ·ä¿¡æ¯ã€ç™»å½•çŠ¶æ€ç­‰ useSystemInfo - ç³»ç»Ÿä¿¡æ¯ç®¡ç†ï¼Œè®¾å¤‡ä¿¡æ¯ã€å±å¹•å°ºå¯¸ç­‰ useGetAccountInfo - å°ç¨‹åºç¯å¢ƒä¿¡æ¯ç®¡ç† ç»„åˆå¼å‡½æ•° (Hooks) é¡¹ç›®æä¾›äº†å¤šä¸ªå®ç”¨çš„ç»„åˆå¼å‡½æ•°ï¼š çŠ¶æ€ç®¡ç†ç±» useBoolean - å¸ƒå°”å€¼çŠ¶æ€ç®¡ç†ï¼Œæ”¯æŒsetTrue/setFalse/toggleç­‰æ“ä½œ useToggle - åˆ‡æ¢çŠ¶æ€ç®¡ç†ï¼Œæ”¯æŒä¸¤ä¸ªå€¼ä¹‹é—´çš„åˆ‡æ¢ useState - å—æ§/éå—æ§çŠ¶æ€ç®¡ç†ï¼Œç±»ä¼¼Reactçš„useState useUpdate - å¼ºåˆ¶æ›´æ–°ç»„ä»¶ è¡¨å•å’Œæ•°æ®å¤„ç† useFormService - è¡¨å•æœåŠ¡å°è£…ï¼Œæ”¯æŒè¡¨å•æ•°æ®ç®¡ç†å’Œé‡ç½® useMutate - æ•°æ®è·å–å’ŒçŠ¶æ€ç®¡ç†ï¼Œæ”¯æŒæ•°æ®æ ¼å¼åŒ– usePullToRefresh - ä¸‹æ‹‰åˆ·æ–°å’Œä¸Šæ‹‰åŠ è½½æ›´å¤š useModify - é¡µé¢æ•°æ®ä¿®æ”¹å’Œæ›´æ–° é¡µé¢å’Œå¯¼èˆª useNavigation - é¡µé¢å¯¼èˆªç®¡ç†ï¼Œæ”¯æŒå„ç§è·³è½¬æ–¹å¼ useParams - é¡µé¢å‚æ•°è·å–ï¼Œæ”¯æŒåœºæ™¯å€¼è§£æ useGetParams - ç»„ä»¶ä¸­è·å–é¡µé¢å‚æ•° useScroll - æ»šåŠ¨ç›‘å¬å’Œå¸é¡¶æ•ˆæœ å·¥å…·ç±» useLockFn - å‡½æ•°é˜²æŠ–å’Œé”å®šï¼Œé˜²æ­¢é‡å¤è°ƒç”¨ useNetworkStatus - ç½‘ç»œçŠ¶æ€ç›‘å¬ useUpdateEffect - å¿½ç•¥é¦–æ¬¡æ‰§è¡Œçš„effect API è¯·æ±‚ é¡¹ç›®ä½¿ç”¨è‡ªå®šä¹‰å°è£…çš„è¯·æ±‚åº“ï¼Œæ”¯æŒæ ¹æ®swaggeræ–‡æ¡£ç”Ÿæˆtsã€è‡ªåŠ¨tokenç®¡ç†å’Œé™é»˜æˆæƒï¼Œä»¥åŠç»Ÿä¸€çš„é”™è¯¯å¤„ç†å’Œå“åº”æ‹¦æˆªã€‚ è¯·æ±‚å°è£… ä½¿ç”¨è‡ªå®šä¹‰å°è£…çš„è¯·æ±‚åº“ï¼Œé…ç½®æ–‡ä»¶åœ¨ src/request/ ç›®å½•ä¸‹ï¼š // ä½¿ç”¨è¯·æ±‚ const data = await api.get['/api/member/v1/activity/activity']() const result = await api.post['/api/auth/login']({ username, password }) ç‰¹æ€§ï¼š æ ¹æ®swaggeræ–‡æ¡£ç”Ÿæˆts è‡ªåŠ¨tokenç®¡ç†å’Œé™é»˜æˆæƒ ç»Ÿä¸€çš„é”™è¯¯å¤„ç†å’Œå“åº”æ‹¦æˆª æ”¯æŒè¯·æ±‚å’Œå“åº”æ‹¦æˆªå™¨ è‡ªåŠ¨å¤„ç†FormDataå’ŒæŸ¥è¯¢å‚æ•° è¯·æ±‚å®ä¾‹ // src/request/instance.ts const instance = Request.create({ baseUrl: apiUrl }) // è¯·æ±‚æ‹¦æˆªå™¨ - è‡ªåŠ¨æ·»åŠ token instance.requestInterceptors.use(async (config) =&gt; { let token = getAuthorization() if (!token &amp;&amp; silentAuthorization) { const { data } = await getToken(silentAuthorizationUrl) token = data setAuthorization(token) } config.headers = { ...config.headers, Authorization: token } return config }) // å“åº”æ‹¦æˆªå™¨ - ç»Ÿä¸€é”™è¯¯å¤„ç† instance.responseInterceptors.use((res) =&gt; { if ([403, 40003, 401].indexOf(res.data.code) !== -1) { // tokenè¿‡æœŸå¤„ç† removeAuthorization() loginUrl &amp;&amp; uni.navigateTo({ url: loginUrl }) throw new Error() } return res.data }) å·¥å…·å‡½æ•° æ–‡ä»¶å¤„ç† é˜¿é‡Œäº‘OSSä¸Šä¼  - æ”¯æŒå›¾ç‰‡ã€æ–‡ä»¶ä¸Šä¼ åˆ°é˜¿é‡Œäº‘OSS å›¾ç‰‡å¤„ç† - å›¾ç‰‡å‹ç¼©ã€è£å‰ªã€æ ¼å¼è½¬æ¢ç­‰ æ–‡ä»¶ç±»å‹æ£€æµ‹ - è‡ªåŠ¨è¯†åˆ«å›¾ç‰‡ã€è§†é¢‘ã€éŸ³é¢‘ã€PDFç­‰æ–‡ä»¶ç±»å‹ æ•°æ®å¤„ç† é«˜ç²¾åº¦è®¡ç®— - è§£å†³JavaScriptæµ®ç‚¹æ•°ç²¾åº¦é—®é¢˜ æ•°æ®æ ¼å¼åŒ– - é‡‘é¢æ ¼å¼åŒ–ã€ç”µè¯å·ç è„±æ•ç­‰ æ•°ç»„æ“ä½œ - å»é‡ã€æ’åºã€è½¬æ¢ç­‰å·¥å…·å‡½æ•° å¹³å°é€‚é… è®¾å¤‡ä¿¡æ¯ - è·å–è®¾å¤‡å‹å·ã€å±å¹•å°ºå¯¸ã€çŠ¶æ€æ é«˜åº¦ç­‰ å¹³å°æ£€æµ‹ - è‡ªåŠ¨è¯†åˆ«å½“å‰è¿è¡Œå¹³å° ç½‘ç»œçŠ¶æ€ - ç›‘å¬ç½‘ç»œçŠ¶æ€å˜åŒ– æ”¯æŒå¹³å° âœ… å¾®ä¿¡å°ç¨‹åº (MP-WEIXIN) âœ… H5 (H5) âœ… App (Android/iOS) âœ… æ”¯ä»˜å®å°ç¨‹åº (MP-ALIPAY) âœ… ç™¾åº¦å°ç¨‹åº (MP-BAIDU) âœ… QQ å°ç¨‹åº (MP-QQ) âœ… å­—èŠ‚è·³åŠ¨å°ç¨‹åº (MP-TOUTIAO) âœ… å¿«æ‰‹å°ç¨‹åº (MP-KUAISHOU) âœ… äº¬ä¸œå°ç¨‹åº (MP-JD) âœ… é£ä¹¦å°ç¨‹åº (MP-LARK) âœ… å¿«åº”ç”¨ (QUICKAPP-WEBVIEW) æŠ€æœ¯æ ˆ æ¡†æ¶: UniApp 3.x + Vue 3.5.11 å‰ç«¯: Vue 3 + TypeScript 5.9.2 çŠ¶æ€ç®¡ç†: Pinia 2.3.1 æ ·å¼: Sass 1.66.1 æ„å»ºå·¥å…·: Vite 5.2.11 ä»£ç è§„èŒƒ: ESLint 8.57.1 + Prettier 3.6.2 åŒ…ç®¡ç†: pnpm workspace API å·¥å…·: è‡ªå®šä¹‰è¯·æ±‚å°è£… + Swagger æ¨¡æ¿ç”Ÿæˆ UI ç»„ä»¶: Wot Design Uni å¼€å‘å·¥å…·: è‡ªåŠ¨è·¯ç”±ç”Ÿæˆã€é¡µé¢ç›‘å¬ç­‰æ’ä»¶ å·¥å…·åº“: dayjs 1.11.13 (æ—¥æœŸå¤„ç†) å¼€å‘æŒ‡å— é¡µé¢è·¯ç”± é¡µé¢è·¯ç”±é…ç½®åœ¨ src/pages.json ä¸­ï¼Œæ”¯æŒè‡ªåŠ¨è·¯ç”±ç”Ÿæˆã€‚ ç»„ä»¶å¼€å‘ å…¬å…±ç»„ä»¶æ”¾åœ¨ src/components/ ç›®å½•ä¸‹ï¼Œæ”¯æŒ TypeScript ç±»å‹å®šä¹‰ï¼š &lt;template&gt; &lt;view class=&quot;custom-component&quot;&gt; &lt;slot /&gt; &lt;/view&gt; &lt;/template&gt; &lt;script setup lang=&quot;ts&quot;&gt; interface Props { title?: string } defineProps&lt;Props&gt;() &lt;/script&gt; ç±»å‹å®šä¹‰ é¡¹ç›®åŒ…å«å®Œæ•´çš„ TypeScript ç±»å‹å®šä¹‰ï¼š src/types/ - å…¨å±€ç±»å‹å®šä¹‰ src/enums/ - æšä¸¾å®šä¹‰ src/request/types/ - è¯·æ±‚ç›¸å…³ç±»å‹ src/components/request/types/ - è¯·æ±‚ç»„ä»¶ç±»å‹ é…ç½®è¯´æ˜ ç¯å¢ƒé…ç½® src/config.ts - åº”ç”¨é…ç½®ï¼ŒAPIåœ°å€ã€ç™»å½•é…ç½®ç­‰ src/manifest.json - åº”ç”¨æ¸…å•æ–‡ä»¶ vite.config.ts - Vite æ„å»ºé…ç½® tsconfig.json - TypeScript é…ç½® API é…ç½® swaggerApi.config.js - Swagger API ç”Ÿæˆé…ç½® ESLint é…ç½® components/eslint-config/ - ç»Ÿä¸€çš„ ESLint é…ç½® éƒ¨ç½²è¯´æ˜ å°ç¨‹åºéƒ¨ç½² æ„å»ºé¡¹ç›®ï¼špnpm build ä½¿ç”¨å¾®ä¿¡å¼€å‘è€…å·¥å…·æ‰“å¼€ dist/build/mp-weixin ç›®å½• ä¸Šä¼ ä»£ç åˆ°å¾®ä¿¡å°ç¨‹åºåå° H5 éƒ¨ç½² æ„å»ºé¡¹ç›®ï¼špnpm build:h5 å°† dist/build/h5 ç›®å½•éƒ¨ç½²åˆ° Web æœåŠ¡å™¨ App éƒ¨ç½² æ„å»ºé¡¹ç›®ï¼špnpm build:app ä½¿ç”¨ HBuilderX æ‰“å¼€é¡¹ç›® äº‘æ‰“åŒ…æˆ–æœ¬åœ°æ‰“åŒ… å¸¸è§é—®é¢˜ è·¯ç”±ç”Ÿæˆå¤±è´¥ æ£€æŸ¥ src/pages.json æ–‡ä»¶æ ¼å¼æ˜¯å¦æ­£ç¡®ï¼Œç¡®ä¿ JSON è¯­æ³•æ— è¯¯ã€‚ ç»„ä»¶åº“æ ·å¼é—®é¢˜ ç¡®ä¿æ­£ç¡®å¼•å…¥äº† Wot Design Uni çš„æ ·å¼æ–‡ä»¶ï¼Œæ£€æŸ¥ src/main.ts ä¸­çš„å¯¼å…¥ã€‚ è¯·æ±‚å¤±è´¥ æ£€æŸ¥ src/config.ts ä¸­çš„APIåœ°å€é…ç½®ï¼Œç¡®ä¿ç½‘ç»œç¯å¢ƒæ­£å¸¸ã€‚ è´¡çŒ®æŒ‡å— Fork æœ¬ä»“åº“ åˆ›å»ºç‰¹æ€§åˆ†æ”¯ (git checkout -b feature/AmazingFeature) æäº¤æ›´æ”¹ (git commit -m 'Add some AmazingFeature') æ¨é€åˆ°åˆ†æ”¯ (git push origin feature/AmazingFeature) æ‰“å¼€ Pull Request æ›´æ–°æ—¥å¿— v3.0.0 Monorepo + pnpm workspace æ„å»º é›†æˆ Vue 3 + TypeScript + Pinia é›†æˆ Wot Design Uni ç»„ä»¶åº“ æ·»åŠ è‡ªåŠ¨è·¯ç”±ç”Ÿæˆæ’ä»¶ æ·»åŠ é¡µé¢ç›‘å¬æ’ä»¶ å®Œæ•´çš„è¯·æ±‚å°è£…å’Œæ‹¦æˆªå™¨ ä¸°å¯Œçš„Vue 3 Hookså·¥å…·åº“ é˜¿é‡Œäº‘OSSæ–‡ä»¶ä¸Šä¼ é›†æˆ å®Œæ•´çš„æƒé™ç®¡ç†å’Œç™»å½•æµç¨‹ è®¸å¯è¯ ISC è”ç³»æ–¹å¼ å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œè¯·é€šè¿‡ä»¥ä¸‹æ–¹å¼è”ç³»ï¼š æäº¤ Issue å‘é€é‚®ä»¶ å‚ä¸è®¨è®º ","link":"https://ihopefulchina.github.io/uniapp_template /"},{"title":"ğŸ‘‰ğŸ‘‰ğŸ‘‰çˆ¬è“æ¹–åŸå‹ç›®å½•ç»“æ„","content":"æœ¬æ’ä»¶ç”¨äºçˆ¬ è“æ¹–åŸå‹ç›®å½•ç»“æ„ï¼Œå¯¼å‡ºcsvæ–‡ä»¶ï¼Œå¯ä»¥ç”¨äºé£ä¹¦ç­‰ å¼€å‘é¡¹ç›®åœ¨çº¿æ–‡æ¡£ã€‚ åŸå‹ åœ¨å…¬å¸å‘ç°ä¸€ä¸ªç—›ç‚¹, éœ€æ±‚æ˜¯è¿™æ ·çš„: è“æ¹–åŸå‹ï¼Œéœ€è¦æŒ‰ç…§ç›®å½•ä¸‹æ¥ï¼Œç„¶åç”Ÿæˆé£ä¹¦åœ¨çº¿å¼€å‘æ–‡æ¡£ ä¼ ç»Ÿä¸Šï¼Œåªèƒ½æ‰‹åŠ¨copy é’ˆå¯¹ä»¥ä¸Šï¼Œå†™ä¸€ä¸ªæ²¹çŒ´è„šæœ¬æ’ä»¶ çˆ¬è“æ¹–åŸå‹ç›®å½•ç»“æ„ ä¸»è¦ç‰¹æ€§ ç”Ÿæˆcsvæ–‡ä»¶ï¼Œ ä»»åŠ¡æ¨¡å—copy3ä»½, 3ç§ä»»åŠ¡ç±»å‹ï¼š[æ¥å£å¼€å‘, é¡µé¢å¼€å‘, æ¥å£è”è°ƒ] ï¼Œå¦‚æœæœ‰å…¶ä»–è‡ªå®šä¹‰ï¼Œè‡ªè¡Œè°ƒæ•´ã€‚ ç°å·²æ”¯æŒæŒ‰é’®æ‹–æ‹½ï¼Œå¹¶ç¼“å­˜topï¼Œrightä½ç½®ä¿¡æ¯ï¼Œè§£å†³é®æŒ¡åŸå‹é—®é¢˜ã€‚ æ”¹æˆç”Ÿæˆcsvæ ¼å¼æ–‡ä»¶ï¼Œå…¼å®¹æ€§æ›´å¼ºï¼Œå¯ä»¥åœ¨é£ä¹¦æ–°å»ºä¸€ä¸ªå¤šç»´è¡¨æ ¼ï¼Œç„¶åé€‰æ‹©å¯¼å…¥Excelç”Ÿæˆçš„æ–‡ä»¶ã€‚ åç»­æ”¯æŒ æ”¯æŒæ•°æ®ç±»å‹æ›´ä¸°å¯Œï¼Œæ¯”å¦‚æ·»åŠ å¼€å‘äººå‘˜ä¿¡æ¯ ç”Ÿæˆçš„Excel å¯¼å…¥åˆ°é£ä¹¦ ","link":"https://ihopefulchina.github.io/qn_PbZX5g6/"},{"title":"è‡ªå®šä¹‰Hooks: usePullToRefresh(Vue3) - åˆ—è¡¨ç»„ä»¶ä¸­è½»æ¾å®ç°ä¸‹æ‹‰åˆ·æ–°å’Œä¸Šæ‹‰åŠ è½½æ›´å¤šåŠŸèƒ½","content":"åœ¨ Vue 3 ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡è‡ªå®šä¹‰ Hook æ¥å°†ä¸šåŠ¡é€»è¾‘ä»ç»„ä»¶ä¸­æŠ½ç¦»å‡ºæ¥ï¼Œä½¿å¾—æˆ‘ä»¬çš„ç»„ä»¶æ›´åŠ ç®€æ´å’Œæ˜“äºç»´æŠ¤ã€‚ä»Šå¤©ï¼Œæˆ‘ä»¬å°†ä»‹ç»å¦‚ä½•å®ç°ä¸€ä¸ªè‡ªå®šä¹‰çš„ PullToRefresh Hookï¼Œè¯¥ Hook å¯ä»¥å¸®åŠ©æˆ‘ä»¬åœ¨åˆ—è¡¨ç»„ä»¶ä¸­è½»æ¾å®ç°ä¸‹æ‹‰åˆ·æ–°å’Œä¸Šæ‹‰åŠ è½½æ›´å¤šåŠŸèƒ½ã€‚ èƒŒæ™¯ åœ¨è®¸å¤šç§»åŠ¨ç«¯åº”ç”¨æˆ– Web åº”ç”¨ä¸­ï¼Œä¸‹æ‹‰åˆ·æ–°å’Œä¸Šæ‹‰åŠ è½½æ›´å¤šåŠŸèƒ½æ˜¯éå¸¸å¸¸è§çš„äº¤äº’æ–¹å¼ã€‚ä¸ºäº†å®ç°è¿™ä¸€åŠŸèƒ½ï¼Œæˆ‘ä»¬éœ€è¦ç®¡ç†åˆ†é¡µçŠ¶æ€ã€åŠ è½½çŠ¶æ€ã€æ•°æ®åˆå¹¶ç­‰å¤šä¸ªæ–¹é¢çš„é€»è¾‘ã€‚é€šè¿‡ä½¿ç”¨ Vue 3 çš„ç»„åˆå¼ APIï¼ˆComposition APIï¼‰ï¼Œæˆ‘ä»¬å¯ä»¥å°†è¿™äº›é€»è¾‘å°è£…æˆä¸€ä¸ªé€šç”¨çš„ Hookï¼Œä½¿å¾—ä»£ç æ›´åŠ å¤ç”¨å’Œæ˜“äºç»´æŠ¤ã€‚ éœ€æ±‚åˆ†æ æˆ‘ä»¬éœ€è¦å®ç°ä»¥ä¸‹åŠŸèƒ½ï¼š â€¢ æ”¯æŒä¸‹æ‹‰åˆ·æ–°å’Œä¸Šæ‹‰åŠ è½½æ›´å¤šã€‚ â€¢ æ”¯æŒåˆ†é¡µåŠ è½½ï¼Œæ¯æ¬¡è¯·æ±‚æ—¶ï¼Œéƒ½ä¼šè¿”å›ä¸€é¡µçš„æ•°æ®ã€‚ â€¢ æ”¯æŒæ•°æ®çš„å»é‡å¤„ç†ï¼Œé˜²æ­¢åŠ è½½é‡å¤çš„æ•°æ®ã€‚ â€¢ æ”¯æŒåˆ·æ–°æ—¶æ¸…ç©ºæ—§æ•°æ®ã€‚ â€¢ æ”¯æŒè‡ªå®šä¹‰æ•°æ®æ ¼å¼åŒ–ã€‚ â€¢ æ”¯æŒåˆ·æ–°å®Œæˆåçš„å›è°ƒï¼Œä»¥ä¾¿å¤„ç†åˆ—è¡¨æ•°æ®ã€‚ ä»£ç å®ç° ä¸‹é¢æ˜¯æˆ‘ä»¬å®ç°çš„ usePullToRefresh Hook ä»£ç ï¼š import { computed, onMounted, ref } from 'vue'; import { useLockFn } from '~/hooks'; import { removeRepetition } from '~/utils'; export enum PullToRefreshState { /** * æ™®é€šçŠ¶æ€ */ none, /** * åˆ·æ–°ä¸­ */ refreshing, /** * æ·»åŠ ä¸­ */ pushing, } export interface IPullRefreshHookRefreshParams { /** * åˆ·æ–°æ—¶æ˜¯å¦æ¸…ç©ºæ—§æ•°ç»„ * * @default false */ clearList?: boolean; } interface IUsePullToRefreshOption&lt;T&gt; { /** é»˜è®¤æ•°æ® */ defaultData?: T[]; /** é»˜è®¤åˆå§‹æ’å…¥æ•°æ® */ defaultInsertData?: T[]; dataKey?: string; /** åˆå§‹æ˜¯å¦å‘å‡ºè¯·æ±‚ */ initRequest?: boolean; /** è·å–æ•°æ® */ getData: (data: Record&lt;string, any&gt; &amp; { pageNum: number }) =&gt; Promise&lt;{ data?: { list?: T[]; isLastPage?: boolean; total?: number } }&gt;; /** æ•°æ®æ ¼å¼åŒ– */ dataFormat?(data: T[]): any[]; /** è·å–æ•°æ®å®Œæˆå›è°ƒï¼Œè¿”å›æœ¬æ¬¡æ•°æ® */ onAfterLoad?(data: T[], currentParams: Record&lt;string, any&gt; &amp; { pageNum: number }, total: number, isLastPage: boolean): void; /** è·å–æ•°æ®å®Œæˆå›è°ƒï¼Œè¿”å›å½“å‰listã€currentParams */ customSpliceList?(list: T[], currentParams: Record&lt;string, any&gt; &amp; { pageNum: number }): void; } export default function usePullToRefresh&lt;T&gt;(config: IUsePullToRefreshOption&lt;T&gt;) { const { defaultData = [], dataKey = 'id' } = config; const list = ref&lt;any[]&gt;(defaultData); const total = ref&lt;number&gt;(0); const noMore = ref&lt;boolean&gt;(false); const pullToRefreshState = ref&lt;PullToRefreshState&gt;(PullToRefreshState.refreshing); const requestId = ref&lt;number&gt;(0); const pageNum = ref&lt;number&gt;(0); const getListData = useLockFn(async (num?: number) =&gt; { if (num !== undefined) { pageNum.value = num; } else { pageNum.value++; } if (pageNum.value === 1) { pullToRefreshState.value = PullToRefreshState.refreshing; // setData([]); } else { pullToRefreshState.value = PullToRefreshState.pushing; } try { const currentRequestId = ++requestId.value; const currentParams = { pageNum: pageNum.value, pageSize: 10 }; const { data = {} } = await config.getData(currentParams); if (currentRequestId !== requestId.value) { return; } // eslint-disable-next-line prefer-const let { list: dataList = [], isLastPage } = data; dataList = config.dataFormat ? config.dataFormat(dataList) : dataList; if (config.onAfterLoad) { config.onAfterLoad(dataList, currentParams, data?.total || -1, !!isLastPage); } if (pageNum.value === 1) { list.value = (config.defaultInsertData ? [...config.defaultInsertData, ...dataList] : dataList) || []; } else { dataList = removeRepetition((list.value || []) ?.concat(dataList), dataKey); list.value = dataList; } if (config.customSpliceList) { config.customSpliceList(dataList, currentParams); } total.value = data?.total || -1; noMore.value = isLastPage !== undefined ? !!isLastPage : data?.total !== -1 ? dataList?.length &gt;= (data?.total || -1) : true; } catch (error) { if (pageNum.value === 1) { list.value = []; } } pullToRefreshState.value = PullToRefreshState.none; }); /** * æ›´æ–°æŸæ¡æ•°æ®çš„å€¼ * * @param updatedata */ function updateById(updatedata: T, key = 'id') { const newList = [...list.value]?.map((value) =&gt; { if ((value as any)[key] === (updatedata as any)[key]) { /** æ”¹æˆæ›¿æ¢æ›´æ–° */ return { ...updatedata }; } return { ...value }; }); list.value = [...newList]; } /** * åˆ é™¤æŸæ¡æ•°æ®çš„å€¼ * * @param id */ function deleteById(id: number | string, key = 'id') { list.value = list.value?.filter((item) =&gt; `${item[key]}` !== `${id}`); } /** * æ›´æ–°åˆ—è¡¨ä¸­çš„æ•°æ® * * @param {T} data éœ€è¦æ›´æ–°çš„æ•°æ® * @param {(string | ((item: T, index: number) =&gt; boolean))} compare æ¯”å¯¹é€»è¾‘ */ function updateLisItem(data: T, compare: string | ((item: T, index: number) =&gt; boolean)) { const isString = typeof compare === 'string'; list.value = list.value?.map((value, index) =&gt; { if (isString) { return (value as any)[compare] === (data as any)[compare] ? { ...value, ...data } : value; } return compare(value, index) ? { ...value, ...data } : value; }); } onMounted(() =&gt; { if (config?.initRequest !== false) { getListData(); } }); function onRefresh(refreshParams?: IPullRefreshHookRefreshParams) { if (refreshParams?.clearList) { list.value = []; } getListData(1); } const isEmpty = computed(() =&gt; list?.value.length === 0 &amp;&amp; pullToRefreshState?.value === PullToRefreshState.none); return { list, setList: list.value, total, updateById, pageNum, updateLisItem, deleteByIndex: (index: number) =&gt; (list.value = list.value ?.filter((__, idx) =&gt; idx !== index)), /** æ ¹æ®ä¼ å…¥çš„æ ‡è¯†åˆ é™¤å¯¹åº”çš„æ•°æ®ï¼Œä¼ å…¥æ ‡è¯†å€¼å’Œæ ‡è¯†å­—æ®µï¼Œé»˜è®¤id */ deleteById, state: pullToRefreshState, noMore, onRefresh, isEmpty, onReachBottom: () =&gt; getListData(), }; } ä½¿ç”¨å®ä¾‹ // åˆ—è¡¨æ•°æ® const pullToProps = useMMPullToRefresh&lt;UpWorkHistoryPageVO&gt;({ initRequest: false, getData: (params) =&gt; { if (type.value === EStaffBillPermission.REPAIR) { return api['/wechat/api/repairWorkOrderSignHistory/page_GET'] ({ ...params, id: pageQuery?.value?.id }); } return api['/wechat/api/upWorkOrder/historyPage_GET'] ({ ...params, id: pageQuery?.value?.id, type: ESignInType.SIGN_IN }); }, }); const { list, isEmpty } = toRefs(pullToProps); &lt;PullToRefresh :noMore=&quot;pullToProps?.noMore&quot; :state=&quot;pullToProps?.state&quot; :isEmpty=&quot;pullToProps?.isEmpty&quot; @onRefresh=&quot;pullToProps?.onRefresh&quot; @onReachBottom=&quot;pullToProps?.onReachBottom&quot; refresherBackground=&quot;#fff&quot; &gt; &lt;view class=&quot;list&quot; v-if=&quot;list &amp;&amp; list?.length &gt; 0&quot;&gt; &lt;view class=&quot;item&quot; v-for=&quot;item in list&quot; :key=&quot;item?.id&quot;&gt; &lt;Item :item=&quot;item&quot; :type=&quot;type&quot; /&gt; &lt;/view&gt; &lt;/view&gt; &lt;view v-else-if=&quot;isEmpty&quot;&gt; &lt;Empty marginTop=&quot;440&quot; :emptyStr=&quot;t('common.no_data')&quot; /&gt; &lt;/view&gt; &lt;/PullToRefresh&gt; ``` PullToRefresh ç»„ä»¶æºç (ä»…ä¾›å‚è€ƒï¼Œç›¸å…³é€»è¾‘æ ¹æ®é¡¹ç›®å®é™…ä¸šåŠ¡åœºæ™¯) import { CSSProperties, ComputedRef, Ref, computed, getCurrentInstance, onMounted, ref, toRefs } from 'vue'; import Gap from '~/components/common/gap/Gap.vue'; import { useLockFn } from '~/hooks'; import { useSystemInfo } from '~/state/useSystemInfo'; import TnLoadmore from '~/uni_modules/tuniaoui-vue3/components/loadmore/src/loadmore.vue'; import { selectRect } from '~/utils/uniApi'; import { MMPullToRefreshState } from './const'; /** è®¾ç½®è‡ªå®šä¹‰ä¸‹æ‹‰åˆ·æ–°é˜ˆå€¼ */ const REFRESHER_THRESHOLD = 45; interface IMMPullToRefreshProps { /** åˆ·æ–°çŠ¶æ€ */ state: Ref; /** æ²¡æœ‰æ›´å¤š */ noMore: Ref; /** æ˜¯å¦æ˜¾ç¤ºæ²¡æœ‰æ›´å¤šæ–‡æ¡ˆï¼Œé»˜è®¤æ˜¾ç¤º */ hiddeNoMoreText?: boolean; /** æ˜¯å¦ç©ºæ•°æ® */ isEmpty?: ComputedRef; /** åˆ—è¡¨é«˜åº¦ */ height?: number; /** styles */ styles?: CSSProperties; /** isTab */ isTab?: boolean; /** èƒŒæ™¯é¢œè‰² */ refresherBackground?: string; /** åº•éƒ¨ç©ºé—´é«˜åº¦ rpx */ footerSpace?: number; /** é¡µé¢æ»šåŠ¨å›æ‰ */ onScroll?: (e: any) => void; } /** å­ä¼ çˆ¶äº‹ä»¶ */ const emits = defineEmits<{ (e: 'onRefresh'): void; (e: 'onReachBottom'): void; }>(); const systemInfo = useSystemInfo(); const instance = getCurrentInstance(); // è·å–ç»„ä»¶å®ä¾‹ /** çˆ¶ä¼ å­å‚æ•° */ const props = defineProps(); const { noMore, state, isEmpty } = toRefs(props); /** åˆ—è¡¨é«˜åº¦è®¡ç®— */ const scollViewHeight = ref(); const calculateScrollViewHeight = async () => { let scrollViewHeight = props?.height; try { if (!scrollViewHeight) { const topViewRes: any = await selectRect('#MMPullToRefreshTop', instance!); scrollViewHeight = systemInfo?.screenHeight - topViewRes?.top; } } catch (error) { console.warn(error); } scollViewHeight.value = props?.isTab && scrollViewHeight ? scrollViewHeight - systemInfo?.tabbarHeight : scrollViewHeight; }; onMounted(() => { calculateScrollViewHeight(); }); /** åŠ è½½æ›´å¤šstatus */ const status = computed<'loading' | 'nomore' | undefined>(() => { if (state?.value === MMPullToRefreshState.pushing) { return 'loading'; } else if (state.value !== MMPullToRefreshState.refreshing && noMore) { return 'nomore'; } return undefined; }); /** å¼€å¯è‡ªå®šä¹‰ä¸‹æ‹‰åˆ·æ–° */ // const refresherTriggered = computed(() => state?.value === MMPullToRefreshState.refreshing); const refresherTriggered = ref(false); /** åˆ·æ–°åˆ—è¡¨ */ const refresherrefresh = useLockFn(async () => { refresherTriggered.value = true; if (state.value === MMPullToRefreshState.none) { emits('onRefresh'); setTimeout(() => { refresherTriggered.value = false; }, 500); } }); const onScroll = (event: any) => { props.onScroll?.(event); }; /** ä¸‹æ‹‰æ›´å¤š */ const scrolltolower = () => { if (!noMore?.value) { emits('onReachBottom'); } }; &lt;view class=&quot;noMore&quot; v-if=&quot;!isEmpty &amp;&amp; (status !== 'nomore' || (status === 'nomore' &amp;&amp; !props.hiddeNoMoreText))&quot;&gt; &lt;TnLoadmore :status=&quot;status&quot; v-if=&quot;status&quot; color=&quot;#999&quot; loadingIconMode=&quot;flower&quot; /&gt; &lt;/view&gt; &lt;Gap :height=&quot;props?.footerSpace&quot; v-if=&quot;props?.footerSpace&quot; :styles=&quot;{ width: '100%' }&quot; /&gt; &lt;/scroll-view&gt; &lt;/view&gt; @import './index.scss'; ","link":"https://ihopefulchina.github.io/4PEcn6ZhYy/"},{"title":"è‡ªå®šä¹‰Hooks: useMutate(Vue3) - ç®€å•çš„è·å–æ•°æ®æ–¹æ³•çš„ä¸€ä¸ªå°è£…","content":"åœ¨ Vue 3 ä¸­ï¼Œç»„åˆå¼ APIï¼ˆComposition APIï¼‰ä¸ºæˆ‘ä»¬æä¾›äº†æ›´çµæ´»çš„æ–¹å¼æ¥ç»„ç»‡ä»£ç ã€‚ä»Šå¤©ï¼Œæˆ‘ä»¬å°†å®ç°ä¸€ä¸ªé€šç”¨çš„ useMutate Hookï¼Œç”¨äºå¤„ç†æ•°æ®è¯·æ±‚å¹¶æ›´æ–°ç»„ä»¶ä¸­çš„æ•°æ®çŠ¶æ€ã€‚è¿™ä¸ª Hook å°†å¸®åŠ©æˆ‘ä»¬å°è£…æ•°æ®è·å–ã€æ ¼å¼åŒ–ã€çŠ¶æ€ç®¡ç†ç­‰é€»è¾‘ï¼Œä»è€Œä½¿å¾—ç»„ä»¶æ›´ç®€æ´ä¸”æ˜“äºå¤ç”¨ã€‚ èƒŒæ™¯ åœ¨å‰ç«¯å¼€å‘ä¸­ï¼Œæ•°æ®çš„è¯·æ±‚å’Œå±•ç¤ºæ˜¯å¸¸è§çš„åŠŸèƒ½ã€‚ä¸ºäº†é¿å…åœ¨æ¯ä¸ªç»„ä»¶ä¸­é‡å¤ç›¸ä¼¼çš„ä»£ç ï¼Œæˆ‘ä»¬å¯ä»¥å°†æ•°æ®è¯·æ±‚çš„é€»è¾‘æŠ½è±¡æˆä¸€ä¸ªå¯å¤ç”¨çš„ Hookã€‚useMutate Hook çš„ç›®æ ‡å°±æ˜¯å°è£…æ•°æ®è¯·æ±‚ã€å¤„ç†æ— æ•°æ®çŠ¶æ€å’Œæ ¼å¼åŒ–æ•°æ®çš„é€»è¾‘ï¼Œå¸®åŠ©æˆ‘ä»¬ç®€åŒ–ä»£ç å¹¶æé«˜å¼€å‘æ•ˆç‡ã€‚ éœ€æ±‚åˆ†æ æˆ‘ä»¬éœ€è¦å®ç°ä»¥ä¸‹åŠŸèƒ½ï¼š 1. æ•°æ®è¯·æ±‚ï¼š å‘æœåŠ¡å™¨è¯·æ±‚æ•°æ®ã€‚ 2. æ•°æ®æ ¼å¼åŒ–ï¼š æ”¯æŒè‡ªå®šä¹‰çš„æ•°æ®æ ¼å¼åŒ–å‡½æ•°ã€‚ 3. è¯·æ±‚æˆåŠŸå›è°ƒï¼š è¯·æ±‚æˆåŠŸåè§¦å‘å›è°ƒï¼Œæ–¹ä¾¿åç»­æ“ä½œã€‚ 4. æ— æ•°æ®çŠ¶æ€ç®¡ç†ï¼š åˆ¤æ–­è¿”å›æ•°æ®æ˜¯å¦ä¸ºç©ºï¼Œå¹¶æ›´æ–° noData çŠ¶æ€ã€‚ ä»£ç å®ç° ä¸‹é¢æ˜¯æˆ‘ä»¬å®ç°çš„ useMutate Hookï¼š import { onMounted, ref } from 'vue'; import { useLockFn } from './useLockFn'; interface IMutateOption&lt;T&gt; { /** é»˜è®¤æ•°æ® */ defaultData?: T; /** é¢å¤–ä¼ é€’å‚æ•° */ params?: Record&lt;string, any&gt;; /** åˆå§‹æ˜¯å¦å‘å‡ºè¯·æ±‚ */ initRequest?: boolean; /** è·å–æ•°æ® */ getData: (data: Record&lt;string, any&gt;) =&gt; Promise&lt;{ data?: T }&gt;; /** æ•°æ®æ ¼å¼åŒ– */ dataFormat?(data?: T): any; /** è¯·æ±‚æˆåŠŸåçš„å›è°ƒ */ successCallback?(data?: T): void; } export function useMutate&lt;T&gt;(config: IMutateOption&lt;T&gt;) { const { defaultData, params, initRequest = true } = config; const detail = ref&lt;T | undefined&gt;(defaultData); const noData = ref&lt;boolean&gt;(); const isInit = ref(initRequest); const mutate = useLockFn(async () =&gt; { try { const { data } = await config.getData({ ...params }); const newData = config.dataFormat ? config.dataFormat(data) : data; detail.value = newData; config?.successCallback?.(newData); /**æš‚æ— æ•°æ® */ let blo = false; if (newData !== undefined) { if (newData instanceof Array) { blo = newData.length === 0; } else if (newData instanceof Object) { blo = Object.keys(newData).length === 0; } } else { blo = true; } noData.value = blo; } catch (error) { console.log(error); noData.value = true; } }, 500); onMounted(() =&gt; { if (!isInit.value) { isInit.value = true; } else { mutate(); } }); return { mutate, detail, noData }; } ä½¿ç”¨ç¤ºä¾‹ const { detail, mutate, noData } = useMutate({ getData: () =&gt; api['/wechat/api/outWorkOrder/express/{id}_GET'](1), }); ","link":"https://ihopefulchina.github.io/aJA508HwI4/"},{"title":"è‡ªå®šä¹‰Hooks: useProTableRequest â€”â€” Ant Design Pro Table è¯·æ±‚å°è£…","content":"åœ¨å¼€å‘ä¸­ï¼Œæˆ‘ä»¬å¸¸å¸¸éœ€è¦å¤„ç†è¡¨æ ¼æ•°æ®çš„è¯·æ±‚ã€ç¼“å­˜ã€å¯¼å‡ºç­‰åŠŸèƒ½ã€‚ä¸ºäº†æé«˜ä»£ç çš„å¤ç”¨æ€§å’Œç®€æ´æ€§ï¼Œæˆ‘ä»¬å¯ä»¥å°†è¿™äº›é€»è¾‘å°è£…åˆ°ä¸€ä¸ªè‡ªå®šä¹‰ Hook ä¸­ã€‚æœ¬æ–‡å°†ä»‹ç»ä¸€ä¸ªåŸºäº Ant Design Pro Table çš„è¡¨æ ¼è¯·æ±‚å°è£… Hook â€”â€” useProTableRequestï¼Œå¹¶æ·±å…¥è®²è§£å…¶å·¥ä½œåŸç†å’Œå¦‚ä½•åœ¨é¡¹ç›®ä¸­ä½¿ç”¨ã€‚ åŠŸèƒ½æ¦‚è¿° useProTableRequest æ˜¯ä¸€ä¸ªç”¨äºå¤„ç†è¡¨æ ¼æ•°æ®è¯·æ±‚çš„è‡ªå®šä¹‰ Hookï¼Œä¸»è¦åŒ…æ‹¬ä»¥ä¸‹åŠŸèƒ½ï¼š â€¢ æ•°æ®è¯·æ±‚ï¼šä»æœåŠ¡å™¨è·å–æ•°æ®ï¼Œå¹¶æ”¯æŒåˆ†é¡µã€æ’åºå’Œç­›é€‰åŠŸèƒ½ã€‚ â€¢ æ•°æ®ç¼“å­˜ï¼šç¼“å­˜è¯·æ±‚çš„å‚æ•°å’Œæ•°æ®ï¼Œæ–¹ä¾¿åœ¨ç”¨æˆ·è¿”å›è¯¥é¡µé¢æ—¶æ¢å¤è¡¨æ ¼çŠ¶æ€ï¼ˆå¦‚åˆ†é¡µã€ç­›é€‰ç­‰ï¼‰ã€‚ â€¢ å‚æ•°æ ¼å¼åŒ–ï¼šå¯ä»¥è‡ªå®šä¹‰æ ¼å¼åŒ–è¯·æ±‚å‚æ•°å’Œè¿”å›çš„æ•°æ® ä»£ç code import { ActionType, ProFormInstance, RequestData } from '@ant-design/pro-components' import { SortOrder } from 'antd/lib/table/interface' import React, { useCallback, useEffect, useLayoutEffect, useRef } from 'react' type Params&lt;U&gt; = U &amp; { pageSize?: number current?: number keyword?: string } type Sort = Record&lt;string, SortOrder&gt; type Filter = Record&lt;string, React.ReactText[] | null&gt; type Fn&lt;U, T&gt; = ( params: any, sort: Sort, filter: Filter ) =&gt; Promise&lt;{ code?: number; msg?: string; data?: { list?: T[]; total?: number } }&gt; export interface IUseProTableRequestOption&lt;T, U = T&gt; { /** éœ€è¦ç¼“å­˜çš„ç›®æ ‡é“¾æ¥åœ°å€ * ç›®çš„: ç¼“å­˜åˆ—è¡¨é¡µçš„è¯·æ±‚å‚æ•°ï¼Œä¾‹å¦‚åˆ†é¡µã€æ’åºã€æœç´¢ç­‰å‚æ•°ï¼Œæ–¹ä¾¿è¯¦æƒ…å›åˆ—è¡¨é¡µæ—¶è‡ªåŠ¨æ¢å¤ * @example [routeNames.userManagementUserListUserDetail] */ cacheUrls?: string[] /** * æ ¼å¼åŒ–æ•°æ® * ä½ å¯ä»¥å¯¹è¿”å›çš„æ•°æ®åšä¸€äº›å¤„ç† */ dataFormat?: (data: T[]) =&gt; U[] /** * æ ¼å¼åŒ–å‚æ•° * * å‰ç½®å¤„ç†è¯·æ±‚å‚æ•°ã€‚å¦‚æœä½ éœ€è¦ä¼ é€’ç»™å¯¼å‡ºæ—¶ã€‚è¿™ä¼šå¾ˆæœ‰ç”¨ * @param params å°†è¦ä¼ é€’ç»™æ¥å£çš„å‚æ•° */ paramsFormat?(params: any): any } /** * antd pro tableè¯·æ±‚å°è£…é’©å­ * @param fn * @param option * @returns */ export default function useProTableRequest&lt;T, U extends Record&lt;string, any&gt; = {}&gt;( fn: Fn&lt;U, T&gt;, option: IUseProTableRequestOption&lt;T&gt; = {} ) { const { dataFormat, cacheUrls } = option // Table action çš„å¼•ç”¨ï¼Œä¾¿äºè‡ªå®šä¹‰è§¦å‘ const actionRef = useRef&lt;ActionType&gt;() const formRef = useRef&lt;ProFormInstance&gt;() // ç¼“å­˜è¯·æ±‚å‚æ•° const requestParams = useRef&lt;Record&lt;string, any&gt;&gt;({}) // æ•°æ®ç¼“å­˜å‚æ•° const dataSourceRef = useRef&lt;T[]&gt;([]) /** ç¼“å­˜å‚æ•° */ const _cacheData = useRef&lt;any&gt;(undefined) /** ç¼“å­˜key */ const cacheKey = genCacheKey() /** å½“å‰æ˜¯å¦éœ€è¦ç¼“å­˜ */ const needCache = !!cacheUrls?.length // è¡¨æ ¼è¯·æ±‚ const tableRequst = useCallback(async (params: Params&lt;U&gt;, sort: Sort, filter: Filter) =&gt; { const { current, ...rest } = params as Record&lt;string, any&gt; const newParams: any = { ...rest, pageNum: current ?? params?.pageNum ?? 1 } // é‡ç½®æ•°æ® let total = 0 let data: T[] = [] requestParams.current = option.paramsFormat ? option.paramsFormat(newParams) : newParams try { // å‚æ•°é•¿åº¦è¿‡é•¿ä¸å¤„ç† if (JSON.stringify(requestParams.current).length &lt; 1000) { const res = await fn(requestParams.current, sort, filter) // å¦‚æœå½“å‰åˆ—è¡¨ä¸ºç©ºå¹¶ä¸”pageNumä¸ä¸º1.åˆ™é‡æ–°å‘èµ·è¯·æ±‚ if (!res.data?.list?.length &amp;&amp; requestParams.current.pageNum !== 1) { setTimeout(() =&gt; { actionRef.current?.reload(true) }) } const { list = [] as T[] } = res.data || {} total = res.data?.total || 0 data = dataFormat ? dataFormat(list) : list // ç¼“å­˜æ•°æ® _cacheData.current = { ...requestParams.current } dataSourceRef.current = data } } catch (error) {} // } return { data, success: true, total } as Partial&lt;RequestData&lt;T&gt;&gt; }, []) /** æ¢å¤ç¼“å­˜ */ const restoreCache = () =&gt; { if (needCache) { const cacheString = window.sessionStorage.getItem(cacheKey) if (cacheString) { try { const cacheParams = JSON.parse(cacheString) /** æ¢å¤è¯·æ±‚å‚æ•° */ _cacheData.current = cacheParams /** æ¢å¤æœç´¢è¡¨å• */ formRef.current?.setFieldsValue(cacheParams) /** æ¢å¤åˆ†é¡µä¿¡æ¯ */ actionRef.current?.setPageInfo?.({ current: cacheParams?.current ?? cacheParams?.pageNum ?? 1, pageSize: cacheParams?.pageSize }) } catch (error) { } finally { window.sessionStorage.removeItem(cacheKey) // æ¸…é™¤ç¼“å­˜æ•°æ® } } } } useLayoutEffect(() =&gt; { restoreCache() }, []) /** * è¡¨æ ¼æ•°æ®ç¼“å­˜å¤„ç† */ useEffect(() =&gt; { return () =&gt; { if (!needCache) { return } // ç»„ä»¶å¸è½½æ—¶å°†æ•°æ®ç¼“å­˜è‡³sessionStorage const to = pick(window.location, ['hash', 'href', 'protocol', 'port', 'search', 'pathname', 'hostname']) const toCache = cacheUrls?.some((url) =&gt; to?.href?.includes(url)) if (toCache) { window.sessionStorage.setItem(cacheKey, JSON.stringify(_cacheData.current)) } } }, []) return { formRef, actionRef, /** * è¡¨æ ¼è¯·æ±‚ */ request: tableRequst, /** * è¡¨æ ¼queryå‚æ•° */ params: requestParams, /** * è¡¨æ ¼æ•°æ®ç¼“å­˜ */ dataSource: dataSourceRef } } /** * ä»å¯¹è±¡ä¸­é€‰æ‹©æŒ‡å®šçš„å±æ€§ * @param obj * @param keys * @returns */ function pick&lt;T extends Object, K extends keyof T&gt;(obj: T, keys: K[]): Pick&lt;T, K&gt; { const result = {} as Pick&lt;T, K&gt; keys.forEach((key) =&gt; { if (key in obj) { result[key] = obj[key] } }) return result } /** * ç”Ÿæˆç¼“å­˜é”®å€¼ * @param key key * @returns */ function genCacheKey(key?: string | ((ok: string) =&gt; string)) { const hostKey = encodeURIComponent(window.location.href.replace(/http(s)?:\\/\\//, '')) if (typeof key === 'function') { return key(hostKey) } return key || hostKey } ç®€å•å®ä¾‹ const { request, actionRef, formRef } = useProTableRequest(api['/admin/mall/banner/queryList_GET']) ","link":"https://ihopefulchina.github.io/vrE64S-kvU/"},{"title":"æ’ä»¶: è‡ªåŠ¨ç”Ÿæˆ Vue 3 é¡¹ç›®ä¸­çš„è·¯ç”±é…ç½®","content":"åœ¨å¼€å‘å¤§å‹åº”ç”¨æ—¶ï¼Œæ‰‹åŠ¨ç®¡ç†è·¯ç”±é…ç½®æ–‡ä»¶å¯èƒ½ä¼šéå¸¸ç¹çä¸”å®¹æ˜“å‡ºé”™ã€‚ç‰¹åˆ«æ˜¯åœ¨å¤šé¡µé¢åº”ç”¨æˆ–ä½¿ç”¨åˆ†åŒ…çš„é¡¹ç›®ä¸­ï¼Œé¡µé¢å’Œè·¯ç”±è·¯å¾„å¯èƒ½ä¼šä¸æ–­å¢åŠ æˆ–å˜åŒ–ã€‚å¦‚æœæ¯æ¬¡éƒ½æ‰‹åŠ¨æ›´æ–°è·¯ç”±é…ç½®æ–‡ä»¶ï¼Œå¼€å‘æ•ˆç‡å°†ä¼šå¤§å¤§é™ä½ã€‚ æˆ‘å†™äº†ä¸€ä¸ªå¦‚ä½•é€šè¿‡è‡ªåŠ¨åŒ–è„šæœ¬ç”Ÿæˆ Vue 3 é¡¹ç›®çš„è·¯ç”±é…ç½®æ–‡ä»¶ã€‚å…·ä½“æ¥è¯´ï¼Œå°†æ ¹æ® pages.json æ–‡ä»¶åŠ¨æ€ç”Ÿæˆè·¯ç”±æ˜ å°„ï¼Œå¹¶ä¸”æ”¯æŒåˆ†åŒ…å’Œ tabBar é…ç½®ã€‚ èƒŒæ™¯ åœ¨æŸäº›å°ç¨‹åºæ¡†æ¶ï¼ˆå¦‚ Taro æˆ– WeChat å°ç¨‹åºï¼‰ä¸­ï¼Œè·¯ç”±é…ç½®æ˜¯é€šè¿‡ pages.json æ–‡ä»¶æ¥ç»´æŠ¤çš„ã€‚è¿™ä¸ªæ–‡ä»¶å®šä¹‰äº†é¡µé¢çš„è·¯å¾„ã€tabBar é…ç½®ã€åˆ†åŒ…ç­‰ä¿¡æ¯ã€‚ä¸ºäº†æé«˜å¼€å‘æ•ˆç‡ï¼Œæˆ‘ä»¬å¸Œæœ›èƒ½å¤Ÿè‡ªåŠ¨ä» pages.json æ–‡ä»¶ä¸­è¯»å–è¿™äº›ä¿¡æ¯ï¼Œå¹¶ç”Ÿæˆå¯¹åº”çš„è·¯ç”±é…ç½®æ–‡ä»¶ï¼Œè€Œä¸éœ€è¦æ‰‹åŠ¨å»ç¼–å†™ã€‚ å®ç°æ€è·¯ æˆ‘ä»¬å¯ä»¥ç¼–å†™ä¸€ä¸ª Node.js è„šæœ¬ï¼Œå®ƒä¼šï¼š 1. è¯»å– pages.json æ–‡ä»¶ã€‚ 2. æå–ä¸»åŒ…å’Œåˆ†åŒ…çš„é¡µé¢è·¯ç”±ä¿¡æ¯ã€‚ 3. ç”Ÿæˆç¬¦åˆ Vue 3 é¡¹ç›®è·¯ç”±è¦æ±‚çš„é…ç½®ã€‚ 4. è‡ªåŠ¨ç”Ÿæˆä¸€ä¸ª TypeScript æ–‡ä»¶æ¥ä¿å­˜è·¯ç”±æ˜ å°„ã€‚ ä»£ç å®ç° æˆ‘ä»¬é€šè¿‡ä»¥ä¸‹è„šæœ¬å®ç°è‡ªåŠ¨ç”Ÿæˆè·¯ç”±é…ç½®çš„åŠŸèƒ½ï¼š /* eslint-disable id-length */ /* eslint-disable @typescript-eslint/no-var-requires */ const fs = require('fs'); const pagesJson = require('../src/pages.json'); const tabBar = (pagesJson?.tabBar ?? [])?.list.map((item) =&gt; ({ url: `/${item.pagePath}` })); const mainPages = pagesJson?.pages?.map((it) =&gt; ({ name: it.name || '', path: it.path })); const subPackages = []; /** è·å–åˆ†åŒ…çš„è·¯ç”± */ pagesJson?.subPackages ?.map((it) =&gt; { if (it.pages) { return it.pages.map((vl) =&gt; ({ name: vl.name || '', path: it.root + '/' + vl.path })); } }) ?.map((it) =&gt; { if (it) { subPackages.push(...it); } }); const pages = [...mainPages, ...subPackages]; // æ‰€æœ‰è·¯ç”± const tab = ' '; let str = ` /** * é¡µé¢è·¯ç”±æ˜ å°„. * è¯·ä¸è¦åœ¨æ­¤æ–‡ä»¶æ·»åŠ ä»»ä½•ä»£ç ã€‚å› ä¸ºç”Ÿæˆåä¼šå…¨é‡è¦†ç›– * è¿è¡Œ npm run route æˆ–è€… yarn route è‡ªåŠ¨ç”Ÿæˆ */ export const routeNames = {\\n`; str += pages .map(({ name, path }, index) =&gt; { const key = path.replace(/^\\//, '').replace(/\\/([a-zA-Z0-9])/g, (_m, p) =&gt; p.toUpperCase()); return `${tab}${tab}/** ${name} */\\n${tab}${tab}${key}: '/${path}'${index !== pages.length - 1 ? ',' : ''}`; }) .join('\\n'); str += '\\n};\\n\\n'; if (tabBar.length) { str += 'export const tabbar = ' + JSON.stringify(tabBar, undefined, 4) .replace(/&quot;(.+)&quot;:/g, '$1:') .replace(/: &quot;(.+)&quot;/g, &quot;:'$1'&quot;); str += ';\\n\\n'; } fs.writeFile('./src/routes.ts', str, (error) =&gt; { // åˆ›å»ºå¤±è´¥ if (error) { console.log(`ç”Ÿæˆå¤±è´¥âŒï¼š${error}`); } // åˆ›å»ºæˆåŠŸ console.log('ğŸ‰ğŸ‰ğŸ‰ğŸ‰è·¯ç”±ç”Ÿæˆâœ…'); }); å¦‚ä½•ä½¿ç”¨ å°†ä¸Šè¿°è„šæœ¬æ–‡ä»¶ä¿å­˜ä¸º generate-routes.jsï¼Œå¹¶æ”¾ç½®åœ¨é¡¹ç›®çš„æ ¹ç›®å½•ä¸­ã€‚ åœ¨ package.json ä¸­æ·»åŠ ä¸€ä¸ªè„šæœ¬å‘½ä»¤æ¥æ‰§è¡Œè¿™ä¸ªè„šæœ¬ï¼š &quot;scripts&quot;: { &quot;route&quot;: &quot;node generate-routes.js&quot; } è¿è¡Œå‘½ä»¤ç”Ÿæˆè·¯ç”±é…ç½®ï¼š npm run route æ€»ç»“ é€šè¿‡è¿™ä¸ªè‡ªåŠ¨åŒ–è„šæœ¬ï¼Œæˆ‘ä»¬èƒ½å¤Ÿè½»æ¾åœ°æ ¹æ® pages.json æ–‡ä»¶ç”Ÿæˆé¡¹ç›®ä¸­çš„è·¯ç”±é…ç½®ã€‚è¿™å¤§å¤§æé«˜äº†å¼€å‘æ•ˆç‡ï¼Œé¿å…äº†æ‰‹åŠ¨ç»´æŠ¤è·¯ç”±çš„ç¹çå·¥ä½œã€‚æ¯å½“ pages.json æ–‡ä»¶æ›´æ–°æ—¶ï¼Œæˆ‘ä»¬åªéœ€é‡æ–°è¿è¡Œè„šæœ¬ï¼Œè·¯ç”±é…ç½®å°±ä¼šè‡ªåŠ¨æ›´æ–°ã€‚ ","link":"https://ihopefulchina.github.io/ZxMrztTo35/"},{"title":"ğŸ™‹ğŸ™‹ğŸ™‹AvatarCropper: å¤´åƒè£å‰ªç»„ä»¶","content":"åœ¨è¿™ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬å°†æ·±å…¥æ¢è®¨å¦‚ä½•å®ç°ä¸€ä¸ªå¤´åƒè£å‰ªç»„ä»¶ (AvatarCropper)ï¼Œå®ƒä¸ä»…å¯ä»¥è£å‰ªå›¾ç‰‡ï¼Œè¿˜èƒ½å¤„ç†ç¼©æ”¾ã€æ—‹è½¬ç­‰æ“ä½œã€‚è¯¥ç»„ä»¶åŸºäº Taro æ¡†æ¶æ„å»ºï¼Œå¯ä»¥åœ¨å¤šç§ç¯å¢ƒä¸­è¿è¡Œï¼ˆå¦‚å¾®ä¿¡ã€æ”¯ä»˜å®å°ç¨‹åºå’ŒWebï¼‰ã€‚æˆ‘ä»¬å°†åˆ†æå…¶æ ¸å¿ƒåŠŸèƒ½ï¼Œç»“æ„ï¼Œä»¥åŠå¦‚ä½•ä½¿ç”¨å®ƒã€‚ ç»„ä»¶æ¦‚è¿° AvatarCropper æ˜¯ä¸€ä¸ªç”¨æˆ·è‡ªå®šä¹‰çš„å¤´åƒè£å‰ªå·¥å…·ï¼Œå…è®¸ç”¨æˆ·é€‰æ‹©å›¾ç‰‡è¿›è¡Œè£å‰ªï¼Œæ”¯æŒç¼©æ”¾ã€æ—‹è½¬ã€æ‹–åŠ¨ç­‰æ“ä½œã€‚ç»„ä»¶çš„åŠŸèƒ½åŒ…æ‹¬ï¼š â€¢ é€‰æ‹©å›¾ç‰‡è¿›è¡Œè£å‰ªã€‚ â€¢ æ”¯æŒç¼©æ”¾å’Œæ—‹è½¬å›¾åƒã€‚ â€¢ åœ¨ç”»å¸ƒä¸Šå®æ—¶æ˜¾ç¤ºè£å‰ªæ•ˆæœã€‚ â€¢ è£å‰ªå®Œæˆåï¼Œå¯ä»¥è¿”å›è£å‰ªåçš„å›¾ç‰‡æˆ–æ–‡ä»¶è·¯å¾„ã€‚ ç»„ä»¶å±æ€§è§£æ AvatarCropper çš„ä¸€äº›å¸¸è§å±æ€§ï¼š â€¢ maxZoomï¼šæœ€å¤§ç¼©æ”¾å€æ•°ï¼Œæ§åˆ¶è£å‰ªåŒºåŸŸçš„æœ€å¤§ç¼©æ”¾ç¨‹åº¦ã€‚ â€¢ spaceï¼šè£å‰ªæ¡†ä¸ç”»å¸ƒè¾¹ç¼˜çš„ç©ºéš™ï¼Œé¿å…è£å‰ªæ¡†è¢«ç”»å¸ƒè¾¹ç•Œé™åˆ¶ã€‚ â€¢ toolbarï¼šè£å‰ªå·¥å…·æ çš„å†…å®¹ï¼Œå¯ä»¥è‡ªå®šä¹‰æ˜¾ç¤ºçš„æŒ‰é’®ã€‚ â€¢ toolbarPositionï¼šå·¥å…·æ çš„ä½ç½®ï¼Œæ”¯æŒ top æˆ– bottomã€‚ â€¢ editTextï¼šæ˜¾ç¤ºåœ¨è£å‰ªå·¥å…·æ çš„ç¼–è¾‘æ–‡å­—ã€‚ â€¢ sizeType å’Œ sourceTypeï¼šå…è®¸é€‰æ‹©å›¾ç‰‡çš„ç±»å‹å’Œæ¥æºã€‚ â€¢ shapeï¼šè£å‰ªæ¡†çš„å½¢çŠ¶ï¼Œæ”¯æŒ square æˆ– roundã€‚ â€¢ onConfirmï¼šè£å‰ªå®Œæˆåçš„å›è°ƒå‡½æ•°ï¼Œä¼ é€’è£å‰ªåçš„å›¾ç‰‡è·¯å¾„ã€‚ â€¢ onCancelï¼šå–æ¶ˆè£å‰ªçš„å›è°ƒå‡½æ•°ã€‚ ä»£ç  index.less code .avatar-cropper { position: relative; display: flex; &amp;-edit-text { position: absolute; top: 0; left: 0; width: 100%; height: 100%; background-color: #000; z-index: 1; color: #fff; display: flex; justify-content: center; align-items: center; } &amp;-input { position: absolute; top: 0; left: 0; width: 100%; height: 100%; opacity: 0; // éšè—åŸç”Ÿä¸Šä¼ æŒ‰é’® cursor: pointer; z-index: 2; } &amp;-popup { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: #000; z-index: 1000; &amp;-canvas, &amp;-cut-canvas { position: absolute; bottom: 0; left: 0; width: 100%; height: 100%; z-index: 1; } &amp;-cut-canvas { z-index: 0; } &amp;-toolbar { position: absolute; bottom: 30px; left: 0; width: 100%; z-index: 2; &amp;.top { top: 0; bottom: inherit; } &amp;-flex { width: 100%; display: flex; justify-content: space-between; } &amp;-item { // flex: 1; color: #fff; padding: 10px 30px; cursor: pointer; display: flex; align-items: center; } } &amp;-highlight { position: absolute; left: 0; top: 0; width: 100%; height: 100%; z-index: 1; background-color: transparent; .highlight { position: absolute; left: 50%; top: 50%; transform: translate(-50%, -50%); background-color: transparent; // box-shadow: 0 0 1000px 1000px rgba(0, 0, 0, 0.6); } } } &amp;.round { .nut-avatar-cropper-edit-text { border-radius: 50%; } } } [dir='rtl'] .avatar-cropper, .nut-rtl .avatar-cropper { &amp;-edit-text { left: auto; right: 0; } &amp;-input { left: auto; right: 0; } &amp;-popup { left: auto; right: 0; &amp;-canvas, &amp;-cut-canvas { left: auto; right: 0; } &amp;-toolbar { left: auto; right: 0; } &amp;-highlight { left: auto; right: 0; .highlight { left: auto; right: 50%; transform: translate(50%, -50%); } } } } .canvans-btn { font-size: 13px; color: #fff; font-weight: 400; display: flex; justify-content: center; align-items: center; cursor: pointer; } index.tsx code import { AvatarCropper } from './avatarcropper' export type { AvatarCropperProps, AvatarCropperToolbarPosition, AvatarCropperSizeType, AvatarCropperSourceType, AvatarCropperShape } from './avatarcropper' export default AvatarCropper type.ts code import type { CSSProperties, ReactNode } from 'react' export interface BasicComponent { className?: string style?: CSSProperties children?: ReactNode id?: string } export const ComponentDefaults = { className: '', style: {} } use-touch.ts code import React, { useRef } from 'react' const MIN_DISTANCE = 10 type Direction = '' | 'vertical' | 'horizontal' function getDirection(x: number, y: number) { if (x &gt; y &amp;&amp; x &gt; MIN_DISTANCE) { return 'horizontal' } if (y &gt; x &amp;&amp; y &gt; MIN_DISTANCE) { return 'vertical' } return '' } export function useTouch() { const startX = useRef(0) const startY = useRef(0) const deltaX = useRef(0) const deltaY = useRef(0) const delta = useRef(0) const offsetX = useRef(0) const offsetY = useRef(0) const direction = useRef&lt;Direction&gt;('') const last = useRef(false) const velocity = useRef(0) const touchTime = useRef&lt;number&gt;(Date.now()) const isVertical = () =&gt; direction.current === 'vertical' const isHorizontal = () =&gt; direction.current === 'horizontal' const reset = () =&gt; { touchTime.current = Date.now() deltaX.current = 0 deltaY.current = 0 offsetX.current = 0 offsetY.current = 0 delta.current = 0 direction.current = '' last.current = false } const start = (event: React.TouchEvent&lt;HTMLElement&gt;) =&gt; { reset() touchTime.current = Date.now() startX.current = event.touches[0].clientX startY.current = event.touches[0].clientY } const move = (event: React.TouchEvent&lt;HTMLElement&gt;) =&gt; { const touch = event.touches[0] // Fix: Safari back will set clientX to negative number deltaX.current = touch.clientX &lt; 0 ? 0 : touch.clientX - startX.current deltaY.current = touch.clientY - startY.current offsetX.current = Math.abs(deltaX.current) offsetY.current = Math.abs(deltaY.current) delta.current = isVertical() ? deltaY.current : deltaX.current if (!direction.current) { direction.current = getDirection(offsetX.current, offsetY.current) } } const end = (event: React.TouchEvent&lt;HTMLElement&gt;) =&gt; { last.current = true velocity.current = Math.sqrt(deltaX.current ** 2 + deltaY.current ** 2) / (Date.now() - touchTime.current) } return { end, move, start, reset, touchTime, startX, startY, deltaX, deltaY, delta, offsetX, offsetY, direction, isVertical, isHorizontal, last } } utils.ts code export const isObject = (val: unknown): val is Record&lt;any, any&gt; =&gt; val !== null &amp;&amp; typeof val === 'object' // eslint-disable-next-line @typescript-eslint/ban-types export const isFunction = (val: unknown): val is Function =&gt; typeof val === 'function' export const isPromise = &lt;T = any&gt;(val: unknown): val is Promise&lt;T&gt; =&gt; { return isObject(val) &amp;&amp; isFunction(val.then) &amp;&amp; isFunction(val.catch) } export const upperCaseFirst = (str: string) =&gt; { str = str.toLowerCase() str = str.replace(/\\b\\w+\\b/g, (word) =&gt; word.substring(0, 1).toUpperCase() + word.substring(1)) return str } export const clamp = (num: number, min: number, max: number): number =&gt; Math.min(Math.max(num, min), max) export function preventDefault(event: React.TouchEvent&lt;HTMLElement&gt; | TouchEvent, isStopPropagation?: boolean) { if (typeof event.cancelable !== 'boolean' || event.cancelable) { event.preventDefault() } if (isStopPropagation) { event.stopPropagation() } } ç®€å•å®ä¾‹ &lt;AvatarCropper shape=&quot;round&quot; onConfirm={cutImage}&gt; &lt;View className={styles.headImgCenter}&gt; {!!headImg &amp;&amp; &lt;Image className={styles.headImg} src={headImg ?? ''} mode=&quot;aspectFill&quot; /&gt;} &lt;/View&gt; &lt;/AvatarCropper&gt; TODO ç›¸å…³æ ¸å¿ƒé€»è¾‘ ","link":"https://ihopefulchina.github.io/7dtD7wCIDd/"},{"title":"è‡ªå®šä¹‰Hooks: useRouterParams(Web) - è·å– URL ä¸­çš„æŸ¥è¯¢å‚æ•°","content":"åœ¨ React ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸éœ€è¦è·å–å’Œå¤„ç† URL ä¸­çš„æŸ¥è¯¢å‚æ•°ã€‚ç‰¹åˆ«æ˜¯åœ¨å•é¡µåº”ç”¨ï¼ˆSPAï¼‰ä¸­ï¼Œè·¯ç”±å‚æ•°çš„ç®¡ç†å’Œè½¬æ¢éå¸¸å¸¸è§ã€‚ä¸ºäº†æé«˜ä»£ç çš„å¤ç”¨æ€§å’Œå¯ç»´æŠ¤æ€§ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ React çš„ Hook æ¥å°è£…è¿™ç±»é€»è¾‘ï¼Œç¡®ä¿ä»£ç ç®€æ´ã€æ˜“äºç»´æŠ¤ã€‚é€šè¿‡å®ç°ä¸€ä¸ªè‡ªå®šä¹‰çš„ useRouterParams Hook æ¥æ¼”ç¤ºå¦‚ä½•è·å– URL ä¸­çš„æŸ¥è¯¢å‚æ•°ï¼Œå¹¶æ ¹æ®éœ€æ±‚è¿›è¡Œè§£æå’Œè½¬æ¢ã€‚ èƒŒæ™¯ åœ¨å‰ç«¯å¼€å‘ä¸­ï¼Œè·¯ç”±æŸ¥è¯¢å‚æ•°ï¼ˆQuery Parametersï¼‰æ˜¯éå¸¸å¸¸è§çš„ã€‚ä¾‹å¦‚ï¼Œåœ¨ä¸€ä¸ªç”µå•†å¹³å°ä¸­ï¼Œå¯èƒ½ä¼šé€šè¿‡ URL çš„æŸ¥è¯¢å‚æ•°æ¥ä¼ é€’è¿‡æ»¤æ¡ä»¶ï¼ˆå¦‚ç±»åˆ«ã€ä»·æ ¼åŒºé—´ç­‰ï¼‰ã€‚å¯¹äºå¤šé¡µé¢åº”ç”¨ï¼ˆMPAï¼‰æˆ–å•é¡µé¢åº”ç”¨ï¼ˆSPAï¼‰ï¼Œè·å–å’Œå¤„ç†è¿™äº›å‚æ•°æ˜¯å¿…ä¸å¯å°‘çš„æ“ä½œã€‚ React å®˜æ–¹æä¾›çš„ useLocation å’Œ useHistory é’©å­å¯ä»¥å¸®åŠ©æˆ‘ä»¬è®¿é—®è·¯ç”±ï¼Œä½†å®ƒä»¬é»˜è®¤åªè¿”å›å®Œæ•´çš„ URL ä¿¡æ¯ï¼Œæ²¡æœ‰ç›´æ¥æä¾›å¯¹æŸ¥è¯¢å‚æ•°çš„å¤„ç†ã€‚å› æ­¤ï¼Œæˆ‘ä»¬éœ€è¦ç¼–å†™ä¸€ä¸ªè‡ªå®šä¹‰ Hook æ¥ç®€åŒ–è¿™ä¸ªè¿‡ç¨‹ã€‚ å®ç°æ€è·¯ æˆ‘ä»¬å¸Œæœ›åˆ›å»ºä¸€ä¸ª useRouterParams çš„ Hookï¼Œå®ƒå…·æœ‰ä»¥ä¸‹åŠŸèƒ½ï¼š â€¢ è·å–å½“å‰é¡µé¢çš„æŸ¥è¯¢å‚æ•°ã€‚ â€¢ å¯ä»¥é€‰æ‹©å¯¹æŸ¥è¯¢å‚æ•°è¿›è¡Œè½¬æ¢ï¼ˆä¾‹å¦‚ï¼Œè½¬æ¢ä¸ºæ•°å€¼ç±»å‹æˆ–æšä¸¾ç±»å‹ï¼‰ã€‚ â€¢ æä¾›ä¸€ç§ç®€ä¾¿çš„æ–¹å¼æ¥è®¿é—®å’Œç®¡ç†æŸ¥è¯¢å‚æ•°ã€‚ ä»£ç å®ç° ä¸‹é¢æ˜¯ useRouterParams Hook çš„å®ç°ä»£ç ï¼š import { useMemo } from 'react' export type DefaultParams = Partial&lt;Record&lt;string, string&gt;&gt; /** * è·å–è·¯ç”±å‚æ•°ã€‚ * è¿™ä¸ªé’©å­å…è®¸å¼€å‘è€…ç±»å‹åŒ–è·¯ç”±å‚æ•°ï¼Œå¹¶å¯é€‰åœ°æä¾›ä¸€ä¸ªè§£æå‡½æ•°æ¥å¤„ç†å‚æ•°ã€‚ * * @param option.parseFn è§£æå‡½æ•°ã€‚é»˜è®¤è·¯ç”±å‚æ•°éƒ½æ˜¯stringç±»å‹ã€‚æœ‰äº›æ—¶å€™ä½ éœ€è¦è½¬æ¢æˆå…¶ä»–ç±»å‹(æ•°å€¼/æšä¸¾)ç­‰ã€‚ä½ å¯ä»¥é€šè¿‡ä¼ é€’è¿™ä¸ªå‚æ•°æ¥å¤„ç†å‚æ•°ã€‚ * */ export function useRouterParams&lt;T = DefaultParams&gt;( option: { transform?: (data: T) =&gt; T } = {} ) { const url = new URL(window.location.href) const params = getQueryParams(url?.href) as T const _param = useMemo(() =&gt; { // è®¡ç®—key let cparam: T = params as T try { if (option.transform) cparam = option.transform(cparam) } catch (event) { // eslint-disable-next-line no-console console.error('parseFn æ‰§è¡Œå¤±è´¥:', event) } return { ...params, ...cparam } as T }, [params]) return [_param as T] as const } // æ­£åˆ™è¡¨è¾¾å¼æå–æŸ¥è¯¢å­—ç¬¦ä¸² function getQueryParams(url: string): Record&lt;string, string&gt; { const queryString = url.split('?')[1] || '' const params: Record&lt;string, string&gt; = {} // åŒ¹é…æ‰€æœ‰çš„ key=value å¯¹ queryString.replace(/([^=&amp;]+)=([^&amp;]*)/g, (_match, key, value) =&gt; { params[decodeURIComponent(key)] = decodeURIComponent(value) return '' }) return params } ç®€å•å®ä¾‹ ","link":"https://ihopefulchina.github.io/p9E7d0w867/"},{"title":"è‡ªå®šä¹‰Hooks: useLockFn(Vue3) - é˜²æ­¢é¢‘ç¹è§¦å‘å‡½æ•°è°ƒç”¨","content":"åœ¨ç°ä»£å‰ç«¯å¼€å‘ä¸­ï¼Œé˜²æ­¢ç”¨æˆ·å¿«é€Ÿé‡å¤ç‚¹å‡»æŒ‰é’®æˆ–æ‰§è¡ŒæŸäº›æ“ä½œæ˜¯ä¸€ä¸ªå¸¸è§çš„éœ€æ±‚ã€‚ä¾‹å¦‚ï¼Œç”¨æˆ·åœ¨çŸ­æ—¶é—´å†…è¿ç»­ç‚¹å‡»æŒ‰é’®æ—¶ï¼Œæˆ‘ä»¬å¯èƒ½åªæƒ³æ‰§è¡Œç¬¬ä¸€æ¬¡ç‚¹å‡»çš„æ“ä½œï¼Œè€Œå¿½ç•¥åç»­çš„é‡å¤ç‚¹å‡»ã€‚ ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸€ä¸ª é”å®šæœºåˆ¶ æ¥é˜²æ­¢å‡½æ•°çš„å¤šæ¬¡è°ƒç”¨ã€‚æœ¬æ–‡å°†ä»‹ç»å¦‚ä½•ä½¿ç”¨ Vue 3 ä¸­çš„ ref å’Œ async å‡½æ•°æ¥å®ç°ä¸€ä¸ª useLockFn è‡ªå®šä¹‰ Hookï¼Œå®ƒå¯ä»¥é˜²æ­¢åœ¨çŸ­æ—¶é—´å†…é‡å¤æ‰§è¡Œä¸€ä¸ªå¼‚æ­¥æ“ä½œã€‚ éœ€æ±‚åˆ†æ æœ‰äº›æ“ä½œå¯èƒ½ä¼šè¢«é¢‘ç¹è§¦å‘ï¼Œæ¯”å¦‚ï¼š â€¢ ç”¨æˆ·å¤šæ¬¡ç‚¹å‡»æŒ‰é’®å‘èµ·ç½‘ç»œè¯·æ±‚ã€‚ â€¢ è¿ç»­è°ƒç”¨åŒä¸€ä¸ªå‡½æ•°å¯¼è‡´é‡å¤æ“ä½œï¼ˆä¾‹å¦‚ï¼Œè¡¨å•æäº¤ã€æ•°æ®ä¿å­˜ç­‰ï¼‰ã€‚ ä¸ºäº†é¿å…è¿™ç§é‡å¤æ“ä½œï¼Œæˆ‘ä»¬éœ€è¦å¼•å…¥ é”æœºåˆ¶ï¼Œç¡®ä¿åŒä¸€æ—¶åˆ»åªæ‰§è¡Œä¸€æ¬¡å‡½æ•°ã€‚ useLockFn çš„å®ç° useLockFn æ˜¯ä¸€ä¸ªé«˜é˜¶å‡½æ•°ï¼Œå®ƒæ¥å—ä¸€ä¸ªå¼‚æ­¥å‡½æ•° fn å’Œä¸€ä¸ªå¯é€‰çš„å»¶è¿Ÿ delayï¼ˆé»˜è®¤ä¸º 600 æ¯«ç§’ï¼‰ã€‚å®ƒè¿”å›ä¸€ä¸ªæ–°å‡½æ•°ï¼Œè¯¥å‡½æ•°ä¼šï¼š â€¢ é˜²æ­¢åœ¨æŒ‡å®šçš„å»¶è¿Ÿæ—¶é—´å†…é‡å¤è°ƒç”¨ã€‚ â€¢ åœ¨å¼‚æ­¥æ“ä½œå®Œæˆå‰ï¼Œé”ä½è¯¥å‡½æ•°ï¼Œé¿å…é‡å¤æ‰§è¡Œã€‚ import { ref } from 'vue'; type ArgsAny = any[]; type Fn = (...args: ArgsAny) =&gt; Promise&lt;any&gt;; export const useLockFn = (fn: Fn, delay = 600) =&gt; { const lock = ref(false); const lastDate = ref(); return async (...args: ArgsAny) =&gt; { if (lock.value) return; const nowDate = new Date(); if (lastDate?.value &amp;&amp; nowDate.getTime() - lastDate?.value.getTime() &lt;= delay) { return; } lastDate.value = nowDate; lock.value = true; try { const ret = await fn(...args); lock.value = false; return ret; } catch (error) { lock.value = false; throw error; } }; }; ","link":"https://ihopefulchina.github.io/mHHMm1wDV3/"},{"title":"è‡ªå®šä¹‰Hooks: useRowSelection - ProTable é€‰æ‹©é¡¹é…ç½®hooks","content":"åœ¨å†™åŸºäºAntd Pro åå°ä¸šåŠ¡çš„æ—¶å€™ï¼Œå‘ç°ä¸€ä¸ªé«˜é¢‘ä¸šåŠ¡åœºæ™¯éœ€æ±‚ï¼š è¡¨æ ¼åˆ—è¡¨å¤šé€‰itemçš„æ—¶å€™ï¼Œæ²¡åŠæ³•è·¨åˆ†é¡µé€‰æ‹©ã€‚ æˆ‘å†™ä¸€ä¸ªè‡ªå®šä¹‰Hooksï¼Œæ”¯æŒè·¨åˆ†é¡µé€‰æ‹©ã€‚ import { TableProps } from 'antd' import { useState } from 'react' export interface UseRowSelectionResult&lt;T&gt; { /** key */ rowKey: string /** é€‰æ‹©é¡¹é…ç½® */ rowSelection?: | (TableProps&lt;T&gt;['rowSelection'] &amp; { alwaysShowAlert?: boolean }) | false /** é€‰æ‹©é¡¹é€‰ä¸­idåˆé›† */ selectedRowKeys: number[] /** æ‰¹é‡é€‰æ‹©items */ selectedRows: T[] /** é€‰æ‹©é¡¹æ›´æ–° */ setSelectedRows: (list: T[]) =&gt; void } export interface UseRowSelectionParams&lt;T&gt; { /** @name é€‰æ‹©é¡¹Keyå€¼ */ rowKey?: string /** @name é€‰æ‹©é¡¹é…ç½® */ rowSelection?: TableProps&lt;T&gt;['rowSelection'] /** é€‰ä¸­é¡¹æ›´æ–° */ onChange?: (list: T[], ids: number[]) =&gt; void } /** hooks - ProTable é€‰æ‹©é¡¹é…ç½®hooks */ export function useRowSelection&lt;T&gt;(props?: UseRowSelectionParams&lt;T&gt;): UseRowSelectionResult&lt;T&gt; { const rowKey = props?.rowKey ?? 'id' const rowSelection = props?.rowSelection /** æ‰¹é‡é€‰æ‹©items */ const [selectedRows, setSelectedRows] = useState&lt;T[]&gt;([]) /** é€‰æ‹©é¡¹é€‰ä¸­idåˆé›† */ const selectedRowKeys = (selectedRows || []).map((row) =&gt; row[rowKey]) /** é€‰æ‹©é¡¹é…ç½® */ const newRowSelection = { ...rowSelection, type: rowSelection?.type ?? 'checkbox', selectedRowKeys, onSelect: (item: any, blo) =&gt; { if (blo) { if (rowSelection?.type === 'radio') { setSelectedRows([{ ...item }]) } else { setSelectedRows([...selectedRows, { ...item }]) } } else { setSelectedRows(selectedRows.filter((row) =&gt; row[rowKey] !== item?.[rowKey])) } }, onSelectAll: (blo, rows, changeRows) =&gt; { if (blo) { setSelectedRows([...selectedRows, ...changeRows]) } else { if (selectedRows?.length) { const newList = selectedRows?.filter((item) =&gt; !changeRows?.find((row) =&gt; row[rowKey] === item[rowKey])) setSelectedRows(newList) } else { setSelectedRows([]) } } }, onChange: (selectedRowKeys, selectedRows, info) =&gt; { if (info?.type === 'none') { setSelectedRows(selectedRows) props?.onChange?.(selectedRowKeys, selectedRows) } } } return { /** key */ rowKey, /** é€‰æ‹©é¡¹é…ç½® */ rowSelection: newRowSelection, /** é€‰æ‹©é¡¹é€‰ä¸­idåˆé›† */ selectedRowKeys, /** æ‰¹é‡é€‰æ‹©items */ selectedRows, /** é€‰æ‹©é¡¹æ›´æ–° */ setSelectedRows } } ä½¿ç”¨æ–¹æ³•å®ä¾‹: /** ProTable é€‰æ‹©é¡¹é…ç½® */ const { rowSelection, selectedRows, setSelectedRows } = useRowSelection&lt;MallCouponTemplateResVO&gt;({ ...props.rowSelectionProps }) &lt;ProTable rowSelection={rowSelection} /&gt; ","link":"https://ihopefulchina.github.io/KIr9bupcA9/"},{"title":"è‡ªå®šä¹‰Hooks: useMutate - ç®€å•çš„è·å–æ•°æ®æ–¹æ³•çš„ä¸€ä¸ªå°è£…","content":"åœ¨å†™React é¡¹ç›®ä¸šåŠ¡è¿‡ç¨‹ä¸­ï¼Œç»å¸¸å†™ä¸€äº› ç›¸ä¼¼çš„ä»£ç é€»è¾‘ã€‚ æ¯”å¦‚æˆ‘éœ€è¦åœ¨è¿›å…¥é¡µé¢è¯·æ±‚æ¥å£æ•°æ® ä¼ ç»Ÿä¸Šæˆ‘ä»¬è¯·æ±‚æ¥å£è·å–æ•°æ®ï¼Œå¤§æ¦‚ç±»ä¼¼è¿™æ ·ï¼š /** æ•°æ® */ const [detail, setDetail] = useState(defaultData) /** è¯·æ±‚æ•°æ® */ const mutate = async () =&gt; { try { const { data } = await config.getData({ ...params }) setDetail(data) } catch (error) {} } useEffect(() =&gt; { mutate() }, []) å¯¹äºè¿™ç±»ç›¸å…³çš„ä¸šåŠ¡é€»è¾‘ï¼Œæˆ‘å†™äº†ä¸€ä¸ªè‡ªå®šä¹‰hooks /** hooks - å¯¹äºç®€å•çš„è·å–æ•°æ®æ–¹æ³•çš„ä¸€ä¸ªå°è£… */ import { useState, useRef, useEffect, useMemo } from 'react' interface IMutateOption&lt;T&gt; { /** é»˜è®¤æ•°æ® */ defaultData?: T /** é¢å¤–ä¼ é€’å‚æ•° */ params?: Record&lt;string, any&gt; /** åˆå§‹æ˜¯å¦å‘å‡ºè¯·æ±‚ */ initRequest?: boolean /** è·å–æ•°æ® */ getData: (data: Record&lt;string, any&gt;) =&gt; Promise&lt;{ data?: T }&gt; /** æ•°æ®æ ¼å¼åŒ– */ dataFormat?(data?: T): any /** è¯·æ±‚æˆåŠŸåçš„å›è°ƒ */ successCallback?(data?: T): void } export function useMutate&lt;T&gt;(config: IMutateOption&lt;T&gt;) { const { defaultData, params, initRequest = true } = config /** æ•°æ® */ const [detail, setDetail] = useState(defaultData) /** æ˜¯å¦åˆå§‹åŒ– */ const isInit = useRef(initRequest) let loading = false /** è¯·æ±‚æ•°æ® */ const mutate = async () =&gt; { try { loading = true const { data } = await config.getData({ ...params }) const newData = config.dataFormat ? config.dataFormat(data) : data setDetail(newData) config?.successCallback?.(newData) return newData } catch (error) { setDetail({}) } finally { loading = false } } /** åˆå§‹è¯·æ±‚ */ useEffect(() =&gt; { if (!isInit.current) { isInit.current = true } else { mutate() } }, []) /** æš‚æ— æ•°æ® */ const noData = useMemo(() =&gt; { if (detail !== undefined) { if (detail instanceof Array) { return detail.length === 0 } else if (detail instanceof Object) { return Object.keys(detail).length === 0 } } return false }, [detail]) return { mutate, detail, setDetail, noData, loading } } è·å–æ•°æ®ç±»ä¼¼é€»è¾‘ç®€å•å°è£… ","link":"https://ihopefulchina.github.io/481vcXjEdn/"},{"title":"taro SwipeCell æ»‘åŠ¨å•å…ƒæ ¼ç»„ä»¶","content":"åŸºäºTaro3ã€Reactçš„ taro SwipeCell æ»‘åŠ¨å•å…ƒæ ¼ç»„ä»¶ å¤ç”¨æ€§å¾ˆä½ï¼Œä¸»è¦æä¾›ä¸€ä¸ªæ€è·¯ï¼Œ ä½¿ç”¨ScrollView ä¼šæœ‰åœ¨éƒ¨åˆ†çœŸæœºè®¾å¤‡æœ‰å…¼å®¹æ€§é—®é¢˜ï¼›ä½¿ç”¨MovableViewæ–¹å¼é¡µé¢æ»‘åŠ¨å°±ä¼šæœ‰é—®é¢˜ï¼Œç›®å‰è¿™æ ·æ€è·¯æ˜¯æœ€ä¼˜è§£å†³æ–¹æ¡ˆã€‚ å®‰è£… npm install taro-swipe-cell å¯¼å…¥ç»„ä»¶ import MySwipeCell from 'taro-swipe-cell' å‚æ•°è¯´æ˜ å‚æ•° æè¿° ç±»å‹ å¿…ä¼  é»˜è®¤å€¼ deleteItem åˆ é™¤äº‹ä»¶ Function æ˜¯ () =&gt; void children children React.children æ˜¯ ä½¿ç”¨ import { FC, memo } from 'react' import MySwipeCell from 'taro-swipe-cell' import Taro from '@tarojs/taro' import { View } from '@tarojs/components' const Component: FC = () =&gt; { // åˆ é™¤å½“å‰item const delItem = item =&gt; { } return ( &lt;&gt; &lt;MySwipeCell deleteItem={() =&gt; delItem(item)}&gt; &lt;View className={styles.item}&gt; 1111 &lt;/View&gt; &lt;/MySwipeCell&gt; &lt;/&gt; ) } const Mall = memo(Component) export default Mall ","link":"https://ihopefulchina.github.io/0ZUzQJonb/"},{"title":"huangpengfei-js-tools","content":"huangpengfei-js-tools æ•´ç†å·¥ä½œä¸­å¸¸ç”¨çš„JavaScriptã€Taroã€Hooksæ–¹æ³•åˆé›† å®‰è£… npm install huangpengfei-js-tools å¼•å…¥æ–¹æ³• import { xxx } from 'huangpengfei-js-tools' ç”¨ä¾‹ /* ç»„ä»¶ -- å®˜æ–¹å¤šåˆ—é€‰æ‹©å™¨ä½¿ç”¨ */ import { memo } from 'react' import Taro from '@tarojs/taro' import { Picker } from '@tarojs/components' import { useFile2Txt, useMultiSelectorTree } from 'huangpengfei-js-tools' interface IProps { children: any onChange: any value: any disabled?: boolean } const Component = ({ children, value, onChange, disabled }: IProps) =&gt; { const rangeKey = 'value' const { nodes = [] as any } = useFile2Txt(jsonUrl) const { valueIndex, range, onColumnChange, onCancel } = useMultiSelectorTree({ value, list: nodes, depth: 3, rangeKey }) // ç‚¹å‡» const onChangeCity = event =&gt; { const { value: values } = event?.detail if (onChange) { const item = values.map((it, index) =&gt; { return range[index][it] }) onChange(item) } } return ( &lt;Picker mode=&quot;multiSelector&quot; range={range} value={valueIndex} disabled={disabled} onCancel={onCancel} onColumnChange={onColumnChange} onChange={onChangeCity} rangeKey={rangeKey} &gt; {children} &lt;/Picker&gt; ) } export default memo(Component) ","link":"https://ihopefulchina.github.io/odFd8wVk4/"},{"title":"Taro Parabola","content":"taro-parabola åŸºäºTaro3ã€Reactçš„H5å’Œå¾®ä¿¡å°ç¨‹åºæ·»åŠ åˆ°è´­ç‰©è½¦æŠ›ç‰©çº¿åŠ¨ç”»ç»„ä»¶ å®‰è£… npm install taro-parabola å¯¼å…¥ç»„ä»¶ import Parabola from 'taro-parabola' å‚æ•°è¯´æ˜ å‚æ•° æè¿° ç±»å‹ å¿…ä¼  é»˜è®¤å€¼ cartX è´­ç‰©è½¦ æ‰€åœ¨åæ ‡çš„xå€¼ number æ˜¯ screenWidth cartY è´­ç‰©è½¦ æ‰€åœ¨åæ ‡çš„yå€¼ number æ˜¯ screenHeight - 60 onChange ç‚¹å‡»å›è°ƒæ–¹æ³• Function å¦ () =&gt; void parabolaStyle æŠ›ç‰©çº¿æ ·å¼ React.CSSProperties å¦ ä½¿ç”¨ import { FC, memo, useEffect, useState } from 'react' import Parabola from 'taro-parabola' import Taro from '@tarojs/taro' import { View } from '@tarojs/components' const list = [1, 2, 3, 4, 5] const Component: FC = () =&gt; { const [cartInfo, setCartInfo] = useState({} as any) return ( &lt;&gt; {list.map(item =&gt; ( &lt;Parabola cartX={cartInfo.left} cartY={cartInfo.top} parabolaStyle={{ width: '15px', height: '15px', backgroundColor: '#333' }} onChange={() =&gt; {}} key={item} &gt; {item} &lt;/Parabola&gt; ))} &lt;View id=&quot;cart&quot;&gt;æˆ‘æ˜¯è´­ç‰©è½¦&lt;/View&gt; &lt;/&gt; ) } const Mall = memo(Component) export default Mall ","link":"https://ihopefulchina.github.io/taro-parabola/"},{"title":"å°è£…è…¾è®¯å³æ—¶é€šè®¯ for å°ç¨‹åº","content":"é€‚ç”¨å°ç¨‹åº(Taro)æ¥å…¥è…¾è®¯å³æ—¶é€šè®¯ã€‚ è´´ä¸‹Githubåœ°å€ï¼šhttps://github.com/ihopefulChina/tim-for-weapp-Taro å‚è€ƒèµ„æ–™ SDK APIï¼ˆWeb &amp; å°ç¨‹åºï¼‰ å¾®ä¿¡å°ç¨‹åºåŸç”Ÿæ¥å…¥è…¾è®¯äº‘im åŸç”ŸJSé›†æˆè…¾è®¯IMå®æ—¶èŠå¤©/å®æ—¶éŸ³è§†é¢‘ å¾®ä¿¡å°ç¨‹åºåˆ©ç”¨è…¾è®¯äº‘IMå³æ—¶é€šè®¯å‘é€æ–‡å­—+è¡¨æƒ…å¼€å‘ï¼‰ import Taro from &quot;@tarojs/taro&quot;; import TIM from 'tim-wx-sdk'; import COS from &quot;cos-wx-sdk-v5&quot; import TIMUploadPlugin from 'tim-upload-plugin'; import roomStore from &quot;~/store/room&quot;; import timStore from '~/store/tim' //sdk import { timSDK } from &quot;~/config&quot; import { get } from &quot;~/components/request&quot;; const userInfo = (Taro.getStorageSync('userInfo')) as any; // åˆå§‹åŒ– const iminit_TIM = async () =&gt; { const options = { SDKAppID: timSDK // æ¥å…¥æ—¶éœ€è¦å°†0æ›¿æ¢ä¸ºæ‚¨çš„å³æ—¶é€šä¿¡ IM åº”ç”¨çš„ SDKAppID } // åˆ›å»º SDK å®ä¾‹ï¼Œ`TIM.create()`æ–¹æ³•å¯¹äºåŒä¸€ä¸ª `SDKAppID` åªä¼šè¿”å›åŒä¸€ä»½å®ä¾‹ const tim = TIM.create(options);// SDK å®ä¾‹é€šå¸¸ç”¨ tim è¡¨ç¤º // è®¾ç½® SDK æ—¥å¿—è¾“å‡ºçº§åˆ«ï¼Œè¯¦ç»†åˆ†çº§è¯·å‚è§ setLogLevel æ¥å£çš„è¯´æ˜ // tim.setLogLevel(0); // æ™®é€šçº§åˆ«ï¼Œæ—¥å¿—é‡è¾ƒå¤šï¼Œæ¥å…¥æ—¶å»ºè®®ä½¿ç”¨ tim.setLogLevel(1); // release çº§åˆ«ï¼ŒSDK è¾“å‡ºå…³é”®ä¿¡æ¯ï¼Œç”Ÿäº§ç¯å¢ƒæ—¶å»ºè®®ä½¿ç”¨ // æ³¨å†Œ COS SDK æ’ä»¶ tim.registerPlugin({ 'cos-wx-sdk': COS }) tim.registerPlugin({ 'tim-upload-plugin': TIMUploadPlugin }); // ç›‘å¬äº‹ä»¶ï¼Œä¾‹å¦‚ï¼š tim.on(TIM.EVENT.SDK_READY, (event) =&gt; { timStore.isImLogin = true Taro.setStorageSync('isImLogin', true) // @ts-ignore // eslint-disable-next-line no-undef wx.event.emit('SDK_ready', event.name) // æ”¶åˆ°ç¦»çº¿æ¶ˆæ¯å’Œä¼šè¯åˆ—è¡¨åŒæ­¥å®Œæ¯•é€šçŸ¥ï¼Œæ¥å…¥ä¾§å¯ä»¥è°ƒç”¨ sendMessage ç­‰éœ€è¦é‰´æƒçš„æ¥å£ // event.name - TIM.EVENT.SDK_READY }); tim.on(TIM.EVENT.MESSAGE_RECEIVED, (event) =&gt; { // è‹¥åŒæ—¶æ”¶åˆ°å¤šä¸ªä¼šè¯ éœ€è¦æ ¹æ®conversationIDæ¥åˆ¤æ–­æ˜¯å“ªä¸ªäººçš„ä¼šè¯ const msgarr = [] as any const newMsgForm = event.data[0].conversationID // å®šä¹‰ä¼šè¯é”®å€¼ if (msgarr[newMsgForm]) { msgarr[newMsgForm].push(event.data[0]) } else { msgarr[newMsgForm] = [event.data[0]] } timStore.myMessages = msgarr // è¿™é‡Œå¼•å…¥äº†ä¸€ä¸ªç›‘å¬å™¨ ï¼ˆå› ä¸ºå°ç¨‹åºæ²¡æœ‰ç±»ä¼¼vuexçš„çŠ¶æ€ç®¡ç†å™¨ å½“globalé‡Œé¢çš„æ•°æ®å˜åŒ–æ—¶ä¸èƒ½åŠæ—¶åŒæ­¥åˆ°èŠå¤©é¡µé¢ å› æ­¤ è¿™ä¸ªç›‘å¬å™¨å¯ä»¥emitä¸€ä¸ªæ–¹æ³• åˆ°éœ€è¦æ›´æ–°ä¼šè¯æ•°æ®çš„é¡µé¢ åœ¨é‚£é‡Œè¿›è¡Œèµ‹å€¼ï¼‰ // @ts-ignore // eslint-disable-next-line no-undef wx.event.emit('testFunc', msgarr, newMsgForm) // è¯¦æƒ…é¡µçš„å‡½æ•° // æ”¶åˆ°æ¨é€çš„å•èŠã€ç¾¤èŠã€ç¾¤æç¤ºã€ç¾¤ç³»ç»Ÿé€šçŸ¥çš„æ–°æ¶ˆæ¯ï¼Œå¯é€šè¿‡éå† event.data è·å–æ¶ˆæ¯åˆ—è¡¨æ•°æ®å¹¶æ¸²æŸ“åˆ°é¡µé¢ // event.name - TIM.EVENT.MESSAGE_RECEIVED // event.data - å­˜å‚¨ Message å¯¹è±¡çš„æ•°ç»„ - [Message] }) tim.on(TIM.EVENT.MESSAGE_READ_BY_PEER, (event) =&gt; { // SDK æ”¶åˆ°å¯¹ç«¯å·²è¯»æ¶ˆæ¯çš„é€šçŸ¥ï¼Œå³å·²è¯»å›æ‰§ã€‚ä½¿ç”¨å‰éœ€è¦å°† SDK ç‰ˆæœ¬å‡çº§è‡³ v2.7.0 æˆ–ä»¥ä¸Šã€‚ä»…æ”¯æŒå•èŠä¼šè¯ã€‚ const msgarr = [] as any const newMsgForm = event.data[0].conversationID // å®šä¹‰ä¼šè¯é”®å€¼ if (msgarr[newMsgForm]) { msgarr[newMsgForm].push(event.data[0]) } else { msgarr[newMsgForm] = [event.data[0]] } // @ts-ignore // eslint-disable-next-line no-undef wx.event.emit('readItem', msgarr, newMsgForm) // å‡½æ•° // event.name - TIM.EVENT.MESSAGE_READ_BY_PEER // event.data - event.data - å­˜å‚¨ Message å¯¹è±¡çš„æ•°ç»„ - [Message] - æ¯ä¸ª Message å¯¹è±¡çš„ isPeerRead å±æ€§å€¼ä¸º true }); tim.on(TIM.EVENT.CONVERSATION_LIST_UPDATED, (event) =&gt; { // æ›´æ–°å½“å‰æ‰€æœ‰ä¼šè¯åˆ—è¡¨ // æ³¨æ„ è¿™ä¸ªå‡½æ•°åœ¨é¦–æ¬¡ç‚¹å‡»è¿›å…¥ä¼šè¯åˆ—è¡¨çš„æ—¶å€™ä¹Ÿä¼šæ‰§è¡Œ å› æ­¤ç‚¹å‡»æ¶ˆæ¯ å¯ä»¥æ˜¾ç¤ºå½“å‰çš„æœªè¯»æ¶ˆæ¯æ•°ï¼ˆunreadCountè¡¨ç¤ºæœªè¯»æ•°ï¼‰ timStore.isImLogin &amp;&amp; initRecentContactList() // æ”¶åˆ°ä¼šè¯åˆ—è¡¨æ›´æ–°é€šçŸ¥ï¼Œå¯é€šè¿‡éå† event.data è·å–ä¼šè¯åˆ—è¡¨æ•°æ®å¹¶æ¸²æŸ“åˆ°é¡µé¢ // event.name - TIM.EVENT.CONVERSATION_LIST_UPDATED // event.data - å­˜å‚¨ Conversation å¯¹è±¡çš„æ•°ç»„ - [Conversation] }); tim.on(TIM.EVENT.SDK_NOT_READY, (event) =&gt; { timStore.isImLogin = false Taro.setStorageSync('isImLogin', false) loginIm_TIM(userInfo.adventureNo) // @ts-ignore // eslint-disable-next-line no-undef wx.event.emit('SDK_no_ready', event.name) // æ”¶åˆ° SDK è¿›å…¥ not ready çŠ¶æ€é€šçŸ¥ï¼Œæ­¤æ—¶ SDK æ— æ³•æ­£å¸¸å·¥ä½œ // event.name - TIM.EVENT.SDK_NOT_READY }); tim.on(TIM.EVENT.KICKED_OUT, (event) =&gt; { Taro.setStorageSync('isImLogin', false) timStore.isImLogin = false; // æ”¶åˆ°è¢«è¸¢ä¸‹çº¿é€šçŸ¥ // event.name - TIM.EVENT.KICKED_OUT // event.data.type - è¢«è¸¢ä¸‹çº¿çš„åŸå› ï¼Œä¾‹å¦‚: // - TIM.TYPES.KICKED_OUT_MULT_ACCOUNT å¤šå®ä¾‹ç™»å½•è¢«è¸¢ // - TIM.TYPES.KICKED_OUT_MULT_DEVICE å¤šç»ˆç«¯ç™»å½•è¢«è¸¢ // - TIM.TYPES.KICKED_OUT_USERSIG_EXPIRED ç­¾åè¿‡æœŸè¢«è¸¢ }) timStore.tim = tim; } // ç™»å½• const loginIm_TIM = userID =&gt; { const id = userID ? userID : userInfo.adventureNo if (!!id &amp;&amp; !timStore.isImLogin) { // å¼€å§‹ç™»å½• get(`/im/getUserSign?adventureNo=${id}`).then(res =&gt; { Taro.setStorageSync('userSig', res.data) const promise = timStore.tim.login({ userID: String(id), userSig: res.data }); promise.then((imResponse) =&gt; { Taro.setStorageSync('isImLogin', true) timStore.isImLogin = true setTimeout(() =&gt; { // æ‹‰å–ä¼šè¯åˆ—è¡¨ timStore.isImLogin &amp;&amp; initRecentContactList() }, 1000); }).catch((imError) =&gt; { // Taro.showToast({ // title: 'login error' + imError, // icon: 'none', // duration: 3000 // }) }); }) } } // ä¼šè¯åˆ—è¡¨ const initRecentContactList = () =&gt; { const promise = timStore.tim.getConversationList(); if (!promise) { // Taro.showToast({ // title: 'SDK not ready', // icon: 'none', // duration: 3000 // }) return } let conversationList = [] as any promise.then((imResponse) =&gt; { // å¦‚æœæœ€åä¸€æ¡æ¶ˆæ¯æ˜¯è‡ªå®šä¹‰æ¶ˆæ¯çš„è¯ï¼Œå¤„ç†ä¸€ä¸‹data conversationList = imResponse.data.conversationList; // ä¼šè¯åˆ—è¡¨ï¼Œç”¨è¯¥åˆ—è¡¨è¦†ç›–åŸæœ‰çš„ä¼šè¯åˆ—è¡¨ conversationList.forEach(event =&gt; { if (event.lastMessage.type === 'TIMCustomElem') { const data = event.lastMessage.payload.data let new_data = '' if (typeof (data) === 'string' &amp;&amp; data) { new_data = JSON.parse(data) } event.lastMessage.payload.data = new_data } }) let number = 0 conversationList.forEach(ele =&gt; { number = number + ele.unreadCount }) // console.log('initRecentContactList', number) //æ›´æ–°è·å–æœªè¯»æ¶ˆæ¯è§’æ ‡ é‡‡ç”¨äº†mboxæ–¹å¼ä¼ å…¥ roomStore.updateRoomNum(number) const list = conversationList as any // @ts-ignore // eslint-disable-next-line no-undef wx.event.emit('conversationList', list) // å‡½æ•° timStore.conversationList = list Taro.setStorageSync('conversationList', list) }).catch((imError) =&gt; { // Taro.showToast({ // title: 'getConversationList error:' + imError, // icon: 'none', // duration: 3000 // }) }) } // åˆ é™¤ä¼šè¯ function deleteConversation_TIM(ID) { const promise = timStore.tim.deleteConversation(ID); promise.then((imResponse) =&gt; { // åˆ é™¤æˆåŠŸã€‚ const { conversationID } = imResponse.data;// è¢«åˆ é™¤çš„ä¼šè¯ ID const oldList = Taro.getStorageSync('conversationList') const newList = oldList.filter((item: any) =&gt; conversationID !== item.conversationID) Taro.setStorageSync('conversationList', newList) }) } export { iminit_TIM, loginIm_TIM, initRecentContactList, deleteConversation_TIM } è·å–åˆ—è¡¨ hooksæ–¹å¼ const [list, setList] = useState([] as any); useEffect(() =&gt; { // @ts-ignore // eslint-disable-next-line no-undef wx.event.on(&quot;conversationList&quot;, (lists: any) =&gt; { if (lists.length &gt; 0) { timStore.isImLogin &amp;&amp; setList( lists ? lists : timStore.conversationList ); } }); }, []); è·å–èŠå¤©ä¼šè¯ // å‘é€ä¿¡æ¯ const [sendMsg, setSendMsg] = useState(&quot;&quot; as any); // imå®æ—¶èŠå¤©æ•°æ® const [toView, setToView] = useState(&quot;&quot; as any); // ç”¨äºç»­æ‹‰ï¼Œåˆ†é¡µç»­æ‹‰æ—¶éœ€ä¼ å…¥è¯¥å­—æ®µã€‚ const [nextReqMessageID, setNextReqMessageID] = useState(&quot;&quot; as any); // è¡¨ç¤ºæ˜¯å¦å·²ç»æ‹‰å®Œæ‰€æœ‰æ¶ˆæ¯ã€‚ const [isCompleted, setIsCompleted] = useState(&quot;&quot; as any); // æ¶ˆæ¯åˆ—è¡¨ const [myMessages, setmyMessages] = useState([] as any); const [more_text, setmore_text] = useState(&quot;&quot;); const [is_lock, setis_lock] = useState(true); // è¯­éŸ³æ“ä½œ const [title, settitle] = useState(&quot;æ­£åœ¨å½•éŸ³&quot;); const [isRecording, setisRecording] = useState(false); // æ‹‰å–ä¼šè¯åˆ—è¡¨ const getMsgList = () =&gt; { const param = { //sendId ä¸ºå¯¹æ–¹id conversationID: &quot;C2C&quot; + sendId, count: 15, nextReqMessageID }; const promise = timStore.tim.getMessageList(param); promise .then(imResponse =&gt; { const messageList = imResponse.data.messageList; // æ¶ˆæ¯åˆ—è¡¨ã€‚ // å¤„ç†è‡ªå®šä¹‰çš„æ¶ˆæ¯ messageList.forEach(event =&gt; { if (event.type === &quot;TIMCustomElem&quot;) { if (typeof event.payload.data === &quot;string&quot; &amp;&amp; event.payload.data) { const new_data = JSON.parse(event.payload.data); event.payload.data = new_data; } } }); const newNextReqMessageID = imResponse.data.nextReqMessageID; // ç”¨äºç»­æ‹‰ï¼Œåˆ†é¡µç»­æ‹‰æ—¶éœ€ä¼ å…¥è¯¥å­—æ®µã€‚ const newIsCompleted = imResponse.data.isCompleted; // è¡¨ç¤ºæ˜¯å¦å·²ç»æ‹‰å®Œæ‰€æœ‰æ¶ˆæ¯ã€‚ // å°†æŸä¼šè¯ä¸‹æ‰€æœ‰æœªè¯»æ¶ˆæ¯å·²è¯»ä¸ŠæŠ¥ setMessageRead(); setmyMessages(messageList); setIsCompleted(newIsCompleted); setNextReqMessageID(newNextReqMessageID); setmore_text(newIsCompleted ? &quot;æ²¡æœ‰æ›´å¤šäº†&quot; : &quot;ä¸‹æ‹‰æŸ¥çœ‹æ›´å¤šå†å²ä¿¡æ¯&quot;); scrollToBottom(messageList.length - 1); }) .catch(imError =&gt; { // console.warn(&quot;getConversationList error:&quot;, imError); // è·å–ä¼šè¯åˆ—è¡¨å¤±è´¥çš„ç›¸å…³ä¿¡æ¯ }); }; å·²è¯»å›æ‰§ // å·²è¯»å›æ‰§ // @ts-ignore // eslint-disable-next-line no-undef wx.event.on(&quot;readItem&quot;, (ele, newMsgForm) =&gt; { if (newMsgForm === `C2C${sendId}` &amp;&amp; timStore.isDetail) { const newmsg = ele[`C2C${sendId}`]; const oldItems = deepCopy(myMessages); if (newmsg) { newmsg.forEach(event =&gt; { if (event.type === &quot;TIMCustomElem&quot;) { if (typeof event.payload.data === &quot;string&quot; &amp;&amp; event.payload.data) { const new_data = JSON.parse(event.payload.data); event.payload.data = new_data; } } }); let newitems = oldItems.filter( (item: any) =&gt; !newmsg.some((dom: any) =&gt; dom.ID === item.ID) ); newitems = [...newitems, ...newmsg]; setmyMessages(newitems); scrollToBottom(newitems.length - 1); } } }); æ¥å—åˆ°æ–°æ¶ˆæ¯ // @ts-ignore // eslint-disable-next-line no-undef wx.event.on(&quot;testFunc&quot;, (ele, newMsgForm) =&gt; { if (newMsgForm === `C2C${sendId}` &amp;&amp; timStore.isDetail) { const newmsg = ele[`C2C${sendId}`]; let oldMss = myMessages; if (newmsg) { newmsg.forEach(event =&gt; { if (event.type === &quot;TIMCustomElem&quot;) { if ( typeof event.payload.data === &quot;string&quot; &amp;&amp; event.payload.data ) { const new_data = JSON.parse(event.payload.data); event.payload.data = new_data; } } if (!event.isRead) { oldMss = [...oldMss, ...newmsg]; } }); setmyMessages(oldMss); scrollToBottom(oldMss.length - 1); } setMessageRead(); } }); è®¾ç½®å·²è¯»ä¸ŠæŠ¥ const setMessageRead = () =&gt; { const promise = timStore.tim.setMessageRead({ conversationID: &quot;C2C&quot; + sendId }); promise .then(imResponse =&gt; { initRecentContactList(); // å·²è¯»ä¸ŠæŠ¥æˆåŠŸ let noready = 0; const messages = myMessages as any; messages.forEach(event =&gt; { if (!event.isRead) { noready++; } }); const number = Taro.getStorageSync(&quot;number_msg&quot;); const newNumber = number - noready; Taro.setStorageSync(&quot;number_msg&quot;, newNumber); roomStore.updateRoomNum(newNumber); }) .catch(imError =&gt; { // å·²è¯»ä¸ŠæŠ¥å¤±è´¥ // console.warn(&quot;setMessageRead error:&quot;, imError); }); }; å‘é€æ–‡æœ¬æ¶ˆæ¯ // å‘é€æ™®é€šæ–‡æœ¬æ¶ˆæ¯ const bindConfirm = () =&gt; { if (is_lock) { setis_lock(false); if (sendMsg.length === 0) { Taro.showToast({ title: &quot;æ¶ˆæ¯ä¸èƒ½ä¸ºç©º!&quot;, icon: &quot;none&quot; }); setis_lock(true); return; } const content = { text: sendMsg }; const options = { to: sendId, // æ¶ˆæ¯çš„æ¥æ”¶æ–¹ conversationType: TIM.TYPES.CONV_C2C, // ä¼šè¯ç±»å‹å–å€¼timStore.tim.TYPES.CONV_C2Cæˆ–timStore.tim.TYPES.CONV_GROUP payload: content // æ¶ˆæ¯å†…å®¹çš„å®¹å™¨ }; // // å‘é€æ–‡æœ¬æ¶ˆæ¯ï¼ŒWeb ç«¯ä¸å°ç¨‹åºç«¯ç›¸åŒ // 1. åˆ›å»ºæ¶ˆæ¯å®ä¾‹ï¼Œæ¥å£è¿”å›çš„å®ä¾‹å¯ä»¥ä¸Šå± const message = timStore.tim.createTextMessage(options); // 2. å‘é€æ¶ˆæ¯ sendMessageFun(message, &quot;text&quot;); } }; å‘é€è¯­éŸ³å›¾ç‰‡å’Œè§†é¢‘æ¶ˆæ¯ // å‘é€è¯­éŸ³æ¶ˆæ¯ const bindAudioMessage = res =&gt; { // 4. åˆ›å»ºæ¶ˆæ¯å®ä¾‹ï¼Œæ¥å£è¿”å›çš„å®ä¾‹å¯ä»¥ä¸Šå± const message = timStore.tim.createAudioMessage({ to: sendId, // æ¶ˆæ¯çš„æ¥æ”¶æ–¹ conversationType: TIM.TYPES.CONV_C2C, payload: { file: res } }); sendMessageFun(message, &quot;voice&quot;); }; // å‘é€è§†é¢‘ const createVideoMessage = res =&gt; { // 2. åˆ›å»ºæ¶ˆæ¯å®ä¾‹ï¼Œæ¥å£è¿”å›çš„å®ä¾‹å¯ä»¥ä¸Šå± const message = timStore.tim.createVideoMessage({ to: sendId, conversationType: TIM.TYPES.CONV_C2C, payload: { file: res } }); // 3. å‘é€æ¶ˆæ¯ sendMessageFun(message, &quot;video&quot;); }; // å‘é€å›¾ç‰‡ const createImageMessage = res =&gt; { const message = timStore.tim.createImageMessage({ to: sendId, conversationType: TIM.TYPES.CONV_C2C, payload: { file: res }, onProgress(event) { setProgress(event); } }); sendMessageFun(message, &quot;image&quot;); }; å‘é€æ¶ˆæ¯å°è£… const sendMessageFun = (message, type) =&gt; { Taro.showLoading({ title: &quot;å‘é€ä¸­&quot; }); const promise = timStore.tim.sendMessage(message); promise.then(imResponse =&gt; { // å‘é€æˆåŠŸ setMessageRead(); const messageList = myMessages as any; messageList.push(imResponse.data.message); setis_lock(true); setmyMessages(messageList); clearInput(); scrollToBottom(messageList.length - 1); Taro.hideLoading({}); }); }; ","link":"https://ihopefulchina.github.io/IZbWBmM7v/"},{"title":"è…¾è®¯COSä¸Šä¼ å›¾ç‰‡å°è£…","content":"cos-js-sdk-v5 å°è£… é€‚ç”¨äºå¾®ä¿¡æµè§ˆå™¨H5ç¯å¢ƒ Githubåœ°å€ï¼šhttps://github.com/ihopefulChina/Tencent-COS-uploads-picture config.ts import { genID, get_suffix } from '~/tools/tools'; import { autobind } from 'core-decorators'; import COS from 'cos-js-sdk-v5'; const Bucket = 'Bucketå€¼'; const Region = 'Regionå€¼'; @autobind export default class COSUpload { private getOssToken: () =&gt; Promise&lt;any&gt; constructor(config: { getOssToken: () =&gt; Promise&lt;any&gt; }) { this.getOssToken = config.getOssToken; } /** * æ‰¹é‡ä¸Šä¼  * @param {Object} obj Bucketã€Regionã€Body è¯¦æƒ…æŸ¥çœ‹cosæ–‡æ¡£ * @returns err || æ‰¹é‡ä¸Šä¼ filesData */ uploadFiles(fileList: any) { // eslint-disable-next-line no-async-promise-executor return new Promise(async (resolve, reject) =&gt; { const { cos, content } = await this.getOss(); const files = await fileList.map((fileObject: any) =&gt; { const file = fileObject.file ? fileObject.file : fileObject; const fileName = `${content.requestId}${genID(3)}.${file.path ? get_suffix(file.path) : 'png'}`; return { Bucket: Bucket, Region: Region, Key: fileName, StorageClass: 'STANDARD', Body: file, }; }); await cos.uploadFiles({ files, SliceSize: 1024 * 1024 * 5, /* è®¾ç½®å¤§äº5MBé‡‡ç”¨åˆ†å—ä¸Šä¼  */ }, function (err: any, data: any) { const val = (err || data); const list = !err ? val.files.map((item: any) =&gt; `https://${item.data.Location}` ) : []; const newArr = list.filter((it: string) =&gt; it); return err ? reject(err) : resolve(newArr); }); }); } private async getOss() { const data = await this.getOssToken(); const content = data as any; const credentials = data.credentials; // console.log(window,wx); const cos = new COS({ getAuthorization: function (options: any, callback: any) { callback({ TmpSecretId: credentials.tmpSecretId, TmpSecretKey: credentials.tmpSecretKey, SecurityToken: credentials.sessionToken, // å»ºè®®è¿”å›æœåŠ¡å™¨æ—¶é—´ä½œä¸ºç­¾åçš„å¼€å§‹æ—¶é—´ï¼Œé¿å…ç”¨æˆ·æµè§ˆå™¨æœ¬åœ°æ—¶é—´åå·®è¿‡å¤§å¯¼è‡´ç­¾åé”™è¯¯ StartTime: data.startTime, // æ—¶é—´æˆ³ï¼Œå•ä½ç§’ï¼Œå¦‚ï¼š1580000000 ExpiredTime: data.expiredTime, // æ—¶é—´æˆ³ï¼Œå•ä½ç§’ï¼Œå¦‚ï¼š1580000900 }); } }); return { cos, content }; } } index.ts import COSUpload from './config'; import { get } from &quot;~/request&quot;; &lt;!-- getè¯·æ±‚ --&gt; const { uploadFiles } = new COSUpload({ getOssToken: () =&gt; get(`xxx.com/tencent/cos-token`) }); export { uploadFiles }; å¼•å…¥æ–‡ä»¶å†…å®¹ /** * @description: ç”Ÿæˆå”¯ä¸€id * @param {number} length æ•°å­—é•¿åº¦ * @return {string} */ export function genID(length = 3) { return Number(Math.random().toString().substr(3, length) + Date.now()).toString(36); } //è·å–æ–‡ä»¶åç§°åç¼€ export const get_suffix = (fileName: string) =&gt; { const suffix = fileName.substring(fileName.lastIndexOf('.') + 1); return suffix; }; ä¸Šä¼ å¤šå¼ å›¾ç‰‡ç»„ä»¶ /* ç»„ä»¶ -- ä¸Šä¼  */ import React, { useState } from &quot;react&quot;; import WxImageViewer from &quot;react-wx-images-viewer&quot;; import { uploadFiles } from &quot;~/components/tencent&quot;; import { Toast } from &quot;antd-mobile&quot;; import Compressor from &quot;compressorjs&quot;; import styles from &quot;./index.module.less&quot;; interface IProps { imgList?: string[]; onChange: (list: string[]) =&gt; void; onDelete: (idx: number) =&gt; void; progressChange?: (percent: number) =&gt; void; count?: number; } const Index = ({ imgList = [], onChange, onDelete, count = 2 }: IProps) =&gt; { const [showViewer, setShowViewer] = useState(false); const [imgIndex, setImgIndex] = useState(0); const onInputChange = (e: React.ChangeEvent&lt;HTMLInputElement&gt;) =&gt; { const fileList = e.target.files; if (imgList.length &lt; count) { //ä»£è¡¨è¿˜å¯ä»¥ä¸Šä¼  if (fileList &amp;&amp; fileList.length &gt; 0) { const newFileList = [] as any; for (const key in fileList) { if (Object.prototype.hasOwnProperty.call(fileList, key)) { const element = fileList[key] as any; element &amp;&amp; newFileList.push(element); } } let paths = []; if (imgList.length + newFileList.length &lt; count) { paths = newFileList; } else { //æ•°é‡è¶…è¿‡äº† const surplus = count - imgList.length; paths = newFileList.slice(0, surplus); // paths = newFileList.filter((item, index) =&gt; index &lt; surplus); } //å‹ç¼©å›¾ç‰‡ const newPaths = paths.map((image: any) =&gt; { let newImg = image; new Compressor(image, { quality: 0.5, // 0.6 can also be used, but its not recommended to go below. success: (res) =&gt; (newImg = res), }); return newImg; }); Toast.loading(&quot;ä¸Šä¼ ä¸­...&quot;); uploadFiles(newPaths).then((res: any) =&gt; { onChange &amp;&amp; onChange([...imgList, ...res]); Toast.hide(); }); } } }; return ( &lt;div className={styles.upload}&gt; &lt;div className={styles.uploadList}&gt; {imgList.map((item, index) =&gt; ( &lt;div key={`${item}`} className={styles.item} onClick={(event) =&gt; { event.stopPropagation(); setShowViewer(true); setImgIndex(index); document .getElementsByTagName(&quot;body&quot;)[0] .setAttribute(&quot;style&quot;, &quot;overflow:hidden&quot;); //ç»™bodyæ·»åŠ overflow:hiddené˜»æ­¢é®ç½©å±‚æ»šåŠ¨ä¸»é¡µé¢æ»šåŠ¨ }} &gt; &lt;img className={styles.img} data-preview-proto={item} src={item} alt=&quot;ä¸Šä¼ å›¾ç‰‡&quot; /&gt; &lt;img className={styles.del} src={require(&quot;./images/del.png&quot;)} alt=&quot;åˆ é™¤æŒ‰é’®&quot; onClick={(event) =&gt; { event.stopPropagation(); onDelete(index); }} /&gt; &lt;/div&gt; ))} {imgList.length &lt; count &amp;&amp; ( &lt;div className={styles.uploadBtn}&gt; &lt;input type=&quot;file&quot; name=&quot;image&quot; accept=&quot;image/*&quot; multiple={true} className={styles.uploadInput} onChange={onInputChange} /&gt; &lt;div className={styles.uploadPlus}&gt; &lt;img src={require(&quot;./images/plus.png&quot;)} alt=&quot;åŠ å·&quot; /&gt; &lt;span&gt; ({imgList.length}/{count}) &lt;/span&gt; &lt;/div&gt; &lt;/div&gt; )} &lt;/div&gt; {showViewer ? ( &lt;WxImageViewer onClose={() =&gt; { setShowViewer(false); document.getElementsByTagName(&quot;body&quot;)[0].removeAttribute(&quot;style&quot;); }} urls={imgList} index={imgIndex} /&gt; ) : ( &quot;&quot; )} &lt;/div&gt; ); }; export default Index; å¼•ç”¨ç»„ä»¶ import Upload from &quot;~/components/upload&quot;; &lt;Upload imgList={form.discoverServiceImgs} count={6} onChange={(imgs) =&gt; setForm({ ...form, discoverServiceImgs: imgs }) } onDelete={(idx) =&gt; setForm({ ...form, discoverServiceImgs: form.discoverServiceImgs.filter( (_value: any, _index: any) =&gt; _index !== idx ), }) } /&gt; ","link":"https://ihopefulchina.github.io/oi4CnmXh7/"},{"title":"å‡½æ•°å¼ç»„ä»¶ä¸ç±»ç»„ä»¶æœ‰ä½•ä¸åŒï¼Ÿ","content":" å‡½æ•°å¼ç»„ä»¶æ•è·äº†æ¸²æŸ“æ‰€ç”¨çš„å€¼ã€‚ï¼ˆFunction components capture the rendered values.ï¼‰ ä½œè€…æ˜¯ Dan Abramov , Facebook React æ ¸å¿ƒå¼€å‘ï¼ŒRedux ä½œè€… åšå®¢åœ°å€ https://overreacted.io/zh-hans/how-are-function-components-different-from-classes/ ","link":"https://ihopefulchina.github.io/dBAsSzkYF/"},{"title":"è·å–å½“å‰åˆ†ç±»ä¸‹çš„æ‰€æœ‰å­åˆ†ç±»","content":"ä¸€èˆ¬ç”¨äºtaxonomyåˆ†ç±»é¡µé¢ï¼Œæ¯”å¦‚äº§å“productsï¼Œä¸‹é¢æœ‰aè¿™ä¸ªåˆ†ç±»ï¼Œaä¸‹é¢æœ‰a-1,a-2,a-3... å¦‚ä½•åœ¨è¿›å…¥aåˆ†ç±»è¿™ä¸ªé¡µé¢çš„æ—¶å€™ï¼Œè¾“å‡ºè¿™ä¸ªaä¸‹é¢çš„å­åˆ†ç±»ï¼Ÿ è§£å†³æ€è·¯: 1.é¦–å…ˆé€šè¿‡get_categoriesè·å–æ‰€æœ‰åˆ†ç±»çš„slugå’Œid $test = get_categories(&quot;taxonomy=product&amp;hide_empty=0&quot;); $cats=array(); foreach($test as $tmpcat){ if($tmpcat-&gt;parent==0){ $cats[$tmpcat-&gt;term_id]['slug']=$tmpcat-&gt;slug; $cats[$tmpcat-&gt;term_id]['term_id']=$tmpcat-&gt;term_id; } } 3.ç„¶ååˆ‡å‰²åˆ†ç»„å½“å‰urlï¼Œåˆ¤æ–­slugæ˜¯å¦ç­‰äºå½“å‰çš„url $uri=explode('/',$_SERVER['REQUEST_URI']); 5.ç­‰äºçš„è¯ï¼Œå†æ ¹æ®get_categoriesåŠ ä¸Šchild_of=ï¼Œæœ€åforeachè¾“å‡ºæ‰€æœ‰åˆ†ç±»ã€‚ foreach($cats as $key=&gt;$val){ if($cats[$key]['slug']==$uri[2]){ $id = $cats[$key]['term_id']; $cate = get_categories(&quot;depth=0&amp;hide_empty=0&amp;title_li=&amp;orderby=ID&amp;order=ASC&amp;taxonomy=product&amp;child_of=$id&quot;); foreach ($cate as $key =&gt; $value) {?&gt; &lt;div class=&quot;swiper-slide&quot;&gt; &lt;li class=&quot;cat-item&lt;?php if($value-&gt;slug == $uri[3]){ echo ' current-cat';}?&gt;&quot;&gt;&lt;a href=&quot;/products/&lt;?php echo $uri[2];?&gt;/&lt;?php echo $value-&gt;slug; ?&gt;/&quot;&gt;&lt;?php echo $value-&gt;name;?&gt;&lt;/a&gt;&lt;/li&gt; &lt;/div&gt; &lt;?php } } } å®Œæ•´çš„ &lt;?php $test = get_categories(&quot;taxonomy=product&amp;hide_empty=0&quot;); $cats=array(); foreach($test as $tmpcat){ if($tmpcat-&gt;parent==0){ $cats[$tmpcat-&gt;term_id]['slug']=$tmpcat-&gt;slug; $cats[$tmpcat-&gt;term_id]['term_id']=$tmpcat-&gt;term_id; } } foreach($cats as $key=&gt;$val){ if($cats[$key]['slug']==$uri[2]){ $id = $cats[$key]['term_id']; $cate = get_categories(&quot;depth=0&amp;hide_empty=0&amp;title_li=&amp;orderby=ID&amp;order=ASC&amp;taxonomy=product&amp;child_of=$id&quot;); foreach ($cate as $key =&gt; $value) {?&gt; &lt;div class=&quot;swiper-slide&quot;&gt; &lt;li class=&quot;cat-item&lt;?php if($value-&gt;slug == $uri[3]){ echo ' current-cat';}?&gt;&quot;&gt;&lt;a href=&quot;/products/&lt;?php echo $uri[2];?&gt;/&lt;?php echo $value-&gt;slug; ?&gt;/&quot;&gt;&lt;?php echo $value-&gt;name;?&gt;&lt;/a&gt;&lt;/li&gt; &lt;/div&gt; &lt;?php } } } ?&gt; ","link":"https://ihopefulchina.github.io/huo-qu-dang-qian-fen-lei-xia-de-suo-you-zi-fen-lei/"},{"title":"å¦‚ä½•è§£å†³é¡µé¢/æ–‡ç« /è¯¦æƒ…é¡µéœ€è¦ä¸åŒæ ·å¼ã€æ¨¡æ¿çš„é—®é¢˜ï¼Ÿ","content":"é‡åˆ°ä¸€ä¸ªå®¢æˆ·ï¼Œä»–çš„éœ€æ±‚æ˜¯åœ¨äº§å“è¯¦æƒ…é¡µæœ‰5å¥—ä¸åŒçš„æ¨¡æ¿ï¼Œéœ€è¦åœ¨åå°è‡ªå·±å¯ä»¥é€‰æ‹©ä¸åŒæ¨¡æ¿ï¼Œå¡«å†™ä¸åŒçš„å†…å®¹ã€‚ ä¸€å¼€å§‹çŸ¥é“è¿™ä¸ªéœ€æ±‚å¾ˆæ‡µï¼Œåæ¥æˆ‘ç†æ¸…æ¥šäº†æ€è·¯ï¼Œè§£å†³äº†è¿™ä¸ªé—®é¢˜: é¦–å…ˆé€šè¿‡ACFæ’ä»¶Seclectçš„å•é€‰æŒ‰é’®ï¼Œå¡«å†™5ä¸ªå‚æ•° (æ³¨: å‚æ•°' : 'å‰åéœ€è¦æœ‰ç©ºæ ¼) é€šè¿‡ACFæ’ä»¶çš„ç»„æ¥å†™5ä¸ªæ¨¡æ¿(ç»„ä¸‹é¢å¡«å†™ä¸åŒçš„è‡ªå®šä¹‰å­—æ®µ) æ³¨: (1)éœ€è¦å¡«å†™åˆ¤æ–­(æ¡ä»¶é€»è¾‘) (2)å…¶ä¸­æ¯ä¸ªæ¨¡æ¿Groupé‡Œé¢çš„è¯´æ˜æœ€å¥½åŠ ä¸Šæ¨¡æ¿å›¾ç‰‡æ ·å¼ï¼Œä¾‹å¦‚&lt;img src=&quot;/wp-admin/images/sj.png&quot; width=&quot;50%&quot; height=&quot;auto&quot;&gt; è¿™ä¹ˆåšçš„ç›®çš„ï¼Œæ˜¯å®¢æˆ·çŸ¥é“è¿™æ˜¯å“ªä¸ªæ¨¡æ¿æ ·å¼ï¼Œå‘ˆç°çš„æ•ˆæœå¦‚ä¸‹ã€‚ 3.ç„¶ååˆ›å»º5ä¸ªphpï¼Œå‘½åè§„é¿pageï¼Œsingleç­‰ç­‰è‡ªå¸¦çš„å‘½åæ–¹å¼ï¼Œé‡Œé¢å¡«å†™å„è‡ªæ¨¡æ¿æ ·å¼å’Œå‚æ•°ã€‚ 5.æœ€ååœ¨single-products.phpé‡Œé¢ï¼ŒåŠ ä¸€ä¸ªåˆ¤æ–­: &lt;?php if( get_field('select') == 'one' ): ?&gt; &lt;?php include 'product-content1.php'; ?&gt; &lt;?php endif; ?&gt; &lt;?php if( get_field('select') == 'two' ): ?&gt; &lt;?php include 'product-content2.php'; ?&gt; &lt;?php endif; ?&gt; &lt;?php if( get_field('select') == 'three' ): ?&gt; &lt;?php include 'product-content3.php'; ?&gt; &lt;?php endif; ?&gt; &lt;?php if( get_field('select') == 'four' ): ?&gt; &lt;?php include 'product-content4.php'; ?&gt; &lt;?php endif; ?&gt; &lt;?php if( get_field('select') == 'five' ): ?&gt; &lt;?php include 'product-content5.php'; ?&gt; &lt;?php endif; ?&gt; å…¶ä¸­çš„oneï¼Œtwo... æ¥è‡ªACFæ’ä»¶Seclectçš„å•é€‰æŒ‰é’®å‰é¢çš„å‚æ•° ","link":"https://ihopefulchina.github.io/ru-he-jie-jue-ye-mian-wen-zhang-xiang-qing-ye-xu-yao-bu-tong-yang-shi-mo-ban-de-wen-ti/"},{"title":"ç•™è¨€è¡¨å•ã€æ”¯æŒé‚®ç®±è½¬å‘","content":"åŸºäºPHPæ­å»ºï¼Œç”¨äºWordpressçš„æ’ä»¶ é¡¹ç›®åœ°å€:https://github.com/ihopefulChina/Message (å·²è®¾ä¸ºç§æœ‰ï¼Œæ— æ³•è®¿é—®ï¼Œå¦‚æœæœ‰éœ€è¦è”ç³»:hpf784667332@gmail.com) åŠŸèƒ½ä»‹ç»: åå°æœ‰ç•™è¨€ç®¡ç†ï¼Œæ”¯æŒç•™è¨€åˆ é™¤ã€æ ‡è®°ã€‚ æ”¯æŒè¿‡è™‘åƒåœ¾ç•™è¨€ï¼ŒAkismet APIæä¾›APIæ”¯æŒã€‚ ç•™è¨€è‡ªåŠ¨è½¬å‘é‚®ç®±ï¼ŒæŠ„é€é‚®ç®±ã€‚ æ”¯æŒæŸ¥è¯¢å®¢æˆ·çš„IPåœ°å€ï¼Œæ ¹æ®IPåœ°å€æŸ¥æ‰¾å®¢æˆ·æ‰€åœ¨å›½å®¶ã€åœ°åŒºã€‚ æ”¯æŒå®¢æˆ·ç•™è¨€æ‰€åœ¨ç½‘å€ã€ç•™è¨€æ—¶é—´ã€è®¾å¤‡ä¿¡æ¯ç­‰ç­‰ã€‚ æ”¯æŒè‡ªå®šä¹‰è¡¨å•nameæ ‡ç­¾å†…å®¹ã€‚ ","link":"https://ihopefulchina.github.io/liu-yan-biao-dan-zhi-chi-you-xiang-zhuan-fa/"},{"title":"å¦‚ä½•è¾“å‡ºæ ¹æ®åˆ†ç±»ç½—åˆ—æ–‡ç« ï¼Œå½“å‰é¡µé¢é«˜äº®æ˜¾ç¤º","content":"æˆ‘ä¹‹å‰æœ‰å†™è¿‡ç±»ä¼¼è¿™ä¸ªåŠŸèƒ½ï¼Œè¿™æ¬¡å†™çš„å…¨ä¸€ç‚¹ï¼Œé«˜äº®æ˜¾ç¤ºå®ç°åŠŸèƒ½ä¹Ÿæ˜¯ç”¨åˆ°è¿™ä¸ª$uri=explode('/',$_SERVER['REQUEST_URI']); æˆ‘è´´ä¸€ä¸‹ä»£ç ï¼Œä½ ä»¬å¯ä»¥å‚è€ƒä¸€ä¸‹ï¼Œä¸ªäººæš‚æ—¶æœªæ‰¾åˆ°æ›´å¥½çš„æ–¹æ³•ï¼Œæœ‰ä»€ä¹ˆå¥½çš„æ–¹æ³•ï¼Œå¯ä»¥åœ¨ä¸‹é¢è¯„è®ºï¼Œæˆ‘ä»¬æ¢è®¨ä¸€ä¸‹ã€‚ $uri=explode('/',$_SERVER['REQUEST_URI']); &lt;?php $categories = get_categories(&quot;hierarchical=1&amp;taxonomy=video&amp;hide_empty=0&quot;); $cats=array(); foreach($categories as $tmpcat){ if($tmpcat-&gt;parent&gt;0){ $cats[$tmpcat-&gt;parent]['child'][$tmpcat-&gt;term_id]['name']=$tmpcat-&gt;name; $cats[$tmpcat-&gt;parent]['child'][$tmpcat-&gt;term_id]['term_id']=$tmpcat-&gt;term_id; }else{ $cats[$tmpcat-&gt;term_id]['name']=$tmpcat-&gt;name; $cats[$tmpcat-&gt;term_id]['term_id']=$tmpcat-&gt;term_id; } } ksort($cats); foreach($cats as $key=&gt;$val){?&gt; &lt;li class=&quot;cat-item&quot;&gt; &lt;i class=&quot;fas fa-angle-down&quot;&gt;&lt;/i&gt;&lt;a&gt;&lt;?php echo $val[&quot;name&quot;]; ?&gt;&lt;/a&gt; &lt;ul class=&quot;children&quot;&gt; &lt;?php foreach($val[&quot;child&quot;] as $cat){ ?&gt; &lt;li class=&quot;cat-item&quot;&gt; &lt;a&lt;?php if (ucwords(str_replace('-',' ',$uri[3])) == $cat[&quot;name&quot;] ) {echo ' class=&quot;opeth&quot;';}?&gt;&gt;&lt;?php echo $cat[&quot;name&quot;]; ?&gt;&lt;/a&gt; &lt;?php $posts_array = get_posts( array( 'posts_per_page' =&gt; 3, 'post_type' =&gt; 'videos', 'tax_query' =&gt; array( array( 'taxonomy' =&gt; 'video', 'field' =&gt; 'term_id', 'terms' =&gt; $cat['term_id'], ) ) ) ); if ($posts_array){?&gt; &lt;ul class=&quot;children&quot;&gt; &lt;?php foreach( $posts_array as $post ){ $youtube = substr(basename(get_field('add_link')),8); $a = substr(strrchr(rtrim(get_permalink(), '/'), '/'), 1);?&gt; &lt;li&lt;?php if ($uri[4] == $a ) {echo ' class=&quot;opeth&quot;';} ?&gt;&gt; &lt;div class=&quot;list-video&quot;&gt; &lt;div class=&quot;col-md-4&quot;&gt; &lt;iframe width=&quot;100%&quot; height=&quot;45px&quot; src=&quot;https://www.youtube.com/embed/&lt;?php echo $youtube;?&gt;&quot; frameborder=&quot;0&quot; showinfo=&quot;0&quot;&gt;&lt;/iframe&gt; &lt;/div&gt; &lt;div class=&quot;col-md-8&quot;&gt; &lt;a href=&quot;&lt;?php echo get_permalink(); ?&gt;&quot;&gt;&lt;?php echo get_the_title(); ?&gt;&lt;/a&gt; &lt;/div&gt; &lt;div class=&quot;clearfix&quot;&gt;&lt;/div&gt; &lt;/div&gt; &lt;/li&gt; &lt;?php } ?&gt; &lt;/ul&gt; &lt;?php } ?&gt; &lt;/li&gt; &lt;?php } ?&gt; &lt;/ul&gt; &lt;/li&gt; &lt;?php } ?&gt; ","link":"https://ihopefulchina.github.io/ru-he-shu-chu-gen-ju-fen-lei-luo-lie-wen-zhang-dang-qian-ye-mian-gao-liang-xian-shi/"},{"title":"å¦‚ä½•ç”¨TAGæ–¹å¼ä¸²è”è‡ªå®šä¹‰åˆ†ç±»(å®ç°ç›¸å…³æ–‡ç« ä¸²è”åŠŸèƒ½)","content":"é‡åˆ°è¿‡ä¸€ä¸ªå¥‡è‘©çš„å®¢æˆ·ï¼Œè®©æˆ‘é€šè¿‡TAGçš„æ–¹å¼ï¼Œè·å–è‡ªå®šä¹‰åˆ†ç±»çš„ç›¸å…³æ–‡ç« ã€‚ ä¾‹å¦‚:æŸäº§å“å†™äº†aè¿™ä¸ªtagæ ‡ç­¾ï¼ŒæŸæ–°é—»ã€æ¡ˆä¾‹ã€åº”ç”¨ç­‰ç­‰éƒ½æœ‰ä¸€ä¸ªä¸€æ ·æ˜¯aæ ‡ç­¾ï¼Œç„¶åå¦‚ä½•åœ¨è¿™ä¸ªäº§å“è¯¦æƒ…é¡µï¼Œè¾“å‡ºå«æœ‰aæ ‡ç­¾çš„ç›¸å…³æ–°é—»ã€ç›¸å…³æ¡ˆä¾‹ã€ç›¸å…³åº”ç”¨ç­‰ç­‰ã€‚ æœ€åå¦‚æœæ²¡æœ‰è¿™ä¸ªæ ‡ç­¾çš„è¯ï¼Œåå°æœ‰é€šè¿‡æ‰‹åŠ¨æ·»åŠ åŠŸèƒ½å¡«å†™ å¬åˆ°è¿™é‡Œä¼°è®¡å¤§å®¶éƒ½è’™äº†ï¼ŒWordprssä¸æ”¯æŒè¿™ä¸ªåŠŸèƒ½ï¼Œæ²¡æœ‰æ’ä»¶æ”¯æŒè¿™ä¸ªåŠŸèƒ½ï¼Œç»è¿‡ä¸€ç³»åˆ—æ‘¸ç´¢ï¼Œæˆ‘è§£å†³äº†è¿™ä¸ªé—®é¢˜ï¼Œè¿™é‡Œç»™å¤§å®¶è§£å†³æ€è·¯ã€‚ é¦–å…ˆåœ¨è‡ªå®šä¹‰åˆ†ç±»æ·»åŠ tagæ ‡ç­¾'taxonomies' =&gt; array('post_tag')ï¼Œå®˜æ–¹æ–‡æ¡£ã€‚ æ·»åŠ å®Œæˆåï¼Œéœ€è¦ç”¨åˆ°ACFæ’ä»¶çš„å…³ç³»ï¼Œè¿™ä¸ªæ˜¯å¦‚æœæ²¡æœ‰è¿™ä¸ªæ ‡ç­¾çš„è¯ï¼Œåå°æœ‰é€šè¿‡æ‰‹åŠ¨æ·»åŠ åŠŸèƒ½å¡«å†™åŠŸèƒ½ 3.åœ¨å‰å°å¡«å†™åˆ¤æ–­ï¼Œå¦‚æœACFå…³ç³»çš„å€¼ä¸ºç©ºçš„è¯ï¼Œè¾“å‡ºæ ‡ç­¾ä¸²è”çš„ç›¸å…³æ–‡ç« ï¼Œä¸ä¸ºç©ºçš„è¯ï¼Œä¸ºæ‰‹åŠ¨æ·»åŠ çš„ç›¸å…³æ–‡ç« ã€‚ Demo: &lt;?php /** * Related Applications */ $posts = get_field('related-applications'); if( $posts ): ?&gt; &lt;div class=&quot;product_details_left_applications product_details_left_standards&quot;&gt; &lt;div class=&quot;product_details_left_applications_title&quot;&gt;Related Applications&lt;/div&gt; &lt;div class=&quot;clear&quot;&gt;&lt;/div&gt; &lt;?php foreach( $posts as $id ): $image = get_field('application-image',$id); if(empty($image)) $image['sizes']['thumbnail']='/wp-content/themes/lisun/img/default-100x100.jpg'; ?&gt; &lt;div class=&quot;product_details_left_applications_list&quot;&gt; &lt;div class=&quot;product_details_left_applications_list_left&quot;&gt; &lt;img src=&quot;&lt;?php echo $image['sizes']['thumbnail']; ?&gt;&quot;/&gt; &lt;/div&gt; &lt;div class=&quot;product_details_left_applications_list_right&quot;&gt; &lt;a href=&quot;&lt;?php echo get_the_permalink($id); ?&gt;&quot;&gt;&lt;i class=&quot;fas fa-chevron-right&quot;&gt;&lt;/i&gt;&lt;?php echo get_the_title($id); ?&gt;&lt;/a&gt; &lt;/div&gt; &lt;div class=&quot;clear&quot;&gt;&lt;/div&gt; &lt;/div&gt;&lt;?php endforeach; ?&gt; &lt;/div&gt; &lt;?php else: $args = array( 'posts_per_page' =&gt; 5, 'post_type' =&gt; 'applications', 'tax_query' =&gt; array( array( 'taxonomy' =&gt; 'post_tag', 'field' =&gt; 'slug', 'terms' =&gt; $tags, ) ) ); $posts = get_posts( $args );if($posts): ?&gt; &lt;div class=&quot;product_details_left_applications product_details_left_standards&quot;&gt; &lt;div class=&quot;product_details_left_applications_title&quot;&gt;Related Applications&lt;/div&gt; &lt;div class=&quot;clear&quot;&gt;&lt;/div&gt; &lt;?php foreach( $posts as $post ): $image = get_field('application-image',$post-&gt;ID); if(empty($image)) $image['sizes']['thumbnail']='/wp-content/themes/lisun/img/default-100x100.jpg'; ?&gt; &lt;div class=&quot;product_details_left_applications_list&quot;&gt; &lt;div class=&quot;product_details_left_applications_list_left&quot;&gt; &lt;img src=&quot;&lt;?php echo $image['sizes']['thumbnail']; ?&gt;&quot;/&gt; &lt;/div&gt; &lt;div class=&quot;product_details_left_applications_list_right&quot;&gt; &lt;a href=&quot;&lt;?php the_permalink(); ?&gt;&quot;&gt;&lt;i class=&quot;fas fa-chevron-right&quot;&gt;&lt;/i&gt;&lt;?php the_title(); ?&gt;&lt;/a&gt; &lt;/div&gt; &lt;div class=&quot;clear&quot;&gt;&lt;/div&gt; &lt;/div&gt;&lt;?php endforeach; wp_reset_postdata(); ?&gt; &lt;/div&gt;&lt;?php endif; endif; ?&gt; ä»¥ä¸Šä»£ç éœ€è¦æ‡‚ç‚¹PHPå’ŒWordpressï¼Œæœ‰ç–‘é—®ï¼Œå¯ä»¥è”ç³»æˆ‘ã€‚ ","link":"https://ihopefulchina.github.io/ru-he-yong-tag-fang-shi-chuan-lian-zi-ding-yi-fen-lei-shi-xian-xiang-guan-wen-zhang-chuan-lian-gong-neng/"},{"title":"é¡µé¢å®ç°ç±»ä¼¼äºæ·˜å®çš„å›¾çª—åŠŸèƒ½","content":"è§£å†³æ€è·¯: å‰å°çš„åŠŸèƒ½é€šè¿‡JSæ’ä»¶å®ç°ã€‚ å›¾ç‰‡è·å–é€šè¿‡è‡ªå®šä¹‰å­—æ®µåŠŸèƒ½è·å–ã€‚ éœ€è¦ç”¨åˆ°ACFæ’ä»¶çš„é‡å¤å™¨å’ŒSwiper.js &lt;div class=&quot;swiper-container gallery-top&quot;&gt; &lt;div class=&quot;swiper-wrapper&quot;&gt; &lt;?php if( have_rows('product_photo',$post-&gt;ID) ): while ( have_rows('product_photo',$post-&gt;ID) ) : the_row(); $image = get_sub_field('product_photo'); echo '&lt;div class=&quot;swiper-slide&quot;&gt;&lt;img src=&quot;'.$image['sizes']['large'].'&quot; alt=&quot;'.$image['title'].'&quot; /&gt;&lt;/div&gt;'; endwhile; endif; ?&gt; &lt;/div&gt; &lt;/div&gt; &lt;div class=&quot;gallery-thumb&quot;&gt; &lt;div class=&quot;swiper-container gallery-thumbs&quot;&gt; &lt;div class=&quot;swiper-wrapper&quot;&gt; &lt;?php if( have_rows('product_photo',$post-&gt;ID) ): while ( have_rows('product_photo',$post-&gt;ID) ) : the_row(); $image = get_sub_field('product_photo'); echo '&lt;div class=&quot;swiper-slide&quot;&gt;&lt;img src=&quot;'.$image['sizes']['thumbnail'].'&quot; alt=&quot;'.$image['title'].'&quot; /&gt;&lt;/div&gt;'; endwhile; endif; ?&gt; &lt;/div&gt; &lt;/div&gt; &lt;div class=&quot;product-button-next&quot;&gt;&lt;i class=&quot;fa fa-angle-right&quot;&gt;&lt;/i&gt;&lt;/div&gt; &lt;div class=&quot;product-button-prev&quot;&gt;&lt;i class=&quot;fa fa-angle-left&quot;&gt;&lt;/i&gt;&lt;/div&gt; &lt;/div&gt; JSéƒ¨åˆ† //äº§å“è¯¦æƒ…é¡µäº§å“å›¾ var galleryTop = new Swiper('.gallery-top', { spaceBetween: 10, autoplay: 4000, autoHeight: true, observer: true, observeParents: true, }); var galleryThumbs = new Swiper('.gallery-thumbs', { spaceBetween: 10, centeredSlides: true, slidesPerView: 4, touchRatio: 0.2, slideToClickedSlide: true, autoHeight: true, observer: true, observeParents: true, nextButton: '.product-button-next', prevButton: '.product-button-prev', }); ","link":"https://ihopefulchina.github.io/ye-mian-shi-xian-lei-si-yu-tao-bao-de-tu-chuang-gong-neng/"},{"title":"åœ¨éå½“å‰é¡µé¢è·å–æŒ‡å®šå¤šä¸ªè‡ªå®šä¹‰åˆ†ç±»ä¸‹çš„æ–‡ç« ","content":"åœ¨éå½“å‰é¡µé¢ï¼Œæˆ‘ä»¬è·å–æŒ‡å®šåˆ†ç±»å°±æœ‰ç‚¹å›°éš¾ï¼ŒACFæ’ä»¶èƒ½è§£å†³è¿™ä¸ªé—®é¢˜ï¼ŒACFæ’ä»¶æ˜¯æˆ‘æœ€å¸¸ç”¨çš„æ’ä»¶,ç”¨ACFæ’ä»¶å®šä¹‰ä¸€ä¸ªçœŸå‡æŒ‰é’®ï¼Œç„¶ååˆ¤æ–­å³å¯ï¼Œä»¥ä¸‹ä¸ºDemoã€‚ ä»…ä¾›å‚è€ƒï¼ˆæä¾›ä¸€ç§æ€è·¯ï¼‰ &lt;?php $args=array( 'order' =&gt; 'ASC', //é¡ºåº 'numberposts' =&gt; -1, 'post_type' =&gt; 'products', 'meta_key' =&gt; 'product_btn',// ACF æ’ä»¶å®šä¹‰ä¸€ä¸ªçœŸå‡æŒ‰é’® 'meta_value' =&gt; '1',// 1ä¸ºçœŸï¼Œ0ä¸ºå‡ 'posts_per_page'=&gt;-1, ); $arms = array_merge($args, $wp_query-&gt;query); query_posts($arms)?&gt; &lt;?php if (have_posts()) : ?&gt; &lt;?php while (have_posts()) : the_post(); ?&gt; &lt;div class=&quot;swiper-slide&quot;&gt; &lt;?php // ç”¨äºå›¾ç‰‡ä½¿ç”¨ACFé‡å¤å™¨çš„æ—¶å€™ï¼Œè·å–ç¬¬ä¸€å¼ å›¾ç‰‡ if( have_rows('product_photo',$post-&gt;ID) ): while ( have_rows('product_photo',$post-&gt;ID) ) : the_row(); $image = get_sub_field('product_photo'); echo '&lt;img src=&quot;'.$image['sizes']['medium'].'&quot; alt=&quot;'.$image['title'].'&quot; /&gt;'; break; endwhile; endif; ?&gt; &lt;a class=&quot;product-title&quot; href=&quot;&lt;?php the_permalink(); ?&gt;&quot;&gt;&lt;?php the_title(); ?&gt;&lt;/a&gt; &lt;/div&gt; &lt;/div&gt; &lt;?php endwhile; ?&gt; &lt;?php endif; wp_reset_query();?&gt; ","link":"https://ihopefulchina.github.io/zai-fei-dang-qian-ye-mian-huo-qu-zhi-ding-duo-ge-zi-ding-yi-fen-lei-xia-de-wen-zhang/"},{"title":"è·å–æŒ‡å®šåˆ†ç±»çš„æ‰€æœ‰å­åˆ†ç±»é“¾æ¥ã€Descriptionã€Slugã€è‡ªå®šä¹‰å­—æ®µ","content":"Wordpresså¾ˆéš¾è·å–æŒ‡å®šåˆ†ç±»ä¸‹çš„æ‰€æœ‰å­åˆ†ç±»ã€‚è¿™éœ€è¦æˆ‘ä»¬ç»•è·¯è·å–ã€‚ ä»¥ä¸‹çš„æ–¹æ³•é€‚ç”¨äºä»»ä½•é¡µé¢æ¥è·å–æ‰€æœ‰å­åˆ†ç±»ï¼Œä»…ä¾›å‚è€ƒï¼Œå¦‚æœä¸æ‡‚ï¼Œå¯ä»¥è”ç³»æˆ‘ï¼Œæˆ–è€…å¤šçœ‹å‡ éå®˜æ–¹æ–‡æ¡£ã€‚ åˆ†ç±»çš„æ ‡é¢˜ã€Descriptionã€Slugæ˜¯Wordpressè‡ªå¸¦å‡½æ•°å¯ä»¥ç›´æ¥è·å–ï¼Œè‡ªå®šä¹‰å­—æ®µå’Œé“¾æ¥éœ€è¦é€šè¿‡IDçš„æ–¹å¼è·å–ã€‚ Demo &lt;?php $test = get_categories(&quot;taxonomy=product&amp;hide_empty=0&quot;); $cats=array(); foreach($test as $tmpcat){ if($tmpcat-&gt;parent==0){ $cats[$tmpcat-&gt;term_id]['name']=$tmpcat-&gt;name; $cats[$tmpcat-&gt;term_id]['slug']=$tmpcat-&gt;slug; $cats[$tmpcat-&gt;term_id]['term_id']=$tmpcat-&gt;term_id; $cats[$tmpcat-&gt;term_id]['description']=$tmpcat-&gt;description; } } ksort($cats); foreach($cats as $key=&gt;$val){ $id = 'term_'.$cats[$key]['term_id']; ?&gt; &lt;div class=&quot;swiper-slide product-content&quot;&gt; &lt;div class=&quot;element-item&quot;&gt; &lt;img src=&quot;&lt;?php echo get_field('products_cate_img', $id); ?&gt;&quot; alt=&quot;&lt;?php echo $cats[$key]['name']; ?&gt;&quot; width=&quot;400&quot; height=&quot;300&quot;&gt; &lt;div class=&quot;content&quot;&gt; &lt;a href=&quot;/products/&lt;?php echo $cats[$key]['slug']; ?&gt;/&quot;&gt;&lt;?php echo $cats[$key]['name']; ?&gt;&lt;/a&gt; &lt;/div&gt; &lt;/div&gt; &lt;p class=&quot;product-cate-des&quot;&gt;&lt;?php echo $cats[$key]['description']; ?&gt;&lt;/p&gt; &lt;a class=&quot;product-more&quot; href=&quot;/products/&lt;?php echo $cats[$key]['slug']; ?&gt;/&quot;&gt;VIEW MORE&lt;/a&gt; &lt;/div&gt; &lt;?php } ?&gt; ","link":"https://ihopefulchina.github.io/huo-qu-zhi-ding-fen-lei-de-suo-you-zi-fen-lei-lian-jie-descriptionslugzi-ding-yi-zi-duan/"},{"title":"è§£å†³Wordpressè‡ªå®šä¹‰äºŒçº§ç›®å½•å’Œä¸‰çº§ç›®å½•é‡‡ç”¨ä¸åŒçš„æ ·å¼","content":"Wordpressè‡ªå®šä¹‰åˆ†ç±»ç»“æ„é‡‡ç”¨çš„æ˜¯archive-&gt;taxonomy-&gt;single,å…¶ä¸­archiveæ˜¯è‡ªå®šä¹‰åˆ†ç±»çš„æ€»é¡µé¢ï¼Œtaxonomyæ˜¯å­åˆ†ç±»ï¼Œå­åˆ†ç±»çš„ä¸‹é¢åˆ†ç±»ï¼Œsingleæ˜¯è‡ªå®šä¹‰åˆ†ç±»ä¸‹çš„æ–‡ç« ã€‚ å±‚çº§å¾ˆæ¸…æ™°ï¼Œä½†æœ‰ä¸€ä¸ªé—®é¢˜ï¼Œå¦‚æœäºŒçº§ç›®å½•å’Œä¸‰çº§ç›®å½•é‡‡ç”¨ä¸åŒçš„æ ·å¼(taxonomyé¡µé¢)ï¼Œæ€ä¹ˆåŠï¼Ÿ å…¶å®å¾ˆå¥½è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬éœ€è¦ç†æ¸…æ€è·¯ã€‚ é‡‡ç”¨ifè¯­å¥åˆ¤æ–­æ˜¯äºŒçº§ç›®å½•è¿˜æ˜¯ä¸‰çº§ç›®å½•ï¼Œä½¿ç”¨$uri=explode('/',$_SERVER['REQUEST_URI']);æ¥åˆ‡å‰²urlï¼Œç„¶ååˆ¤æ–­ã€‚ åœ¨ä¸åŒé€»è¾‘é‡‡ç”¨ä¸åŒæ ·å¼ã€‚ $uri=explode('/',$_SERVER['REQUEST_URI']); &lt;?php if(isset($uri['4'])){?&gt; /*è¿™é‡Œè¾“å‡ºä¸‰çº§ç›®å½•çš„æ ·å¼ else{ /*è¿™é‡Œè¾“å‡ºé™¤äº†ä¸‰çº§ç›®å½•çš„æ ·å¼ } ä»¥ä¸Šåªæ˜¯ä¸€ç§å†™æ³•ï¼Œå½“ç„¶ï¼Œå¯ä»¥å†™æˆif..elseif..else,ç­‰ç­‰æ¥åˆ¤æ–­ã€‚ ","link":"https://ihopefulchina.github.io/jie-jue-wordpress-zi-ding-yi-er-ji-mu-lu-he-san-ji-mu-lu-cai-yong-bu-tong-de-yang-shi/"},{"title":"Wordpresså¦‚ä½•æ·»åŠ é¡¶çº§èœå•ï¼Œå’Œç§»é™¤ã€éšè—é¡¶çº§èœå•ï¼Ÿ","content":"Wordpressåå°æœ‰å¾ˆå¤šæˆ‘ä»¬å¿…é¡»è¦çš„åŠŸèƒ½ï¼Œå®¢æˆ·ä¼šè¯¯ç‚¹ç­‰ä¹‹ç±»çš„åŸå› ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦éšè—ä¸€äº›è‡ªå®šä¹‰èœå•ï¼Œä½†æ˜¯éšè—é¡¶çº§èœå•ï¼Œå¯èƒ½ä¸‹é¢æŸä¸€ä¸ªå­èœå•æ˜¯æˆ‘ä»¬éœ€è¦çš„ã€‚ é¦–å…ˆæˆ‘ä»¬å…ˆéšè—èœå•ï¼Œè¿™é‡Œåˆ†ä¸º2ç§éšè—ï¼Œä¸€ç§æ˜¯è‡ªå¸¦çš„ï¼Œ éšè—è‡ªå¸¦çš„å†™è¿™æ®µå‡½æ•°å³å¯ show_admin_bar(false); add_filter('show_admin_bar', '__return_false'); //å…³é—­åå°èœå•å’Œåˆ é™¤wordpressè‡ªå¸¦ä¸€äº›åŠŸèƒ½ //__('Dashboard') ï¼š æ§åˆ¶æ¿èœå• //__('Posts') ï¼š æ–‡ç«  //__('Media') ï¼š åª’ä½“ //__('Links') ï¼š é“¾æ¥ //__('Pages') ï¼š é¡µé¢ //__('Comments') ï¼š è¯„è®º //__('Appearance') ï¼š å¤–è§‚ //__('Plugins') ï¼š æ’ä»¶ //__('Users') ï¼š ç”¨æˆ· //__('Tools') ï¼š å·¥å…· //__('Settings') ï¼š è®¾ç½® remove_action('welcome_panel', 'wp_welcome_panel'); function remove_menus() { global $menu; $restricted = array( __('Posts'), __('Links'), __('Comments'), __('Dashboard'), __('Tools'), __('Appearance'), __('Plugins') , // __('Pages'), __('Users'), __('Settings') ); end ($menu); while (prev($menu)){ $value = explode(' ',$menu[key($menu)][0]); if(strpos($value[0], '&lt;') === FALSE) { if(in_array($value[0] != NULL ? $value[0]:&quot;&quot; , $restricted)){ unset($menu[key($menu)]); } }else { $value2 = explode('&lt;', $value[0]); if(in_array($value2[0] != NULL ? $value2[0]:&quot;&quot; , $restricted)){ unset($menu[key($menu)]); } } } } if (is_admin()){ add_action('admin_menu', 'remove_menus'); } function wp_hide_nag() { remove_action( 'admin_notices', 'update_nag', 3 ); } add_action('admin_menu','wp_hide_nag'); å¯ä»¥é€‰æ‹©éšè—å“ªäº›èœå•ï¼Œä¸Šé¢æœ‰æç¤ºï¼Œä¿®æ”¹å³å¯ã€‚ å¦å¤–ä¸€ç§æ˜¯éšè—ç¬¬ä¸‰æ–¹çš„èœå•: function hide_edit_menu() { remove_menu_page('edit.php?post_type=acf-field-group'); } add_action('admin_menu', 'hide_edit_menu', 999); ä¿®æ”¹é‡Œé¢çš„URL'edit.php?post_type=acf-field-group' å³å¯ã€‚ ç„¶åæ˜¯å¦‚ä½•æ·»åŠ é¡¶çº§èœå•ï¼Œè¿™é‡Œå·²æ·»åŠ å¯¼èˆªæ èœå•ä¸ºä¾‹ã€‚ add_action('admin_menu', 'register_custom_menu_page'); function register_custom_menu_page() { add_menu_page('è‡ªå®šä¹‰èœå•æ ‡é¢˜', 'å¯¼èˆªæ èœå•', 'administrator', '/nav-menus.php','', 'dashicons-admin-links', 20); } ä¿®æ”¹titleå’ŒURLå³å¯ã€‚ ","link":"https://ihopefulchina.github.io/wordpress-ru-he-tian-jia-ding-ji-cai-dan-he-yi-chu-yin-cang-ding-ji-cai-dan/"},{"title":"ç§»é™¤ã€éšè—ã€åˆ é™¤Wordpresä¸€äº›å°å·¥å…·å’ŒåŠŸèƒ½","content":"Wordpress æœ‰äº›åŠŸèƒ½ä¸é€‚ç”¨å®šåˆ¶ç«™(å®¢æˆ·å¯èƒ½ä¼šä¹±ç‚¹åˆ°)ï¼Œæ‰€ä»¥éœ€è¦éšè—æ‰ï¼Œæ¯”å¦‚é¡¶éƒ¨å·¥å…·æ ã€‚ ç§»é™¤é¡¶éƒ¨å·¥å…·æ â€œæ–°å»ºâ€æŒ‰é’® function disable_new_content() { global $wp_admin_bar; $wp_admin_bar-&gt;remove_menu('new-content'); } add_action( 'wp_before_admin_bar_render', 'disable_new_content' ); 2.ç§»é™¤é¡¶éƒ¨å·¥å…·æ ä¸Šçš„è¯„è®ºæç¤º function remove_comment_bubble() { global $wp_admin_bar; $wp_admin_bar-&gt;remove_menu('comments'); } add_action( 'wp_before_admin_bar_render', 'remove_comment_bubble' ); 3.éšè—æ˜¾ç¤ºé€‰é¡¹å’Œå¸®åŠ© function remove_screen_options(){ return false;} add_filter('screen_options_show_screen', 'remove_screen_options'); add_filter( 'contextual_help', 'wpse50723_remove_help', 999, 3 ); function wpse50723_remove_help($old_help, $screen_id, $screen){ $screen-&gt;remove_help_tabs(); return $old_help; } ç­‰ç­‰ï¼Œä»¥ä¸Šå¾ˆå¤šåŠŸèƒ½å¯ä»¥é€‰æ‹©åŠ ä¸Šã€‚ ","link":"https://ihopefulchina.github.io/yi-chu-yin-cang-shan-chu-wordpres-yi-xie-xiao-gong-ju-he-gong-neng/"},{"title":"éšè—ã€ç¦æ­¢ã€åˆ é™¤Wordpressè‡ªå¸¦çš„æ›´æ–°å’Œä»ªè¡¨ç›˜","content":"Wordpress æ›´æ–°æœ‰ç‚¹é¢‘ç¹ï¼Œæœ€æ¶å¿ƒçš„åœ°æ–¹æ˜¯ï¼Œä¸€æ—¦æ›´æ–°ï¼Œå¾ˆå¤šä¸œè¥¿éƒ½å·²ç»æ²¡æœ‰äº†ï¼Œæ‰€ä»¥æœ€å¥½ç¦æ­¢wordpressæ›´æ–°ï¼Œä»ªè¡¨ç›˜æˆ‘ä¸ªäººä¸å–œæ¬¢å®ƒï¼Œæ‰€ä»¥éšè—ï¼Œçœ‹å®˜ä»¬å¯ä»¥é€‰æ‹©ä¿ç•™ function example_remove_dashboard_widgets() { // Globalize the metaboxes array, this holds all the widgets for wp-admin global $wp_meta_boxes; unset($wp_meta_boxes['dashboard']['normal']['core']['dashboard_activity']); unset($wp_meta_boxes['dashboard']['normal']['core']['dashboard_right_now']); unset($wp_meta_boxes['dashboard']['normal']['core']['dashboard_recent_comments']); unset($wp_meta_boxes['dashboard']['normal']['core']['dashboard_incoming_links']); unset($wp_meta_boxes['dashboard']['normal']['core']['dashboard_plugins']); unset($wp_meta_boxes['dashboard']['side']['core']['dashboard_primary']); unset($wp_meta_boxes['dashboard']['side']['core']['dashboard_secondary']); unset($wp_meta_boxes['dashboard']['side']['core']['dashboard_quick_press']); unset($wp_meta_boxes['dashboard']['side']['core']['dashboard_recent_drafts']); } add_action('wp_dashboard_setup', 'example_remove_dashboard_widgets' ); function change_footer_admin () {return '';} add_filter('admin_footer_text', 'change_footer_admin', 9999); function change_footer_version() {return '';} add_filter( 'update_footer', 'change_footer_version', 9999); function annointed_admin_bar_remove() { global $wp_admin_bar; /* Remove their stuff */ $wp_admin_bar-&gt;remove_menu('wp-logo'); } add_action('wp_before_admin_bar_render', 'annointed_admin_bar_remove', 0); add_filter('admin_title', 'wpdx_custom_admin_title', 10, 2); function wpdx_custom_admin_title($admin_title, $title){ return $title.' &amp;lsaquo; '.' è¿™é‡Œå¯ä»¥å¡«å†™titleåå­—'; } add_filter('pre_site_transient_update_core', create_function('$a', &quot;return null;&quot;)); // å…³é—­æ ¸å¿ƒæç¤º add_filter('pre_site_transient_update_plugins', create_function('$a', &quot;return null;&quot;)); // å…³é—­æ’ä»¶æç¤º add_filter('pre_site_transient_update_themes', create_function('$a', &quot;return null;&quot;)); // å…³é—­ä¸»é¢˜æç¤º add_filter( 'automatic_updater_disabled', '__return_true' );//ç¦æ­¢è‡ªåŠ¨æ›´æ–° remove_action('admin_init', '_maybe_update_core'); // ç¦æ­¢æ£€æŸ¥æ›´æ–° remove_action('admin_init', '_maybe_update_plugins'); // ç¦æ­¢æ›´æ–°æ’ä»¶ remove_action('admin_init', '_maybe_update_themes'); // ç¦æ­¢æ›´æ–°ä¸»é¢˜ add_filter( 'wpcf7_validate_configuration', '__return_false' ); add_filter( 'post_thumbnail_html', 'remove_width_attribute', 10 ); ç”¨ä¸Šå‡½æ•°åŒ…å«éšè—ã€ç¦æ­¢ã€åˆ é™¤Wordpressè‡ªå¸¦çš„æ›´æ–°å’Œä»ªè¡¨ç›˜ï¼Œè¿˜æœ‰ä¿®æ”¹titleåå­— ","link":"https://ihopefulchina.github.io/yin-cang-jin-zhi-shan-chu-wordpress-zi-dai-de-geng-xin-he-yi-biao-pan/"},{"title":"ç¦æ­¢åˆ é™¤æŸäº›é¡µé¢","content":"Wordpressçš„é¡µé¢ï¼Œå¾ˆå¤šæ˜¯ç½‘ç«™æ„å»ºé‡è¦ç»„æˆéƒ¨åˆ†ã€ç½‘ç«™çš„åŸºæœ¬æ¡†æ¶ï¼Œæœ‰éƒ¨åˆ†å®¢æˆ·æ‰‹è´±/ä¸å°å¿ƒåˆ é™¤æ‰é¡µé¢ï¼Œå¯¼è‡´é¡µé¢éœ€è¦é‡æ–°æŒ‚ä¸Šã€‚ é‡æ–°æŒ‚ä¸Šï¼Œéš¾ä¿å®¢æˆ·ç»§ç»­åˆ é™¤æ‰ï¼Œæ‰€ä»¥ï¼Œéœ€è¦ç¦æ­¢åˆ é™¤æŸäº›é¡µé¢ã€‚ /*ç¦æ­¢åˆ é™¤ç‰¹å®šçš„é¡µé¢å‡½æ•°*/ function prevent_post_deletion($postid){//ä¿æŠ¤æŸäº›é¡µé¢ä¸è¢«åˆ é™¤ $protected_post_id = array(101,90,87,307,333,309);//æŒ‡å®šé¡µé¢ID if (in_array($postid,$protected_post_id)) { exit('æ‚¨è¦åˆ é™¤çš„é¡µé¢ä¸ºç½‘ç«™åŸºæœ¬æ¡†æ¶ï¼Œä¸èƒ½åˆ é™¤ï¼Œè¯·ç‚¹å‡»æµè§ˆå™¨çš„åé€€é”®è¿›è¡Œç¼–è¾‘ã€‚'); } } add_action('wp_trash_post', 'prevent_post_deletion'); æ³¨é‡Šå·²è¯¦è§£æ„æ€ï¼Œéœ€è¦ä¿®æ”¹çš„æ˜¯é¡µé¢çš„IDï¼Œé¡µé¢IDè·å–æ–¹æ³•å¾ˆç®€å•ï¼Œä½†åå°æ‰€åœ¨é¡µé¢çš„URLå°±èƒ½çœ‹åˆ°ã€‚ ","link":"https://ihopefulchina.github.io/jin-zhi-shan-chu-mou-xie-ye-mian/"},{"title":"å¦‚ä½•åœ¨å¯¼èˆªæ æ·»åŠ å›¾ç‰‡ï¼Ÿ","content":"å¾ˆå¤šå®¢æˆ·æœ‰åœ¨å¯¼èˆªæ æ·»åŠ äº§å“å›¾ç‰‡çš„éœ€æ±‚ï¼ŒWordpressä¸æ”¯æŒè¿™ä¸€é¡¹ï¼Œéœ€è¦æˆ‘ä»¬å»åˆ›å»ºå’Œè‡ªå®šä¹‰ã€‚ functionå‡½æ•°æ·»åŠ è¿™ä¸ªå³å¯ add_filter('wp_nav_menu_objects', 'my_wp_nav_menu_objects', 10, 2); function my_wp_nav_menu_objects( $items, $args ) { foreach( $items as &amp;$item ) { $img = get_field('nav_product', $item); if( $img ) { $item-&gt;title = '&lt;img src=&quot;'.$img.'&quot;&gt;'.$item-&gt;title; } } return $items; } å…¶ä¸­ $item-&gt;title = '&lt;img src=&quot;'.$img.'&quot;&gt;'.$item-&gt;title;æ„æ€æ˜¯åœ¨titleæ·»åŠ å›¾ç‰‡ï¼Œimgæ¥ç€img æ¥ç€imgæ¥ç€img = get_field('nav_product', $item);ï¼Œè¿™ä¸ªæ˜¯ACFæ’ä»¶åˆ›å»ºçš„è‡ªå®šä¹‰åˆ†ç±» å‰å°header.phpé‡Œé¢çš„å¯¼èˆªæ  ä¸éœ€è¦ä¿®æ”¹ä»»ä½•åœ°æ–¹ï¼Œå› ä¸ºå·²ç»æ³¨å…¥äº†å›¾ç‰‡ã€‚ if (has_nav_menu('primary')) { wp_nav_menu(array( 'theme_location' =&gt; 'primary', 'menu' =&gt; 'primary', 'depth' =&gt; 0, 'container' =&gt; '', 'container_class' =&gt; '', 'menu_class' =&gt; 'nav navbar-nav', 'items_wrap' =&gt; '&lt;ul class=&quot;%2$s&quot;&gt;%3$s&lt;/ul&gt;' )); } ``` ","link":"https://ihopefulchina.github.io/ru-he-zai-dao-hang-lan-tian-jia-tu-pian/"},{"title":"Wordpress æ·»åŠ è‡ªå®šä¹‰åˆ†ç±»","content":"Wordpress ç©æ³•å¾ˆå¤šï¼Œå…¶ä¸­è‡ªå®šä¹‰åˆ†ç±»è¿™ä¸€é¡¹æ˜¯å¾ˆé‡è¦çš„ï¼Œå¾ˆå¤šç©æ³•ï¼Œé¦–å…ˆéœ€è¦å­¦ä¼šå¦‚ä½•åˆ›å»ºè‡ªå®šä¹‰åˆ†ç±»ã€‚ è‡ªå®šä¹‰åˆ†ç±»è¿™ä¸ªæè¿°ä¸æ˜¯å¾ˆå‡†ç¡®ï¼ŒWordpress é»˜è®¤åªæœ‰ä¸€ä¸ªæ–‡ç« ï¼Œå’Œæ–‡ç« åˆ†ç±»ï¼Œå¦‚æœæˆ‘ä»¬æƒ³åˆ›å»ºä¸€ä¸ªäº§å“ç±»ç›®ï¼Œæ¡ˆä¾‹ç±»ç›®ï¼Œæ–°é—»ç±»ç›®ï¼Œè‡ªå¸¦çš„æ— æ³•æ»¡è¶³è¿™é¡¹è§„å®šï¼Œæ‰€ä»¥éœ€è¦è‡ªå®šä¹‰åˆ†ç±»ã€‚ åˆ†2ç§æƒ…å†µï¼Œä¸€ç§ä¸å¸¦å­åˆ†ç±»ï¼Œå¦‚ä½•å†™ï¼Ÿ function products() { $labels = array( 'name' =&gt; _x( 'äº§å“', 'post type åç§°' ), 'add_new' =&gt; _x( 'æ–°å»ºäº§å“', 'æ·»åŠ æ–°äº§å“çš„é“¾æ¥åç§°' ), 'add_new_item' =&gt; __( 'æ–°å»ºä¸€ä¸ªäº§å“' ), 'edit_item' =&gt; __( 'ç¼–è¾‘äº§å“' ), 'new_item' =&gt; __( 'æ–°äº§å“' ), 'all_items' =&gt; __( 'æ‰€æœ‰äº§å“' ), 'view_item' =&gt; __( 'æŸ¥çœ‹äº§å“' ), 'search_items' =&gt; __( 'æœç´¢äº§å“' ), 'not_found' =&gt; __( 'æ²¡æœ‰æ‰¾åˆ°äº§å“' ), 'not_found_in_trash' =&gt; __( 'å›æ”¶ç«™é‡Œé¢æ²¡æœ‰äº§å“' ), 'parent_item_colon' =&gt; '', 'menu_name' =&gt; 'äº§å“' ); $args = array( 'labels' =&gt; $labels, 'description' =&gt; 'äº§å“', 'public' =&gt; true, 'menu_icon' =&gt; 'dashicons-cart', 'menu_position' =&gt; 13, 'supports' =&gt; array( 'title'), 'has_archive' =&gt; true, ); register_post_type( 'products', $args ); } add_action( 'init', 'products'); å…·ä½“å‚æ•°å¦‚ä½•ä¿®æ”¹å’Œæ„æ€ï¼Œå¯ä»¥å‚è€ƒå®˜æ–¹æ–‡æ¡£ å¦ä¸€ç§ï¼Œéœ€è¦å­åˆ†ç±»ã€‚ åœ¨ä¸Šé¢çš„åŸºç¡€ä¸Šæ·»åŠ  function my_taxonomies_products() { $labels = array( 'name' =&gt; _x( 'äº§å“åˆ†ç±»', 'taxonomy åç§°' ), 'singular_name' =&gt; _x( 'Product', 'taxonomy å•æ•°åç§°' ), 'search_items' =&gt; __( 'æœç´¢äº§å“åˆ†ç±»' ), 'all_items' =&gt; __( 'æ‰€æœ‰äº§å“åˆ†ç±»' ), 'parent_item' =&gt; __( 'è¯¥äº§å“åˆ†ç±»çš„ä¸Šçº§åˆ†ç±»' ), 'parent_item_colon' =&gt; __( 'è¯¥äº§å“åˆ†ç±»çš„ä¸Šçº§åˆ†ç±»ï¼š' ), 'edit_item' =&gt; __( 'ç¼–è¾‘äº§å“åˆ†ç±»' ), 'update_item' =&gt; __( 'æ›´æ–°äº§å“åˆ†ç±»' ), 'add_new_item' =&gt; __( 'æ·»åŠ æ–°çš„äº§å“åˆ†ç±»' ), 'new_item_name' =&gt; __( 'æ–°äº§å“åˆ†ç±»' ), 'menu_name' =&gt; __( 'äº§å“åˆ†ç±»' ), ); $args = array( 'labels' =&gt; $labels, 'hierarchical' =&gt; true, 'rewrite' =&gt; array( 'slug' =&gt; 'products', 'hierarchical' =&gt; true, ) ); register_taxonomy( 'product', 'products', $args ); } add_action( 'init', 'my_taxonomies_products' ); å®˜æ–¹æ–‡æ¡£æœ‰å…·ä½“ä¿®æ”¹æç¤º. å…¶ä¸­archive-products.php(äº§å“æ€»åˆ†ç±»)ï¼Œtaxonomy-product.php(äº§å“äºŒçº§åˆ†ç±»)ï¼Œsingle-products.phpï¼ˆäº§å“è¯¦æƒ…é¡µï¼‰ ä»¥ä¸Šæ˜¯Wordpressæ·»åŠ è‡ªå®šä¹‰åˆ†ç±»ï¼Œé“è·¯æ¼«æ¼«ï¼Œè¿™ä¸ªæ˜¯å¿…ä¿®è¯¾ ","link":"https://ihopefulchina.github.io/wordpress-tian-jia-zi-ding-yi-fen-lei/"},{"title":"é¡µé¢Urlç»“å°¾æ·»åŠ æ–œæ \"/\"","content":"Wordpress è‡ªå¸¦ä¸æ”¯æŒ æŸäº›é¡µé¢Urlç»“å°¾æ·»åŠ æ–œæ &quot;/&quot;ï¼Œä¾‹å¦‚äº§å“æ€»é¡µï¼ŒWordpress è¾“å‡ºçš„åœ°å€æ˜¯ xxx.com/products ,ä½†æ˜¯ç¬¦åˆé™æ€é¡µé¢Urlè§„åˆ™çš„è¯ï¼Œéœ€è¦åœ¨ç»“å°¾åŠ æ–œæ ï¼Œ æ·»åŠ functionå‡½æ•°å³å¯ã€‚ function nice_trailingslashit($string, $type_of_url) { if ( $type_of_url != 'single' &amp;&amp; $type_of_url != 'page' ) $string = trailingslashit($string); return $string; } add_filter('user_trailingslashit', 'nice_trailingslashit', 10, 2); ","link":"https://ihopefulchina.github.io/ye-mian-url-jie-wei-tian-jia-xie-gang/"},{"title":"ä¿®æ”¹Wordpressç™»å½•åè·³è½¬æŒ‡å®šé¡µé¢","content":"Wordpres åå°ç™»å½•åé»˜è®¤è·³è½¬åˆ°ä»ªè¡¨æ¿ï¼Œå…¶å®æ˜¯å¯ä»¥ä¿®æ”¹è·³è½¬åˆ°æŒ‡å®šé¡µé¢ã€‚ åœ¨functioné‡Œé¢æ·»åŠ ä¸€ä¸ªå‡½æ•°å³å¯ã€‚ function my_login_redirect($redirect_to, $request){ if( empty( $redirect_to ) || $redirect_to == 'wp-admin/' || $redirect_to == admin_url() ) return home_url(&quot;/wp-admin/admin.php?page=lanthymessage&quot;); else return $redirect_to; } add_filter(&quot;login_redirect&quot;, &quot;my_login_redirect&quot;, 10, 3); å…¶ä¸­çš„'/wp-admin/admin.php?page=lanthymessage'æ˜¯æŒ‡å®šçš„urlåœ°å€ã€‚ ä»¥ä¸Šå°±æ˜¯å®ç°Wordpressç™»å½•åè·³è½¬åˆ°æŒ‡å®šé¡µé¢ã€‚ ","link":"https://ihopefulchina.github.io/xiu-gai-wordpress-deng-lu-hou-tiao-zhuan-zhi-ding-ye-mian/"},{"title":"PHPåŠ¨æ€å†…å®¹ï¼Œå¦‚ä½•æ·»åŠ Classï¼Ÿ","content":"é‡åˆ°è¿‡ä¸€ä¸ªå¥‡æ€ªçš„éœ€æ±‚ï¼Œå®¢æˆ·çš„é‚®ç®±æ˜¯é€šè¿‡åå°å¡«å†™çš„ï¼Œç„¶åå‰å°è·å–ï¼Œè·å–çš„æ˜¯ä¸€ä¸²å­—ç¬¦ä¸²ï¼Œä¾‹å¦‚:xxx@mail.com ä½†æ˜¯å®¢æˆ·éœ€æ±‚æ˜¯@è¿™ä¸ªå­—ä½“è¦è·Ÿåˆ«çš„ä¸ä¸€æ ·ã€‚ã€‚ã€‚æˆ‘åªèƒ½é€šè¿‡æ·»åŠ classçš„æ–¹æ³•ï¼Œè§£å†³è¿™ä¸ªéœ€æ±‚ã€‚ é¦–å…ˆ è·å–åŠ¨æ€å†…å®¹ã€æ ¹æ®&quot;@&quot;åˆ†ç»„å­—ç¬¦ä¸²ã€‚ $email = explode('@',get_field('email', 90)); ç„¶åä¸²è”æ·»åŠ è¾“å‡ºå³å¯ echo $email[0].'&lt;span class=&quot;email-ico&quot;&gt;@&lt;/span&gt;'.$email[1]; ","link":"https://ihopefulchina.github.io/php-dong-tai-nei-rong-ru-he-tian-jia-class/"},{"title":"Wordpress é¢åŒ…å±‘ä¸€äº›é—®é¢˜","content":"Wordpress æœ¬èº«æ²¡æœ‰é¢åŒ…å±‘ï¼Œä½†ä¸ºäº†SEOæˆ‘ä»¬æœ€å¥½åŠ ä¸Šè¿™ä¸ªï¼Œç”¨ä¸Šé¢åŒ…å±‘ï¼Œéœ€è¦è§£å†³å‡ ä¸ªé—®é¢˜ã€‚ å¦‚ä½•åˆ†å±‚æ¬¡ï¼Œé€æ­¥ç½—åˆ—å±‚çº§ï¼Ÿ å¦‚ä½•è·å–URLå’ŒTitleï¼Ÿ å…¶å®å¾ˆå¥½è§£å†³è¿™ä¸ªé—®é¢˜ åœ¨è‹±æ–‡ç½‘ç«™æœ€å¥½è§£å†³ã€‚ é¦–å…ˆæ ¹æ®urlè·å–å½“å‰é¡µé¢æ‰€æœ‰slug $uri=explode('/',$_SERVER['REQUEST_URI']); ä¾‹å¦‚: xxx.com/products/cate/cate-1/xxx.html æ‰“å°å‡ºæ¥çš„æ•°ç»„æ˜¯array(3) { [0]=&gt;&quot;&quot;, [1] =&gt;&quot;products&quot; ,[2]=&gt; &quot;cate&quot;,[3]=&gt; &quot;cate-1&quot;, [4]=&gt; &quot;xxx&quot;,} ç„¶åå°±å¯ä»¥æ ¹æ®Slug è½¬æ¢æˆtitle &lt;ol class=&quot;breadcrumb&quot;&gt; &lt;li itemscope=&quot;&quot; itemtype=&quot;//data-vocabulary.org/Breadcrumb&quot;&gt;&lt;a href='/' itemprop=&quot;url&quot;&gt;&lt;span itemprop=&quot;title&quot;&gt;&lt;i class=&quot;fas fa-home&quot;&gt;&lt;/i&gt;&lt;/span&gt;&lt;/a&gt;&lt;/li&gt; &lt;li itemscope=&quot;&quot; itemtype=&quot;//data-vocabulary.org/Breadcrumb&quot;&gt;&lt;a href='/solutions/' itemprop=&quot;url&quot;&gt;&lt;span itemprop=&quot;title&quot;&gt;Solution&lt;/span&gt;&lt;/a&gt;&lt;/li&gt; &lt;?php if(isset($uri['4'])):?&gt;&lt;li itemscope=&quot;&quot; itemtype=&quot;//data-vocabulary.org/Breadcrumb&quot;&gt;&lt;a href='/products/&lt;?=$uri[2];?&gt;/' class=&quot;active&quot;&gt;&lt;span itemprop=&quot;title&quot;&gt;&lt;?=str_replace('-',' ',$uri[2]);?&gt;&lt;/span&gt;&lt;/a&gt;&lt;/li&gt; &lt;li itemscope=&quot;&quot; itemtype=&quot;//data-vocabulary.org/Breadcrumb&quot; &gt;&lt;a href='' class=&quot;active&quot;&gt;&lt;span itemprop=&quot;title&quot;&gt;&lt;?=str_replace('-',' ',$uri[3]);?&gt;&lt;/span&gt;&lt;/a&gt;&lt;/li&gt; &lt;?php elseif(isset($uri['3'])):?&gt; &lt;li itemscope=&quot;&quot; itemtype=&quot;//data-vocabulary.org/Breadcrumb&quot; &gt;&lt;a href='' class=&quot;active&quot;&gt;&lt;span itemprop=&quot;title&quot;&gt;&lt;?=str_replace('-',' ',$uri[2]);?&gt;&lt;/span&gt;&lt;/a&gt;&lt;/li&gt; &lt;?php endif; ?&gt; &lt;/ol&gt; ä»¥ä¸Šæ˜¯è‹±æ–‡ç«™çš„è§£å†³æ–¹æ³•ï¼Œé‚£ä¹ˆè§£å†³ä¸­æ–‡ç«™è·Ÿslugä¸åŒ¹é…çš„é—®é¢˜ï¼Ÿ å¾ˆç®€å•ï¼Œå®šä¹‰ä¸€ä¸ªfunctionå‡½æ•° function custom_taxonomies_terms_links(){ //æ ¹æ®å½“å‰æ–‡ç« IDè·å–æ–‡ç« ä¿¡æ¯ $post = get_post( $post-&gt;ID ); //è·å–å½“å‰æ–‡ç« çš„æ–‡ç« ç±»å‹ $post_type = $post-&gt;post_type; //è·å–æ–‡ç« æ‰€åœ¨çš„è‡ªå®šä¹‰åˆ†ç±»æ³• $taxonomies = get_object_taxonomies( $post_type, 'objects' ); $out = array(); foreach ( $taxonomies as $taxonomy_slug =&gt; $taxonomy ){ $term_list = wp_get_post_terms($post-&gt;ID, $taxonomy_slug, array(&quot;fields&quot; =&gt; &quot;all&quot;)); echo $term_list[0]-&gt;name; //æ˜¾ç¤ºæ–‡ç« æ‰€å¤„çš„åˆ†ç±»ä¸­çš„ç¬¬ä¸€ä¸ª } return implode('', $out ); } ç„¶åè·å–å³å¯ ","link":"https://ihopefulchina.github.io/wordpress-mian-bao-xie-yi-xie-wen-ti/"},{"title":"è§£å†³Wordpressè‡ªå®šä¹‰åˆ†ç±»archiveé¡µé¢æ— æ³•é€šè¿‡åˆ†ç±»ç½—åˆ—æ–‡ç« çš„é—®é¢˜","content":"Wordpressæœ‰è®¸å¤šå¥‡æ€ªçš„é€»è¾‘ï¼Œä¾‹å¦‚æˆ‘åˆ›å»ºä¸€ä¸ªå«äº§å“çš„è‡ªå®šä¹‰åˆ†ç±»ï¼Œåœ¨äº§å“æ€»é¡µé¢ï¼Œæ— æ³•é€šè¿‡è‡ªå¸¦å‡½æ•°æ ¹æ®äº§å“åˆ†ç±»çš„é¡ºåºç½—åˆ—äº§å“æ‰€åœ¨åˆ†ç±»ä¸‹çš„æ‰€æœ‰äº§å“ã€‚ è§£å†³æ€è·¯ï¼š å…ˆæ ¹æ®get_categoriesè·å–æ‰€æœ‰äº§å“åˆ†ç±»ã€‚ æ ¹æ®æ‰€æœ‰äº§å“åˆ†ç±»foreachå¾ªç¯è¿™ä¸ªåˆ†ç±»ä¸‹çš„nameã€slugã€term_idã€‚ ç„¶åæ ¹æ®è¿™äº›åˆ†ç±»çš„id(tax_query)è·å–æ‰€æœ‰äº§å“ã€‚ è®©æˆ‘ä»¬å¼€å§‹å§ã€‚å…ˆå®šä¹‰2ä¸ªæ•°ç»„ï¼Œå…¶ä¸­ä¸€ä¸ªæ ¹æ®get_categoriesè·å–æ‰€æœ‰äº§å“åˆ†ç±»ã€‚ $test = get_categories(&quot;taxonomy=product&amp;hide_empty=0&quot;); $cats=array(); ç„¶åå¾ªç¯è·å–nameã€slugã€term_id foreach($test as $tmpcat){ if($tmpcat-&gt;parent==0){ $cats[$tmpcat-&gt;term_id]['name']=$tmpcat-&gt;name; $cats[$tmpcat-&gt;term_id]['slug']=$tmpcat-&gt;slug; $cats[$tmpcat-&gt;term_id]['term_id']=$tmpcat-&gt;term_id; } } å¯¹æ•°ç»„æ’åº ksort($cats); æœ€åè·å–æ‰€æœ‰äº§å“ &lt;?php $i=0; foreach($cats as $key=&gt;$val){ $id = 'term_'.$cats[$key]['term_id']; $taxId = (int)$cats[$key]['term_id']; $i++; ?&gt; &lt;h2&gt; &lt;a href=&quot;/products/&lt;?php echo $cats[$key]['slug']; ?&gt;/&quot;&gt; &lt;?php echo $cats[$key]['name']; ?&gt; &lt;/a&gt; &lt;/h2&gt; &lt;div class=&quot;clearfix&quot;&gt;&lt;/div&gt; &lt;?php $args=array( 'order' =&gt; 'ASC', 'tax_query' =&gt; array( array( 'taxonomy' =&gt; 'product', 'field' =&gt; 'term_id', 'terms' =&gt; $taxId, ) ) ); $arms = array_merge($args, $wp_query-&gt;query); query_posts($arms); ?&gt; &lt;?php if (have_posts()) : ?&gt; &lt;div class=&quot;all-product&quot;&gt; &lt;?php while (have_posts()) : the_post(); ?&gt; &lt;div class=&quot;col-md-4&quot;&gt; &lt;div class=&quot;re-solution-product&quot;&gt; &lt;div class=&quot;re-solution-product-imgcontent&quot;&gt; &lt;a class=&quot;re-solution-product-img&quot; href=&quot;&lt;?php the_permalink(); ?&gt;&quot;&gt; &lt;img src=&quot;&lt;?php echo get_field('product_img_cate')?&gt;&quot; alt=&quot;&lt;?php the_title()?&gt; images&quot; /&gt; &lt;/a&gt; &lt;/div&gt; &lt;div class=&quot;re-solution-position&quot;&gt; &lt;div class=&quot;re-solution-content&quot;&gt; &lt;a class=&quot;re-solution-product-title&quot; href=&quot;&lt;?php the_permalink(); ?&gt;&quot;&gt;&lt;?php the_title()?&gt;&lt;/a&gt; &lt;ul&gt; &lt;?php if( have_rows('product_adv') ):while ( have_rows('product_adv') ) : the_row();$adv = get_sub_field('product_adv');echo '&lt;li&gt;'.$adv.'&lt;/li&gt;';endwhile;endif;?&gt; &lt;/ul&gt; &lt;div class=&quot;re-products-content-a-link-s&quot;&gt; &lt;a class=&quot;product-more&quot; href=&quot;&lt;?php the_permalink(); ?&gt;&quot;&gt;More Info &lt;i class=&quot;fas fa-chevron-right&quot;&gt;&lt;/i&gt;&lt;/a&gt; &lt;/div&gt; &lt;/div&gt; &lt;/div&gt; &lt;/div&gt; &lt;/div&gt; &lt;?php endwhile; ?&gt; &lt;/div&gt; &lt;div class=&quot;clearfix&quot;&gt;&lt;/div&gt; &lt;?php endif; wp_reset_query();?&gt; &lt;?php } ?&gt; ä»¥ä¸Šæ˜¯è§£å†³ä¸€ç§æ€è·¯ï¼Œå¦‚æœæœ‰ä»€ä¹ˆæ›´å¥½çš„æ€è·¯å¯ä»¥ä¸€èµ·æ¢è®¨ Demo: &lt;div class=&quot;taxonomy-products we-all-product&quot;&gt; &lt;?php $test = get_categories(&quot;taxonomy=product&amp;hide_empty=0&quot;); $cats=array(); $cat_child=array(); foreach($test as $tmpcat){ if($tmpcat-&gt;parent==0){ $cats[$tmpcat-&gt;term_id]['name']=$tmpcat-&gt;name; $cats[$tmpcat-&gt;term_id]['slug']=$tmpcat-&gt;slug; $cats[$tmpcat-&gt;term_id]['term_id']=$tmpcat-&gt;term_id; } } ksort($cats); $i=0; foreach($cats as $key=&gt;$val){ $id = 'term_'.$cats[$key]['term_id']; $taxId = (int)$cats[$key]['term_id']; $i++; ?&gt; &lt;h2&gt; &lt;a href=&quot;/products/&lt;?php echo $cats[$key]['slug']; ?&gt;/&quot;&gt; &lt;?php echo $cats[$key]['name']; ?&gt; &lt;/a&gt; &lt;/h2&gt; &lt;div class=&quot;clearfix&quot;&gt;&lt;/div&gt; &lt;?php $args=array( 'order' =&gt; 'ASC', 'tax_query' =&gt; array( array( 'taxonomy' =&gt; 'product', 'field' =&gt; 'term_id', 'terms' =&gt; $taxId, ) ) ); $arms = array_merge($args, $wp_query-&gt;query); query_posts($arms); ?&gt; &lt;?php if (have_posts()) : ?&gt; &lt;div class=&quot;all-product&quot;&gt; &lt;?php while (have_posts()) : the_post(); ?&gt; &lt;div class=&quot;col-md-4&quot;&gt; &lt;div class=&quot;re-solution-product&quot;&gt; &lt;div class=&quot;re-solution-product-imgcontent&quot;&gt; &lt;a class=&quot;re-solution-product-img&quot; href=&quot;&lt;?php the_permalink(); ?&gt;&quot;&gt; &lt;img src=&quot;&lt;?php echo get_field('product_img_cate')?&gt;&quot; alt=&quot;&lt;?php the_title()?&gt; images&quot; /&gt; &lt;/a&gt; &lt;/div&gt; &lt;div class=&quot;re-solution-position&quot;&gt; &lt;div class=&quot;re-solution-content&quot;&gt; &lt;a class=&quot;re-solution-product-title&quot; href=&quot;&lt;?php the_permalink(); ?&gt;&quot;&gt;&lt;?php the_title()?&gt;&lt;/a&gt; &lt;ul&gt; &lt;?php if( have_rows('product_adv') ):while ( have_rows('product_adv') ) : the_row();$adv = get_sub_field('product_adv');echo '&lt;li&gt;'.$adv.'&lt;/li&gt;';endwhile;endif;?&gt; &lt;/ul&gt; &lt;div class=&quot;re-products-content-a-link-s&quot;&gt; &lt;a class=&quot;product-more&quot; href=&quot;&lt;?php the_permalink(); ?&gt;&quot;&gt;More Info &lt;i class=&quot;fas fa-chevron-right&quot;&gt;&lt;/i&gt;&lt;/a&gt; &lt;/div&gt; &lt;/div&gt; &lt;/div&gt; &lt;/div&gt; &lt;/div&gt; &lt;?php endwhile; ?&gt; &lt;/div&gt; &lt;div class=&quot;clearfix&quot;&gt;&lt;/div&gt; &lt;?php endif; wp_reset_query();?&gt; &lt;?php } ?&gt; &lt;/div&gt; ``` ","link":"https://ihopefulchina.github.io/jie-jue-wordpress-zi-ding-yi-fen-lei-archive-ye-mian-wu-fa-tong-guo-fen-lei-luo-lie-wen-zhang-de-wen-ti/"},{"title":"Lnmp on pagespeed","content":"Lnmp-on-pagespeed RedHat, CentOS, or Fedora sudo yum install gcc-c++ pcre-devel zlib-devel make unzip Ubuntu or Debian(ä¸€ä¸ªä¸€ä¸ªå®‰è£…ï¼Œæˆ‘æµ‹è¯•çš„æ—¶å€™åªå®‰è£…ç¬¬ä¸€ä¸ªå°±å¯ä»¥ï¼Œä½†å‘ç°åé¢æœ‰å‡ æ¬¡å¿…é¡»å®‰è£…åé¢çš„å‡ ä¸ªä¾èµ–æ‰èƒ½100%å®‰è£…ï¼‰ sudo apt-get install build-essential zlib1g-dev libpcre3 libpcre3-dev unzip apt install uuid-dev apt-get install libssl-dev openssl apt-get install libxslt-dev sudo apt-get install -y libgd-dev apt-get install libgeoip-dev -y LNMP å®‰è£… ngx_pagespeed çš„æ–¹æ³• 1ã€é¦–å…ˆï¼Œæ ¹æ®å®˜æ–¹æ•™ç¨‹ä¸‹è½½ Page Speedï¼ŒæŠŠä¸‹é¢çš„å‘½ä»¤ä¿å­˜æˆ dp.sh æ–‡ä»¶ï¼Œç„¶åè¿è¡Œ chmod +x dp.sh èµ‹äºˆè¯¥æ–‡ä»¶å¯æ‰§è¡Œæƒé™ï¼Œç„¶åè¿è¡Œ ./dp.sh å³å¯è‡ªåŠ¨ä¸‹è½½å¹¶è§£å‹ ngx_pagespeed æ¨¡å—çš„æºä»£ç ã€‚ ç°åœ¨æœ€æ–°ç‰ˆæœ¬æ˜¯1.13.35.2-stableã€‚ä½ å¯ä»¥åœ¨è¿™é‡ŒæŸ¥çœ‹æœ€æ–°ç‰ˆæœ¬ã€‚ åˆ¶ä½œdp.sh cd nano dp.sh å†™å…¥ä»£ç ,å¤åˆ¶ç²˜è´´è¿›å»ï¼Œç„¶åCtrl+X, è¾“å…¥Yï¼Œå›è½¦ã€‚ #[check the release notes for the latest version] NPS_VERSION=1.13.35.2-stable cd wget https://github.com/apache/incubator-pagespeed-ngx/archive/v${NPS_VERSION}.zip unzip v${NPS_VERSION}.zip nps_dir=$(find . -name &quot;*pagespeed-ngx-${NPS_VERSION}&quot; -type d) cd &quot;$nps_dir&quot; NPS_RELEASE_NUMBER=${NPS_VERSION/beta/} NPS_RELEASE_NUMBER=${NPS_VERSION/stable/} psol_url=https://dl.google.com/dl/page-speed/psol/${NPS_RELEASE_NUMBER}.tar.gz [ -e scripts/format_binary_url.sh ] &amp;&amp; psol_url=$(scripts/format_binary_url.sh PSOL_BINARY_URL) wget ${psol_url} tar -xzvf $(basename ${psol_url}) # extracts to psol/ #[check the release notes for the latest version] NPS_VERSION=1.13.35.2-stablecd cd wget https://github.com/apache/incubator-pagespeed-ngx/archive/v${NPS_VERSION}.zip unzip v${NPS_VERSION}.zip nps_dir=$(find . -name &quot;*pagespeed-ngx-${NPS_VERSION}&quot; -type d)cd &quot;$nps_dir&quot; NPS_RELEASE_NUMBER=${NPS_VERSION/beta/} NPS_RELEASE_NUMBER=${NPS_VERSION/stable/} psol_url=https://dl.google.com/dl/page-speed/psol/${NPS_RELEASE_NUMBER}.tar.gz [ -e scripts/format_binary_url.sh ] &amp;&amp; psol_url=$(scripts/format_binary_url.sh PSOL_BINARY_URL) wget ${psol_url} tar -xzvf $(basename ${psol_url}) # extracts to psol/ ç»™äºˆæƒé™å¹¶è¿è¡Œ chmod +x dp.sh sudo ./dp.sh ä» 1.12.34 ç‰ˆæœ¬å¼€å§‹ï¼ŒæŒ‰ç…§å®˜æ–¹çš„æ•™ç¨‹è¿›è¡Œçš„æ—¶å€™ï¼Œå¯èƒ½ä¼šé‡åˆ°æ— æ³•ä¸‹è½½ PSOL çš„æƒ…å†µï¼Œè¿™æ—¶å€™ï¼ŒæŒ‰ç…§ä¸‹é¢çš„åœ°å€ä¸‹è½½å¯¹åº”ç‰ˆæœ¬çš„ PSOL å°±å¯ä»¥äº†ã€‚ æˆ–è€…ä½¿ç”¨ https://dl.google.com/dl/page-speed/psol/[PageSpeedç‰ˆæœ¬]-x[ç³»ç»Ÿä½æ•°].tar.gz pagespeedä¸‹è½½åä¿®æ”¹ä¸€ä¸‹æ–‡ä»¶å¤¹åå­—æŠŠåŸæ¥çš„åå­—incubator-pagespeed-ngx-1.13.35.2-stableï¼Œä¿®æ”¹ä¸ºï¼šngx_pagespeed-1.13.35.2-stableã€‚ 2ã€ç„¶åç¼–è¾‘ Nginx å‡çº§è„šæœ¬ æˆ‘ç”¨çš„æ˜¯ LNMP 1.5ï¼Œå…¶ä»–ç‰ˆæœ¬æ›´æ¢å®‰è£…è·¯å¾„å³å¯ã€‚ é…ç½®lnmpæ–‡ä»¶ cd /root/lnmp1.5/include nano upgrade_nginx.sh æ‰¾åˆ° ./configure --user=www --group=www --prefix=/usr/local/nginxï¼Œåœ¨è¿™è¡Œä»£ç çš„æœ«å°¾æ·»åŠ ï¼Œå…¶ä¸­ ngx_pagespeed-1.13.35.2-stable æ˜¯ç¬¬ä¸€æ­¥ä¸‹è½½çš„ PageSpeed æ¨¡å—çš„ç›®å½•åç§°ï¼Œæ ¹æ®å®é™…æƒ…å†µæ›¿æ¢å³å¯ã€‚ åŠ å…¥å­—æ®µ --add-module=$HOME/ngx_pagespeed-1.13.35.2-stable æ¥ç€æ›´æ–° Nginxï¼Œå¯ä»¥æ ¹æ®éœ€è¦ï¼Œé€‰æ‹© Nginx ç‰ˆæœ¬å‡çº§ï¼Œä¸€èˆ¬é€‰æ‹©æœ€æ–°çš„ç¨³å®šç‰ˆæœ¬å³å¯ã€‚æˆ‘å®‰è£…çš„1.14.2. å‡çº§nginx cd ../ sudo ./upgrade.sh nginx å‡ºç°é”™è¯¯å¯ä»¥è¯•è¯• yum install -y libuuid-devel é…ç½®xxx.com.conf æ‰€æœ‰çš„ä¸œè¥¿å®‰è£…å®Œæ¯•ç„¶åå¼€å§‹é…ç½®ç½‘ç«™çš„confæ–‡ä»¶ï¼š æ–‡ä»¶ä½ç½®åœ¨/usr/local/nginx/conf/vhostã€‚ ä½ æœ€å¥½æŠŠä»–ä¸‹è½½åˆ°æ¡Œé¢ç¼–è¾‘ã€‚ ä½ å¯ä»¥ç›´æ¥å¤åˆ¶æˆ‘çš„é…ç½®ï¼Œå¯¹åº”ä¿®æ”¹ä¸€ä¸‹è‡ªå·±çš„ç½‘ç«™åç§°ï¼š é…ç½®æ–‡ä»¶å†™å¥½å¹¶ä¸Šä¼ åï¼ŒæŠŠxxx.com.confé‡Œé¢å†…å®¹åŠ è¿›å»ã€‚ æ›´æ–°ç¼“å­˜ touch /var/cache/ngx_pagespeed/cache.flush ","link":"https://ihopefulchina.github.io/lnmp-on-pagespeed/"},{"title":"è§£å†³åŒä¸€å¼ å›¾ç‰‡ï¼Œéœ€è¦åœ¨ä¸åŒå°ºå¯¸æä¾›ä¸åŒçš„æ°´å°","content":"å®¢æˆ·éœ€è¦ä¸Šä¼ åŒä¸€å¼ å›¾ç‰‡ï¼Œéœ€è¦åœ¨ä¸åŒå°ºå¯¸æä¾›ä¸åŒçš„æ°´å°ï¼Œæˆ‘çœ‹äº†ã€å°è¯•äº†å¾ˆå¤šæ’ä»¶ï¼Œå‘ç°åŸºæœ¬éƒ½ä¸æ”¯æŒå¤šä¸ªæ°´å°ï¼Œ2ä¸ªæ’ä»¶ç»„åˆä¼šå‡ºç°å…¼å®¹æ€§é—®é¢˜ï¼Œåªèƒ½ç”Ÿæ•ˆå…¶ä¸­ä¸€ä¸ªã€‚ æˆ‘æŸ¥é˜…å®˜æ–¹æ–‡æ¡£ï¼Œä¹Ÿæœªæ‰¾åˆ°ç­”æ¡ˆï¼Œè‹¦æ¼å¦‚ä½•è§£å†³è¿™ä¸ªé—®é¢˜çš„æ—¶å€™ï¼Œæ‰¾åˆ°äº†Awesome Watermarkè¿™ä¸ªæ’ä»¶ï¼Œè¿™ä¸ªæ˜¯å”¯ä¸€ä¸€ä¸ªæ”¯æŒä¸åŒå°ºå¯¸å®ç°ä¸åŒæ°´å°çš„è¦æ±‚ã€‚ ä½†è¿™ä¸ªæ’ä»¶æœ‰å‡ ä¸ªé—®é¢˜: 1.siteurlå’Œhomeçš„åœ°å€å¿…é¡»å†™åŸŸååœ°å€,ä¸èƒ½æ˜¯æ–œæ ã€‚ 2.æ“ä½œå¾ˆä¸å‹å¥½ï¼Œä¸é€‚ç”¨å°ç™½ç”¨æˆ·ã€‚ 3.æ°´å°å¤§å°å¾ˆå›ºå®šï¼Œåªèƒ½æ˜¯Full Sizeï¼ŒLargeï¼ŒMediumï¼ŒMedium Largeï¼ŒThumbnailã€‚ ä½†ç‘•ä¸æ©ç‘œï¼Œè¿™æ˜¯å”¯ä¸€ä¸€ä¸ªè§£å†³è¿™ä¸ªé—®é¢˜çš„æ’ä»¶ã€‚ éœ€è¦æ³¨æ„:æœ€å¥½é€‰æ‹©æ°´å°å›¾ç‰‡çš„æ—¶å€™ï¼Œä»€ä¹ˆå°ºå¯¸çš„æ°´å°ï¼Œé€‰æ‹©ä»€ä¹ˆå°ºå¯¸å¤§å°ã€‚ ","link":"https://ihopefulchina.github.io/jie-jue-tong-yi-zhang-tu-pian-xu-yao-zai-bu-tong-chi-cun-ti-gong-bu-tong-de-shui-yin/"},{"title":"å…³äºåŸºäºWordpressçš„ä¼ä¸šç½‘ç«™æ­å»ºä¸€äº›æ„Ÿæƒ³","content":"æ„Ÿå¹äºWordpressçš„å¼ºå¤§ï¼ŒWordpress èƒ½è®©ä¸€ä¸ªç½‘ç«™å¿«é€Ÿæ­å»ºå®Œæˆï¼Œä½†æˆä¹Ÿè§ä½•è´¥è§ä½•ï¼Œåšçš„è¶Šä¹…ï¼Œè¶Šå‘ç°Wordpressè¿˜æ˜¯æŠŠä½ æŸç¼šåœ¨Blogé‡Œé¢ï¼Œæœ¬è´¨ä¸ŠWordprssä¸Šè¿˜æ˜¯ä¸€ä¸ªåšå®¢ç³»ç»Ÿï¼Œå¼ºè¡ŒåŸºäºWordpressæ­å»ºç½‘ç«™è¿˜æ˜¯ä¼šæœ‰äº›é”™ä¹±ï¼Œæ•°æ®è°ƒç”¨å’ŒæŸ¥ç›¸å…³æ–‡æ¡£ï¼Œè¿˜æ˜¯è¦åŸºäºåšå®¢ç³»ç»Ÿçš„æ€ç»´æ¥å®Œæˆï¼Œè¿™æ˜¯ä¸€ç§æ‰­æ›²çš„çŠ¶æ€ã€‚ ä¸°å¯Œçš„æ’ä»¶ï¼Œå’Œä¼˜ç§€çš„è´¡çŒ®å¼€å‘è€…ï¼Œè®©Wordpressçš„ç”Ÿæ€ç¯å¢ƒåœ¨æœªæ¥å¾ˆé•¿æ—¶é—´åœ¨blogé¢†åŸŸæœ‰é•¿è¶³çš„å‘å±•ï¼Œå¯¹ï¼Œä»…é™äºBlogé¢†åŸŸï¼Œå®˜ç½‘å’Œå¤–è´¸ç½‘ç«™çš„æ­å»ºè¿˜æ˜¯æ¬ ç¼ºç‚¹ç«å€™ã€‚ å†ç»1å¹´å¤šæ—¶é—´ï¼Œå¿™äºä¸ºå„ç±»å®¢æˆ·æ­å»ºå®˜ç½‘å’Œå¤–è´¸ç½‘ç«™ï¼Œå› ä¸ºå…¬å¸è§„æ¨¡è¾ƒå°ï¼Œæˆ‘ç›´æ¥é¢å¯¹å®¢æˆ·ï¼Œåœ¨æ‘¸ç´¢å’Œå¼€å‘çš„è¿‡ç¨‹ä¸­ï¼Œå‘ç°ç”²æ–¹æ‹¥æœ‰å¾ˆå¤šå¥‡æ€å¦™æƒ³ï¼Œå¾ˆå¤šä¸€å¼€å§‹æ„Ÿè§‰æ— æ³•é€šè¿‡wordpressç³»ç»Ÿå®Œæˆçš„ï¼Œ ç»è¿‡æ‘¸ç´¢ã€è¿­ä»£ï¼Œæœ€ç»ˆå®¢æˆ·å¤§éƒ¨åˆ†åŠŸèƒ½éƒ½å¯ä»¥å®ç°ï¼Œå®ç°çš„æ–¹å¼ä¸ä¸€æ ·ï¼Œæœ‰çš„æ˜¯ç°æˆçš„æ’ä»¶å®ç°ï¼Œæœ‰çš„éœ€è¦ä¿®æ”¹wordpressæºç ï¼Œæœ‰çš„éœ€è¦é€šè¿‡wordpressçš„phpå®ç°ï¼Œç­‰ç­‰ã€‚ åŸºäºç–²äºä¸åŒå®¢æˆ·å¾ˆå¤šåŠŸèƒ½é›·åŒæˆ–ç›¸ä¼¼ï¼Œæˆ‘è¿«åˆ‡éœ€è¦æ¨¡å—åŒ–ä»£ç ï¼Œæ¨¡å—åŒ–è‡ªå®šä¹‰å­—æ®µï¼Œæ¨¡å—åŒ–æµç¨‹ã€‚å…¬å¸è§„æ¨¡è¾ƒå°ï¼Œæ²¡äººå¸®æˆ‘ï¼Œæˆ‘é€‰æ‹©è‡ªå·±æ‰¾å’Œæ‘¸ç´¢ï¼Œæœ€ç»ˆæ‰¾åˆ°äº†ã€‚è¿™æ ·è®©æˆ‘çš„ç½‘ç«™ç¼–å†™è¿›ç¨‹é€Ÿåº¦å¤§å¤§åŠ å¿«ã€‚ æ¨¡å—åŒ–çš„æƒ³æ³•ä»˜å‡ºå®æ–½å·²ç»æœ‰åŠå¹´äº†ï¼Œç°åœ¨å›æ¥æœ‰ä¸€äº›å¯¹wordpressæ„Ÿæƒ³ï¼š 1.wordpressèƒ½åšä¸‹å»ï¼Œä½†å›½å†…å¤ªå°ä¼—äº†ï¼Œå…¨çƒæœ‰å¾ˆå¤šç½‘ç«™æ˜¯åŸºäºwordpressæ­å»ºçš„ï¼Œå›½å¤–çš„è®ºå›è®¨è®ºå¹³å°å¾ˆæ´»è·ƒï¼Œå›½å†…æˆ‘æ‰¾äº†å‡ ä¸ªå¤§ç‚¹çš„è®ºå›ï¼Œä¹Ÿæ­»æ°”æ²‰æ²‰çš„ï¼Œå›½å†…ç¯å¢ƒå¤ªå°ä¼—ï¼Œå¾ˆå¤šæ—¶å€™éƒ½æ˜¯å»å¤–ç½‘çœ‹è‹±æ–‡è§£å†³é—®é¢˜ã€‚ 2.è‡ƒè‚¿ï¼Œä¸é€‚åˆå¤§å‹ç½‘ç«™ï¼Œå¤§å‹ä¼ä¸šå¼€å‘ç½‘ç«™ï¼Œåªèƒ½åå‘äºå°å‹ä¼ä¸šã€å¤–è´¸ç½‘ç«™ç­‰ç­‰ã€‚ 3.ä¸€æ¬¡è‡ªå®šä¹‰æ·±åº¦å¼€å‘ï¼Œä¸é€‚åˆé•¿æœŸè·å–æ›´æ–°wordpressç³»ç»Ÿã€‚ 4.å¼€å‘é€Ÿåº¦å¾ˆå¿«ï¼Œä¸€èˆ¬ä¼ä¸šç½‘ç«™å’Œå¤–è´¸ç½‘ç«™ï¼Œä¸€ä¸ªæ˜ŸæœŸè¶³ä»¥å®Œæˆå’Œäº¤ä»˜ç½‘ç«™(ä¸åŒ…æ‹¬å®¢æˆ·æ»¡æ„åº¦ã€æ²Ÿé€šç­‰ç­‰)ã€‚ 5.ä¸Šæ‰‹å¾ˆå¿«ï¼Œå…¥é—¨å¾ˆç®€å•ï¼Œä½†æƒ³è¦äº†è§£æ›´å¤šï¼Œæ¯”å¦‚æ­å»ºä¼ä¸šç«™ï¼Œè‡ªå®šä¹‰å‡½æ•°ç­‰ç­‰ï¼Œå°±éœ€è¦å¾ˆå¤šæ—¶é—´å»å­¦ä¹ è¿™å¥—ç³»ç»Ÿã€‚ 6.æœ¬è´¨ä¸Šè¿™æ˜¯PHP+Mysqlçš„å¼€å‘ç¯å¢ƒï¼Œé€»è¾‘ä¸Šè·Ÿè‡ªå·±å¼€å‘åŸºäºPHPåå°çš„æ•ˆæœæ˜¯ä¸€æ ·çš„ï¼Œå°±æ˜¯ç»™å¥—äº†ä¸€ä¸ªå£³ã€‚ ","link":"https://ihopefulchina.github.io/guan-yu-ji-yu-wordpress-de-qi-ye-wang-zhan-da-jian-yi-xie-gan-xiang/"},{"title":"Wordpress themeä¸»é¢˜ç»“æ„è§£æ","content":"Wordpresså®šåˆ¶ç«™ï¼Œç»“æ„ä¸å¤æ‚ï¼Œäº†è§£æ›´å¤šå»ºè®®å»å¤šçœ‹çœ‹å®˜æ–¹æ–‡æ¡£ï¼Œä¸‹é¢è¿™ä¸ªå›¾ç‰‡æ˜¯æˆ‘çš„å®šåˆ¶ç«™éœ€è¦çš„æ–‡ä»¶ç»“æ„ã€‚ éœ€è¦æ³¨æ„çš„æ˜¯product-content.phpè¿™ä¸ªå‡ ä¸ªæ–‡ä»¶ï¼Œæ˜¯æˆ‘éšä¾¿åˆ›å»ºçš„ï¼Œæ˜¯å› ä¸ºç”¨åˆ°äº†åˆ¤æ–­ï¼Œä¸åŒçš„åˆ¤æ–­é€»è¾‘å¯¹åº”ä¸åŒçš„PHPæ–‡ä»¶ï¼Œä¸ç”¨åœ¨æ„ï¼Œindex.phpå’Œstyle.cssè¿™2ä¸ªæ–‡ä»¶å¿…é¡»æœ‰ï¼Œä¸ç„¶æŒ‚ä¸ä¸Šä¸»é¢˜ã€‚ å¯èƒ½æœ‰äººæ³¨æ„åˆ°äº†ï¼Œæˆ‘è¿™é‡Œå±…ç„¶æ²¡æœ‰functionå‡½æ•°ï¼Œæ˜¯å› ä¸ºæˆ‘é‡‡ç”¨å‡½æ•°æ¨¡å—åŒ–çš„è®¾è®¡ï¼Œæ˜¯åœ¨åå°ç¼–å†™çš„ï¼Œè¿™æ˜¯æˆ‘å¿…å¤‡æ’ä»¶ï¼Œæ‰€ä»¥æˆ‘æ²¡æœ‰functionå‡½æ•°ã€‚ ","link":"https://ihopefulchina.github.io/wordpress-theme-zhu-ti-jie-gou-jie-xi/"},{"title":"WordPresså‡½æ•°ä»£ç æ¨¡å—åŒ–","content":"å‡½æ•°æ¨¡å—åŒ–ï¼Œä»¥ç®€å•ã€ç®€æ´ã€ç®€çº¦çš„æ–¹å¼æ·»åŠ ä»£ç ç‰‡æ®µåˆ°æ‚¨çš„ç«™ç‚¹ã€‚å†ä¹Ÿæ²¡æœ‰å¿…è¦å»ç¼–è¾‘ä¸»é¢˜çš„ functions.php æ–‡ä»¶ã€‚ Githubåœ°å€ï¼šhttps://github.com/ihopefulChina/Wordpress-function-modular ","link":"https://ihopefulchina.github.io/wordpress-han-shu-dai-ma-mo-kuai-hua/"}]}